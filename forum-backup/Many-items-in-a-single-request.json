{"title":"Many items in a single request.","pubDate":"2013-07-01T00:00:05.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Many-items-in-a-single-request","comments":[{"pubDate":"2013-07-01T14:36:47.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Many-items-in-a-single-request/2327296","author":"ezd.6359","body":"\n<p>I want to track changes between versions/builds, it is not a problem. Also such information changes with new builds only. One request per update – should not be a problem for gw2 servers.</p>","arenanet":false},{"pubDate":"2013-07-01T14:04:42.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Many-items-in-a-single-request/2327100","author":"Healix.5819","body":"\n<p>Only a handful of items will ever change and in most cases, it should happen within the first few months of an expansion or major release. The build changes too often to rely on it. You’d be re-caching everything every few days and 99% of the time, nothing will change.</p>\n<p>If the system needs to be automated, re-cache items based on how old their cache is. For example, 30 days from the day you cached said item, update it. After say, 6 months, the item probably won’t be changed again, so either stop checking those, or increase the time between checks.</p>\n<p>If you can rely on the user, add an option to flag the item to be updated, since eventually, the user will find the error.</p>\n<p>Another method is to manually update items by reading patch notes or by parsing the patch notes for item names, though the notes usually miss a lot.</p>","arenanet":false},{"pubDate":"2013-07-01T11:27:40.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Many-items-in-a-single-request/2326518","author":"ezd.6359","body":"\n<p>Search by name, but not by item details/recipe components.</p>","arenanet":false},{"pubDate":"2013-07-01T11:07:14.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Many-items-in-a-single-request/2326435","author":"smiley.1438","body":"\n<p>I realized that when i hit the post button… ;D Anyway, what about a “just-in-time” refresh? Usually you don’t need the latest data for search features. So when you then call a specific item or reciepe, your app calls the API and refreshes the DB if the data is outdated.</p>","arenanet":false},{"pubDate":"2013-07-01T10:53:12.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Many-items-in-a-single-request/2326377","author":"ezd.6359","body":"\n<p>It works but with NEW items only. But if they change something like recipe components (fix exploits/bugs), change soulbind parameter etc, we need to compare additional info from item_details and similar API scripts.</p>","arenanet":false},{"pubDate":"2013-07-01T10:26:44.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Many-items-in-a-single-request/2326264","author":"smiley.1438","body":"\n<p>You just need to store the data on your side and compare the APIs item list with your local one, then request the missing items – you don’t need a thousand requests for that.</p>\n<p>I’m doing that in 2 steps – first step – update your local data (this is the lazy way of comparing whats missing)</p>\n<pre><code>$data = gw2_api_request('items.json');\nif(is_array($data) &amp;&amp; isset($data['items'])){\n\tforeach($data['items'] as $item){\n\t\tmysqli_query('INSERT IGNORE INTO `gw2_items` (`item_id`) VALUES ('.intval($item).') ');\n\t}\n}\n\n</code></pre>\n<p>second step – request the missing data:</p>\n<pre><code>$count = mysqli_query('SELECT COUNT(*) FROM `gw2_items` WHERE `name_de` = \\'\\' OR `name_en` = \\'\\' OR `name_es` = \\'\\' OR `name_fr` = \\'\\' ');\nif(intval($count[0]) &amp;gt; 0){\n\t$q = mysqli_query('SELECT `item_id` FROM `gw2_items` WHERE `name_de` = \\'\\' OR `name_en` = \\'\\' OR `name_es` = \\'\\' OR `name_fr` = \\'\\' ');\n\twhile($row = mysqli_fetch_assoc($q)){\n\t\t$data = gw2_api_request('item_details.json?item_id='.$row['item_id'].'&amp;lang=de');\n\t\tif(is_array($data) &amp;&amp; !isset($data['error'])){\n\t\t\t// yada yada yada...\n\t\t}\n\t}\n}\n\n</code></pre>\n<p>Since items don’t change that often, this ist still the best strategy. If you really need the latest data, you should rely on a direct request.</p>","arenanet":false},{"pubDate":"2013-07-01T10:17:59.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Many-items-in-a-single-request/2326223","author":"ezd.6359","body":"\n<p>I plan to verify my DB after every update (new gw2 build). And i don’t think generation XXXX requests every time is a good idea. I see two ways:</p>\n<p>1) <br>\n- Mark new/changed items somehow. Add version or timestamp to the “lister” API. So scripts will check for changes only.<br>\n- request ?id=1,2,3,4…</p>\n<p>2) <br>\n- Provide us with FULL list details APIs. We can download full lists, compare it with current DB and make changes if neccessary.</p>\n<p>I like the 2nd way. But 1st is ok too.</p>\n<p>Same with all APIs like recipes, events, guilds etc.</p>","arenanet":false},{"pubDate":"2013-07-01T02:46:48.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Many-items-in-a-single-request/2324533","author":"Healix.5819","body":"\n<p>When asked to do this for events, the response was to just request everything at once, since the server could handle it. I wish there was the option available though, since 1/2 of the 10 KB/s I use to track events is purely from headers.</p>\n<p>For item details though, there is no option, but these requests are something you should have to do only once. The reason why they probably don’t have a request everything option is because of the amount of items that has to be processed per request. If cached however, there’s really no reason not to.</p>","arenanet":false},{"pubDate":"2013-07-01T00:00:05.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Many-items-in-a-single-request/2323908","author":"ezd.6359","body":"\n<p>Something like it:<br>\n… item_details.json?item_id=ID1,ID2[,IDX]</p>\n<p>and receive something like it:<br>\n{ID1: { … }, ID2: { … }, ID3: { … }}</p>\n<p>Or 1 request = 1 item details only?</p>\n<p>If not, consider it as a suggestion.</p>","arenanet":false}]}