{"title":"Wrong WvW Objective Coordinates ?","pubDate":"2015-10-30T17:03:58.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Wrong-WvW-Objective-Coordinates","comments":[{"pubDate":"2015-10-30T23:52:55.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Wrong-WvW-Objective-Coordinates/5694632","author":"Side.3489","body":"\n<p>Not on topic !</p>\n<p>Marked this as a Q/A and it turned to be a discussion…. I don’t seem to be able to remove the Q/A format…. if someone with moderators rights could do this, i’d be grateful</p>","arenanet":false},{"pubDate":"2015-10-30T23:49:04.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Wrong-WvW-Objective-Coordinates/5694616","author":"Side.3489","body":"\n<p>Huuum, nope, don’t think that was what I looked for ^^’</p>\n<p>But….</p>\n<p>Got that one !</p>\n<p>It’ late and i stumbled a little on the map size….. Silly me.</p>\n<p>Thanks for the tip for the continent_rect though<img src=\"/include/images/smilies/smile.png\"></p>\n<p>For future reference :<br>\n<a href=\"https://github.com/sidewinder94/GWvW_Overlay/blob/cb024272cbe41b3ce703434209f78b158d1d34b5/ArenaNET/Objective.cs#L29\">https://github.com/sidewinder94/GWvW_Overlay/blob/cb024272cbe41b3ce703434209f78b158d1d34b5/ArenaNET/Objective.cs#L29</a></p>","arenanet":false},{"pubDate":"2015-10-30T23:15:50.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Wrong-WvW-Objective-Coordinates/5694495","author":"smiley.1438","body":"\n<p>I think, you’re pretty much looking for this: <a href=\"https://gist.github.com/codemasher/75d8e1a24b2363cabebf\">https://gist.github.com/codemasher/75d8e1a24b2363cabebf</a></p>","arenanet":false},{"pubDate":"2015-10-30T22:36:36.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Wrong-WvW-Objective-Coordinates/5694283","author":"Side.3489","body":"\n<p>Np, can understand that :p</p>\n<p>Ok so what i did in my first post is good, just change the map_rect with continent_rect ?</p>","arenanet":false},{"pubDate":"2015-10-30T21:42:19.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Wrong-WvW-Objective-Coordinates/5694021","author":"smiley.1438","body":"\n<p>Wait no. (it’s been a hard day…)</p>\n<p>The above answer is correct when you get the coordinates from ingame, e.g. the Mumble link or the /v1/event_details API. It translates the relative map coordinate system into the continent’s absolute.<br>\nThe solution to your problem is simpler: just don’t use the map_rect at all. continent_rect is what you need since the coordinates in the /v2/ APIs are already calculated to absolute.</p>","arenanet":false},{"pubDate":"2015-10-30T21:20:35.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Wrong-WvW-Objective-Coordinates/5693899","author":"Side.3489","body":"\n<p>Don’t worry about the JS version i’m working in C# here, the PHP was clear enough to replicate it on my end</p>\n<p>But….</p>\n<p>What does this code actually do ?</p>\n<p>Gives the objective coordinates in the map_rect ? <br>\nWhere is the origin point of the resulting coordinates ? (top-left ? center ?)</p>\n<p>Just to make sure it’s said : I’m not trying to place the objectives in a Continent map, but in a “Borderlands” map</p>\n<p>Just so I know how to handle that afterwards</p>\n<p>(Still trying to work things out on my end but in the event you’re faster to answer than me to find out…)</p>","arenanet":false},{"pubDate":"2015-10-30T18:58:57.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Wrong-WvW-Objective-Coordinates/5693103","author":"smiley.1438","body":"\n<p>See this thread: <a href=\"https://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates\">https://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates</a></p>\n<blockquote><div class=\"citey\"><cite title=\"Posted on July 04 2013 09:42PM\"><a href=\"/forum/community/api/Event-Details-API-location-coordinates/2350376\">zeeZ.5713:</a></cite></div><div class=\"quotey\"><p>I made a silly picture<img src=\"/include/images/smilies/colondee.png\"></p>\n<p>All events are within map_rect of their respective map.<br>\nAll maps are within continent_rect of their continent.</p>\n<p>To figure out where something is on the continent you need to know their place within map_rect on the map, then fit map_rect inside continent_rect on the continent.</p></div></blockquote>\n<p>So you have to do basically this:</p>\n<blockquote><div class=\"citey\"><cite title=\"Posted on June 22 2013 04:35PM\"><a href=\"/forum/community/api/Event-Details-API-location-coordinates/2262702\">zeeZ.5713:</a></cite></div><div class=\"quotey\"><p>I was using a numpy matrix, but even if I only built it once per map your pile of random characters is a lot faster.</p>\n<p>All condensed in one ugly block of code so I don’t have to look at it so much:</p>\n<pre><code>\ndef continent_coords(continent_rect, map_rect, point, game=False):\n    return (\n        (point[0]-map_rect[0][0])/(map_rect[1][0]-map_rect[0][0])*(continent_rect[1][0]-continent_rect[0][0])+continent_rect[0][0],\n        ((-point[1] if game else point[1])-map_rect[0][1])/(map_rect[1][1]-map_rect[0][1])*(continent_rect[1][1]-continent_rect[0][1])+continent_rect[0][1]\n    )</code></pre></div></blockquote>\n<p>PHP version here: <a href=\"https://github.com/codemasher/gw2-database/blob/master/classes/gw2api.class.php#L248\">https://github.com/codemasher/gw2-database/blob/master/classes/gw2api.class.php#L248</a><br>\nJS version: (can’t find it…)</p>","arenanet":false},{"pubDate":"2015-10-30T17:03:58.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Wrong-WvW-Objective-Coordinates/5692346","author":"Side.3489","body":"\n<p>Hi,</p>\n<p>Got a little trouble placing the objectives on a map.</p>\n<p>Should’ve been simple no ?</p>\n<p>The map_rect for the desert borderlands is reported to be (i.e. <a href=\"https://api.guildwars2.com/v2/maps/1099\">https://api.guildwars2.com/v2/maps/1099</a>)  :<br>\n</p><pre><code>\n[\n  [-36864,\n   -36864\n  ],\n  [36864,\n   36864\n  ]\n]\n</code></pre>This is roughly saying that the map is a square with 73728 side’s length.<br>\nAnd that the point (0,0) is the map’s center point.<p></p>\n<p>My problem here is that NONE of the wvw Objectives coordinate’s (i.e. <a href=\"https://api.guildwars2.com/v2/wvw/objectives/1099-99\">https://api.guildwars2.com/v2/wvw/objectives/1099-99</a>) have a negative part in their coordinates. Placing them all in the top-right corner of the map.</p>\n<p>Well that’s not a problem, we’ll assume that the map center point is at the top-left corner of the map (thus allowing placing the objectives all over the map using only positive numbers)</p>\n<p>New problem eatch component of the objectives coordinates are between 9000-15000</p>\n<p>That’s a little hard to play with…. Our map being 73728 units large….. All objectives are grouped tighly.</p>\n<p>So did I miss something (didn’t get the Objectives coordinates or the map size from the good place) ? Or is there something wrong with the API ?</p>\n<p>Thanks for reading<img src=\"/include/images/smilies/smile.png\"></p>","arenanet":false}]}