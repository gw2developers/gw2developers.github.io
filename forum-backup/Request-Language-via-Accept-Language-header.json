{"title":"Request Language via Accept-Language header","pubDate":"2015-05-29T23:00:05.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Request-Language-via-Accept-Language-header","comments":[{"pubDate":"2015-06-01T17:23:57.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Request-Language-via-Accept-Language-header/5114605","author":"Lawton Campbell.8517","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on May 30 2015 01:12PM\"><a href=\"/forum/community/api/Request-Language-via-Accept-Language-header/5110198\">StevenL.3761:</a></cite></div><div class=\"quotey\"><p>Still, there’s an easy API side solution: use the ‘lang’ parameter if it is set; otherwise, use the ‘Accept-Language’ header.</p></div></blockquote>\n<p>Yeah, that’s the implementation we’d use.</p>\n<p>This would be nice to have, but I don’t know when I’ll get around to it.</p>","arenanet":true},{"pubDate":"2015-05-30T13:12:17.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Request-Language-via-Accept-Language-header/5110198","author":"StevenL.3761","body":"\n<p>I didn’t consider that you can’t change the browser’s Accept-Language header in javascript. That’s kinda lame.</p>\n<p>Still, there’s an easy API side solution: use the ‘lang’ parameter if it is set; otherwise, use the ‘Accept-Language’ header.</p>","arenanet":false},{"pubDate":"2015-05-30T10:35:21.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Request-Language-via-Accept-Language-header/5110015","author":"darthmaim.6017","body":"\n<p>I don’t really care for a ‘Accept-Language’ header, the lang parameter can do everything we really need and is way easier to work with (Just think about all the ajax calls that will break because the developer is not sending a the header, but the browser is using the system language, and the application expects the response to be in english).</p>\n<p>For now validating the language against [de,en,es,fr] before sending is easy enough, or if you’d want you can check the ‘Content-Language’ header.</p>","arenanet":false},{"pubDate":"2015-05-30T10:07:44.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Request-Language-via-Accept-Language-header/5109988","author":"smiley.1438","body":"\n<p>Since API support for korean and chinese hasn’t been officially announced, we can safely assume there are only 4 languages. Also, it wasn’t a “maybe 6” as in “we don’t know” but as in “once it’s been announced”.</p>\n<p>Also, the Accept-Language header can be a pain in the kitteh when working in web applications (i assume you’re about to write a desktop application). <br>\nFor example: this forum heavily relies on the Accept-Language header and redirects you to “your” language all the time (german in my case) – even when using the language-prefix “forum-en”. So i have to change the default language in my browser to english to prevent redirects. So much for Accept-Language.</p>","arenanet":false},{"pubDate":"2015-05-30T09:05:15.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Request-Language-via-Accept-Language-header/5109929","author":"StevenL.3761","body":"\n<p>An example (please beware the &amp;amp ; forum bug):</p>\n<p>Right now, this request crashes with an error.<br>\n<a href=\"https://api.guildwars2.com/v2/colors?page=0&lang=zh\">https://api.guildwars2.com/v2/colors?page=0&amp;lang=zh</a></p>\n<p>GET /v2/colors?page=0&amp;lang=zh HTTP/1.1</p>\n<p>—<br>\nTo get the fallback value, you have to do another HTTP GET<br>\n<a href=\"https://api.guildwars2.com/v2/colors?page=0&lang=en\">https://api.guildwars2.com/v2/colors?page=0&amp;lang=en</a></p>\n<p>GET /v2/colors?page=0&amp;lang=en HTTP/1.1</p>\n<p>—<br>\nWith the header implementation, you can do all this in a single request.</p>\n<p>GET /v2/colors?page=0 HTTP/1.1<br>\nAccept-Language: zh, en</p>","arenanet":false},{"pubDate":"2015-05-30T08:56:30.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Request-Language-via-Accept-Language-header/5109918","author":"StevenL.3761","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on May 29 2015 11:34PM\"><a href=\"/forum/community/api/Request-Language-via-Accept-Language-header/5109344\">smiley.1438:</a></cite></div><div class=\"quotey\"><p>Why would you want a fallback value? You know that the API supports 4 (or maybe 6 with zh &amp; ko) languages which you can check easily in your application and then send the correct <em>lang</em> parameter.</p></div></blockquote>\n<p>I think you just accidentally proved why fallback values are a good idea. Does this endpoint support 4 or maybe 6 languages? Nobody knows until you query it. That’s why it would be helpful if we could specify all languages that we are willing to accept in a single request.</p>","arenanet":false},{"pubDate":"2015-05-30T07:51:59.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Request-Language-via-Accept-Language-header/5109852","author":"StevenL.3761","body":"\n<p>Please note that RFC 2616 is obsoleted. Use RFC 7230 instead.</p>\n<p>I vote for adding support for the ‘Accept-Language’ header, but keeping the ‘lang’ parameter around for legacy reasons.</p>","arenanet":false},{"pubDate":"2015-05-29T23:34:43.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Request-Language-via-Accept-Language-header/5109344","author":"smiley.1438","body":"\n<p>a) Why would you want a fallback value? You know that the API supports 4 (or maybe 6 with zh &amp; ko) languages which you can check easily in your application and then send the correct <em>lang</em> parameter.<br>\nb) Who cares on a clean URL which only the backend sees? From a php point of view it’s the easiest thing to throw an array of parameters into <a href=\"http://php.net/manual/de/function.http-build-query.php\">http_build_query()</a> - so why would i want to go the extra mile to send another header? I mean, i can even send the <em>access_token</em> parameter and save the <em>Authorization Bearer</em> header.</p>","arenanet":false},{"pubDate":"2015-05-29T23:00:05.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Request-Language-via-Accept-Language-header/5109304","author":"Ruhrpottpatriot.7293","body":"\n<p>The title pretty much says it all. The HTTP 1.1 Protocol (See <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html\">Section 14.4</a> for more details) defines an <em>Accept-Language</em> header field which can be used to request content in a specific language.</p>\n<p>This is imo the far better choice than url parameters, since it <br>\na) allows more than one value, thus allowing fallback values<br>\nb) keeps the url clean(er)</p>","arenanet":false}]}