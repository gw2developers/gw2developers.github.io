{"title":"How can I cross reference two API's? PHP","pubDate":"2016-07-13T05:12:34.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/How-can-I-cross-reference-two-API-s-PHP","comments":[{"pubDate":"2016-07-14T16:13:36.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/How-can-I-cross-reference-two-API-s-PHP/6244018","author":"Anhim.3156","body":"\n<p>You can find all the materials in /v2/items, such as <a href=\"https://api.guildwars2.com/v2/items/71473\">elder wood log</a> and any other items, For example the first few entries would be 18 Slot Thick Leather Pack, carrots, potatoes.</p>\n<p>Is this not what you would be looking for? You would get the item id from the treasury API, then launch a new query with this item id into the /v2/items.</p>\n<p>Edit:</p>\n<p>So if I take your code:</p>\n<div class=\"spoiler_container\"><div class=\"spoileroncontainer\"><button type=\"button\" class=\"button spoileron\" title=\"Click to show the spoiler.\">Show Spoiler</button></div><div class=\"spoiler\"><div class=\"spoileroffcontainer\"><button type=\"button\" class=\"button spoileroff\" title=\"Click to hide the spoiler.\">hide spoiler</button><br></div><div class=\"spoilertext\"><pre><code>\n                           $treasury = file_get_contents('https://api.guildwars2.com/v2/guild/B95A3B40-A764-4648-8EE6-39549E922A99/treasury?access_token=358AC6CB-0596-D64F-88D5-5CFA9AA27AAA273F3C6A-BC9E-47EE-AA28-63565C3EFEEE');\n                            $treasury = json_decode($treasury);\n                            \n                            foreach($treasury as $key =&amp;gt; $treasury) {\n                                $item_id = $treasury[$key][\"id\"];\n                                $myItemUrl = file_get_contents(‘https://api.guildwars2.com/v2/items/$item_id’);\n                                $myItemUrl = json_decode($myItemUrl);\n                                $itemName = $myItemUrl[“name”];\n                                echo '&amp;lt;tr&amp;gt;';\n                                echo '&amp;lt;td&amp;gt;'.$itemName.'&amp;lt;/td&amp;gt;';\n                                echo '&amp;lt;td&amp;gt;'.$treasury -&amp;gt; count.'&amp;lt;/td&amp;gt;';\n                                echo '&amp;lt;td&amp;gt;';\n                                    foreach($treasury -&amp;gt; needed_by as $key =&amp;gt; $treasury) {\n                                        echo $treasury -&amp;gt; upgrade_id.' ('.$treasury -&amp;gt; count.')&amp;lt;br /&amp;gt;';\n                                    }\n                                echo '&amp;lt;/td&amp;gt;';\n                                \n                            }\n                            echo '&amp;lt;/table&amp;gt;';\n</code></pre></div></div></div><p>My changes probably have some buggy behavior since it’s just a quick sketch, and this will be very slow since you are calling the API so many times. I’d recommend getting an array with all the IDs and then simply making one call to the API with all the item IDs.</p>","arenanet":false},{"pubDate":"2016-07-14T05:55:31.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/How-can-I-cross-reference-two-API-s-PHP/6243494","author":"pruocco.5368","body":"\n<p>Thanks for the reply Anhim, but I don’t think that’s what I’m looking for. I have the data for our guild treasury shown in a table, but I am trying to show the names of the treasury items in the results. The guild treasury API does not have the items names, just their ID. <a href=\"https://wiki.guildwars2.com/wiki/API:2/guild/:id/treasury\">https://wiki.guildwars2.com/wiki/API:2/guild/:id/treasury</a></p>","arenanet":false},{"pubDate":"2016-07-13T15:48:04.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/How-can-I-cross-reference-two-API-s-PHP/6242554","author":"Anhim.3156","body":"\n<p>All of the items are stored in ‘<a href=\"https://api.guildwars2.com/v2/items\">https://api.guildwars2.com/v2/items</a>’. You can check <a href=\"https://wiki.guildwars2.com/wiki/API:2/items\">here</a></p>\n<p>So if I were you I would do something to the effect of.</p>\n<p>$myItemUrl = file_get_contents(‘<a href=\"https://api.guildwars2.com/v2/items/12345\">https://api.guildwars2.com/v2/items/12345</a>’);//12345 is the id of the item you want to look at<br>\n$myItemUrl = json_decode($myItemUrl);</p>\n<p>$itemName = $myItemUrl[“name”];</p>\n<p>This way will get you the items one at a time (so multiple calls needed). Or you could use multiple Ids at once with “$myItemUrl = file_get_contents(‘<a href=\"https://api.guildwars2.com/v2/items/?ids=1,2,3\">https://api.guildwars2.com/v2/items/?ids=1,2,3</a>’)” In which case you get an array returned, so need to adjust the code accordingly.</p>\n<p>p.s: sorry for poor formatting, never been good with forum methods.</p>","arenanet":false},{"pubDate":"2016-07-13T05:12:35.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/How-can-I-cross-reference-two-API-s-PHP/6241990","author":"pruocco.5368","body":"\n<p>I am new to using the GW2 API (or any API for that matter) and I’m starting to get the hang of it. I was able to teach myself how to get basic information using the API and PHP to decode the .json files. I’ve created a table showing our guild’s treasury which looks like the following:</p>\n<pre><code>\nItem       |   Quantity   |   Upgrade (Quantity Needed)\n-----------------------------------------------------------------\n12134     |   100             |   641 (1000)\n12135     |   500             |   365 (750)\n</code></pre>\n<p>.  <br>\nIn it’s simplest form, it only shows the ID numbers for the items and upgrades. This is where I am wondering how to cross reference this data with the data from the items API to display the item names.</p>\n<p>Does anybody have any instruction on how to do this?</p>\n<div class=\"spoiler_container\"><div class=\"spoileroncontainer\"><button type=\"button\" class=\"button spoileron\" title=\"Click to show the spoiler.\">My PHP</button></div><div class=\"spoiler\"><div class=\"spoileroffcontainer\"><button type=\"button\" class=\"button spoileroff\" title=\"Click to hide the spoiler.\">hide spoiler</button><br></div><div class=\"spoilertext\"><pre><code>                            $treasury = file_get_contents('https://api.guildwars2.com/v2/guild/B95A3B40-A764-4648-8EE6-39549E922A99/treasury?access_token=358AC6CB-0596-D64F-88D5-5CFA9AA27AAA273F3C6A-BC9E-47EE-AA28-63565C3EFEEE');\n                            $treasury = json_decode($treasury);\n                        \n                            foreach($treasury as $key =&gt; $treasury) {\n                                \n                                echo '&lt;tr&gt;';\n                                echo '&lt;td&gt;'.$treasury -&gt; item_id.'&lt;/td&gt;';\n                                echo '&lt;td&gt;'.$treasury -&gt; count.'&lt;/td&gt;';\n                                echo '&lt;td&gt;';\n                                    foreach($treasury -&gt; needed_by as $key =&gt; $treasury) {\n                                        echo $treasury -&gt; upgrade_id.' ('.$treasury -&gt; count.')&lt;br /&gt;';\n                                    }\n                                echo '&lt;/td&gt;';\n                                \n                            }\n                            echo '&lt;/table&gt;';</code></pre></div></div></div>","arenanet":false}]}