{"title":"Need help accessing api using http header","pubDate":"2016-07-26T18:12:32.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Need-help-accessing-api-using-http-header","comments":[{"pubDate":"2016-07-26T21:29:08.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Need-help-accessing-api-using-http-header/6257751","author":"Apachai.9475","body":"\n<p>Thank you, I was running out of ideas to make this work.</p>","arenanet":false},{"pubDate":"2016-07-26T19:50:58.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Need-help-accessing-api-using-http-header/6257584","author":"Lawton Campbell.8517","body":"\n<p>It’s a CORS issue — setting an Authorization header (or User-Agent for that matter) makes the API request a <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS#Simple_requests\">non-simple request</a>. This means the browser attempts to preflight it with an OPTIONS request, which our backend doesn’t support, so the request fails. So for code running in the browser, you’re stuck with the access_token query parameter.</p>","arenanet":true},{"pubDate":"2016-07-26T18:12:33.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Need-help-accessing-api-using-http-header/6257103","author":"Apachai.9475","body":"\n<p>I am trying to access the characters  api using angularJS and passing my api key inside the http header, but the server returns an error code -1 without a text.</p>\n<p>If I try to use the api by  passing the token in the url I get the response I need, but I’d rather try to use it through headers.</p>\n<p>My code is this</p>\n<p>charApp.factory(‘CharactersHeaders’, function($resource) {<br>\n\treturn $resource(“<a href=\"https://api.guildwars2.com/v2/characters?page=0\">https://api.guildwars2.com/v2/characters?page=0</a>”, null , <br>\n\t\t{ <br>\n\t\t “query”: {method: “GET”,headers: { “Authorization”: “Bearer &lt;&lt;API KEY&gt;&gt;”}}<br>\n\t        }\t<br>\n\t);<br>\n  });</p>\n<p>I made a bare bones rails api to test my javascript and I can see that the header is present on the request.</p>\n<p>Not sure what I’m doing wrong.<br>\nI had made a java web app to get the data, and was able to connect and retrieve data using headers, but I can’t get it to work using angularJs</p>\n<p>Can anyone tell me the correct way?</p>","arenanet":false}]}