{"title":"Guide to the Black Lion Trading Co API","pubDate":"2013-05-22T01:30:30.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API","comments":[{"pubDate":"2015-06-29T17:34:31.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/5229418","author":"Pat Cavit.9234","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on June 29 2015 06:01AM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/5227389\">Len.1879:</a></cite></div><div class=\"quotey\"><p>So, is direct interaction with the TP still allowed though? I’d like to manage my transactions and especially add new ones while in university, where I can’t run GW2 on my netbook.</p></div></blockquote>\n<p>Selling has always required a game client. Buying now requires a game client as well. Neither of those are likely to be exposed via the API any time soon.</p>\n<p>Those restrictions could be worked around with a really convincing fake client, but I’m pretty sure that’s against our TOS.</p>","arenanet":true},{"pubDate":"2015-06-29T06:01:37.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/5227389","author":"Len.1879","body":"\n<p>So, is direct interaction with the TP still allowed though? I’d like to manage my transactions and especially add new ones while in university, where I can’t run GW2 on my netbook.</p>","arenanet":false},{"pubDate":"2014-12-08T19:15:58.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4612445","author":"Pat Cavit.9234","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on December 08 2014 05:51PM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4612258\">StevenL.3761:</a></cite></div><div class=\"quotey\"><p>Does that imply that we should get faster loading times now than back when the updated TP was launched?</p></div></blockquote>\n<p>Yeah, once the UI has loaded it’s noticeably faster searching/switching between sections/etc. We can avoid a lot of the TCP overhead of HTTP by re-using the existing game connection.</p>","arenanet":true},{"pubDate":"2014-12-08T17:51:29.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4612258","author":"StevenL.3761","body":"\n<p>Does that imply that we should get faster loading times now than back when the updated TP was launched?</p>","arenanet":false},{"pubDate":"2014-12-08T17:24:23.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4612198","author":"Pat Cavit.9234","body":"\n<p>Sure, I see how what I said is confusing. I’ll elaborate.</p>\n<p>As part of the rewrite we also set it up so that the Commerce apps could go over the existing game connection instead of making HTTP requests. It’s more efficient (there’s no per-host limit on the number of requests we can make) and avoids some of the overhead. Until we could do some more testing of that on live we had a simple HTTP proxy for requests.</p>\n<p>Once we cut over completely to the game connection the HTTP proxy was automatically disabled. It’s been deleted entirely in dev so it will start 404ing before too long.</p>","arenanet":true},{"pubDate":"2014-12-07T03:09:54.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4609280","author":"Risingashes.8694","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on December 06 2014 03:11PM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4608234\">darthmaim.6017:</a></cite></div><div class=\"quotey\"><blockquote><div class=\"citey\"><cite title=\"Posted on December 06 2014 02:43PM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4608206\">Risingashes.8694:</a></cite></div><div class=\"quotey\"><p>When was the TP completely rewritten? Because they only stopped working on 2nd Dec.</p></div></blockquote>\n<p><a href=\"https://www.guildwars2.com/en/news/introducing-the-new-trading-post/\">https://www.guildwars2.com/en/news/introducing-the-new-trading-post/</a></p></div></blockquote>\n<p>Yes obviously the TP was rewritten at that point, yet the web endpoints were disabled this patch. Meaning the causal statement: The Trading Post was rewritten and as a result the web endpoints were broken- which @Pat Cavit seems to be suggesting doesn’t seem true.</p>\n<p>If there were multiple rewritings that would make sense.</p>","arenanet":false},{"pubDate":"2014-12-06T15:11:12.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4608234","author":"darthmaim.6017","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on December 06 2014 02:43PM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4608206\">Risingashes.8694:</a></cite></div><div class=\"quotey\"><p>When was the TP completely rewritten? Because they only stopped working on 2nd Dec.</p></div></blockquote>\n<p><a href=\"https://www.guildwars2.com/en/news/introducing-the-new-trading-post/\">https://www.guildwars2.com/en/news/introducing-the-new-trading-post/</a></p>","arenanet":false},{"pubDate":"2014-12-06T15:09:36.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4608232","author":"StevenL.3761","body":"\n<p>Assuming that the original ncplatform APIs were reverse-engineered using web debugging proxies, what is stopping anybody from doing the same for the updated trading post?</p>","arenanet":false},{"pubDate":"2014-12-06T14:43:56.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4608206","author":"Risingashes.8694","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on December 05 2014 06:02PM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4606371\">Pat Cavit.9234:</a></cite></div><div class=\"quotey\"><blockquote><div class=\"citey\"><cite title=\"Posted on December 04 2014 11:54PM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4604562\">ameerpostalman.8975:</a></cite></div><div class=\"quotey\"><p>Looks like this doesnt work anymore?</p></div></blockquote>\n<p>TP was completely rewritten and all these endpoints are gone, yes.</p></div></blockquote>\n<p>When was the TP completely rewritten? Because they only stopped working on 2nd Dec.</p>","arenanet":false},{"pubDate":"2014-12-05T18:02:27.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4606371","author":"Pat Cavit.9234","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on December 04 2014 11:54PM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4604562\">ameerpostalman.8975:</a></cite></div><div class=\"quotey\"><p>Looks like this doesnt work anymore?</p></div></blockquote>\n<p>TP was completely rewritten and all these endpoints are gone, yes.</p>\n<blockquote><div class=\"citey\"><cite title=\"Posted on November 06 2014 11:28PM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4543948\">Pat Cavit.9234:</a></cite></div><div class=\"quotey\"><p>You should really use the <a href=\"http://wiki.guildwars2.com/wiki/API:2\">Official API</a> though, we provide zero guarantees that we won’t break everything out from underneath you if you’re going against the TP directly.</p></div></blockquote>","arenanet":true},{"pubDate":"2014-12-04T23:54:55.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4604562","author":"ameerpostalman.8975","body":"\n<p>Looks like this doesnt work anymore?</p>","arenanet":false},{"pubDate":"2014-11-06T23:28:23.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4543948","author":"Pat Cavit.9234","body":"\n<p><a href=\"https://tradingpost-dfw-live.ncplatform.net\">https://tradingpost-dfw-live.ncplatform.net</a><br>\n<a href=\"https://tradingpost-fra-live.ncplatform.net\">https://tradingpost-fra-live.ncplatform.net</a></p>\n<p>You should really use the <a href=\"http://wiki.guildwars2.com/wiki/API:2\">Official API</a> though, we provide zero guarantees that we won’t break everything out from underneath you if you’re going against the TP directly.</p>","arenanet":true},{"pubDate":"2014-11-06T22:34:41.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4543842","author":"FlacMatic.4258","body":"\n<p>they changed something in their tradingpost link. can’t get it work anymore. and i’m too lazy right now to check for a new link</p>","arenanet":false},{"pubDate":"2014-06-30T02:01:34.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4157708","author":"Fossilized Amber.1352","body":"\n<p>Of course! How did I not see that, thank you for your eagle-eyes StevenL.</p>\n<p>I’ve got an updated pastebin here, it’s almost done. Another question I’m sending out, I am trying to save the HttpResponseMessage in a private variable in my class. The console doesn’t change output so this variable isn’t being correctly set. Any clue why that is?</p>\n<p><a href=\"http://pastebin.com/Hzubkr5h\">http://pastebin.com/Hzubkr5h</a></p>\n<p>*You can copy/paste the code as is (filling in the session id from fiddler) if you’d like to try it out yourself</p>","arenanet":false},{"pubDate":"2014-06-29T09:40:01.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4156009","author":"StevenL.3761","body":"\n<p>Why are you setting UseCookies to false? Also, did you realize that you are never actually injecting your instance of HttpClientHandler into the HttpClient?</p>\n<p><strong>Line 35</strong></p>\n<p>UseCookies = <strong>true</strong></p>\n<p><strong>Line 38</strong></p>\n<p>using (httpClient = new HttpClient(<strong>httpClientHandler</strong>) { BaseAddress = baseAddress })</p>","arenanet":false},{"pubDate":"2014-06-29T01:29:31.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4155507","author":"Fossilized Amber.1352","body":"\n<p>Ok, I’ve made progress. Dryalkiel can you look at this?</p>\n<p><a href=\"http://pastebin.com/ybP0zqer\">http://pastebin.com/ybP0zqer</a></p>\n<p>I’ve used my session id from fiddler and I’m getting an “unauthorized” message back.</p>","arenanet":false},{"pubDate":"2014-06-28T20:09:18.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4154998","author":"Rand.3186","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on June 28 2014 07:16PM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4154904\">DarkSpirit.7046:</a></cite></div><div class=\"quotey\"><p>Just return an empty string now for character guid.  You can still use tradingpost-live.</p></div></blockquote>\n<p>Yeah, that’s how I got around to fixing it.   Wasn’t a problem once I realized what was changed.  I only posted it so that anyone else bumping into the issue would know why.</p>\n<p>One other thing I noticed around a month or so ago was that you more or less have to use listings.json now in order to be sure that you’re getting the current highest buy order / lowest sell price of an item.</p>\n<p>Example: <a href=\"http://www.gw2spidy.com/item/20853\">http://www.gw2spidy.com/item/20853</a> — Shows 99g.  Cheapest is actually 9g. (This is not a fast moving item). This might only be an issue with relatively new items on the trading post?  I haven’t quite figured out what the deal is with it.  I think this might have been an intentional change to speed up the Trading Post; there was a patch a month or so ago that made the trading post much more responsive.</p>","arenanet":false},{"pubDate":"2014-06-28T19:16:52.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4154904","author":"DarkSpirit.7046","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on June 28 2014 03:23PM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4154536\">Dryalkiel.1385:</a></cite></div><div class=\"quotey\"><p>That’s okay, the web sessionId is enough for me.  My application just looks up prices.  It doesn’t buy or sell so I don’t need the ingame key.  Search.json does return a buy and sell price so I won’t need listings.json anymore.  Thanks for the help though<img src=\"/include/images/smilies/smile.png\"></p></div></blockquote>\n<p>That why I said it depends on what you need; the type of application that you want to write.</p>\n<p>One thing to watch out for though, even if you are looking at the buy/sell price you have to be aware that there is a caching bug on the TP especially on fast moving items where the buy/sell price obtained from the TP (through search or items.json) is an outdated cached version.  Listings.json does not have this problem and buy/sell price without quantity is limited for most usage.  You only need 1 crazy buyer or seller to give you the wrong impression on the demand/supply of that item.</p>\n<blockquote><div class=\"citey\"><cite title=\"Posted on June 28 2014 07:15PM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4154899\">Rand.3186:</a></cite></div><div class=\"quotey\"><p>It looks like they dropped the use of the “Character GUID.”  When I run fiddler I no longer see the Character GUID being passed along with the session ID in the cookies section.</p>\n<p>I looked into this because a program I made a few months ago was throwing an authorization error at me when I started it up today.  It’s been a few weeks since I used it last.</p>\n<p>The other change I noticed is that:  tradingpost-live.ncplatform.net has been changed to: tradingpost-dfw-live.ncplatform.net.</p></div></blockquote>\n<p>Just return an empty string now for character guid.  You can still use tradingpost-live.</p>","arenanet":false},{"pubDate":"2014-06-28T19:15:43.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4154899","author":"Rand.3186","body":"\n<p>It looks like they dropped the use of the “Character GUID.”  When I run fiddler I no longer see the Character GUID being passed along with the session ID in the cookies section.</p>\n<p>I looked into this because a program I made a few months ago was throwing an authorization error at me when I started it up today.  It’s been a few weeks since I used it last.</p>\n<p>The other change I noticed is that:  tradingpost-live.ncplatform.net has been changed to: tradingpost-dfw-live.ncplatform.net.</p>","arenanet":false},{"pubDate":"2014-06-28T15:23:29.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4154536","author":"Dryalkiel.1385","body":"\n<p>That’s okay, the web sessionId is enough for me.  My application just looks up prices.  It doesn’t buy or sell so I don’t need the ingame key.  Search.json does return a buy and sell price so I won’t need listings.json anymore.  Thanks for the help though<img src=\"/include/images/smilies/smile.png\"></p>\n<p>@Fossilized Amber : Well, if you don’t have enough experience in this, isn’t this too big a project for you?<img src=\"/include/images/smilies/sad.png\">  At any rates, you might want to read up on a few things before diving in.</p>\n<p>Here’s some useful links : <br>\n<a href=\"http://www.w3schools.com/tags/ref_httpmethods.asp\">http://www.w3schools.com/tags/ref_httpmethods.asp</a><br>\n<a href=\"http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx\">http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx</a><br>\n<a href=\"http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.aspx\">http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.aspx</a></p>\n<p>And no, not automate from FIDDLER.  Fiddler is just a tool to lookup the info sent and obtained from your browser.  You’ll want to automate the sessionId part from within your application by loging in with some HttpWebRequests.</p>\n<p>You’ll want to lookup GW2Spidy too.  It’s in PHP but the logic is basically the same.</p>","arenanet":false},{"pubDate":"2014-06-28T04:13:48.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4153873","author":"DarkSpirit.7046","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on June 28 2014 04:07AM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4153866\">Fossilized Amber.1352:</a></cite></div><div class=\"quotey\"><p>Email, password and session id. Besides finding a way to automate getting a session id from fiddler, if I am understanding this more, I need to have my email, password and session id on hand?</p></div></blockquote>\n<p>Once you have your session id, you don’t need your email and password anymore.</p>\n<p>If you plan to get the less useful session id from the website, then you need to login using your email and password.</p>\n<p>If you plan to get the more useful session id from the game client, you don’t need those.  But you would probably need to write a program to access that session id.</p>","arenanet":false},{"pubDate":"2014-06-28T04:07:23.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4153866","author":"Fossilized Amber.1352","body":"\n<p>Email, password and session id. Besides finding a way to automate getting a session id from fiddler, if I am understanding this more, I need to have my email, password and session id on hand?</p>\n<p>While I hate sounding like a broken record, Dryalkiel, can you explain what you mean by Response.Headers[“set-cookie”]? I don’t have enough experience to know what classes to use to do this. I was looking around at an HttpResponse class (something like that) in order to POST my information to the server (and bind this all to my user?). Should I be using a GET?</p>\n<p>I understand this conceptually but not how to do it in code.</p>","arenanet":false},{"pubDate":"2014-06-28T03:36:49.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4153835","author":"DarkSpirit.7046","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on June 27 2014 11:15PM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4153555\">Dryalkiel.1385:</a></cite></div><div class=\"quotey\"><p>Yay!  Finally repaired it!</p>\n<p>Basically, when you access the login page BEFORE login in, you get a session id in the cookies.  You need to login with your email, password AND sessionId.  this seems to “bind” the sessionid to your user.  You also need to set the path and domain for your cookie -&gt; new Cookie(“s”, _SessionId, “/”, “guildwars2.com”);</p>\n<p>@Fossilized Amber :  You don’t want to use the sessionId from fiddler since everytime you login, you get a new sessionId.  You’ll want to automate the “GetSessionKey” part of your application.  You also don’t need to set the time the cookie expires.  The response’s cookiecontainer will probably not return a Cookie object but you can retrieve it from Response.Headers[“Set-Cookie”].</p></div></blockquote>\n<p>Like I have said, there are 2 levels of session ids.  The one that you get from the website is the less useful form of session id because it would not allow you to buy items from the TP or see your own transactions.  You may not even be able to use that to see the listings.json of each item.</p>\n<p>The session id from the client would allow you to do all that and you can see that session id through fiddler when you open the TP dialog in the game.</p>\n<p>They are BOTH set in the cookie of your requests.  The session id usually remains valid for a long while.</p>","arenanet":false},{"pubDate":"2014-06-27T23:15:22.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4153555","author":"Dryalkiel.1385","body":"\n<p>Yay!  Finally repaired it!</p>\n<p>Basically, when you access the login page BEFORE login in, you get a session id in the cookies.  You need to login with your email, password AND sessionId.  this seems to “bind” the sessionid to your user.  You also need to set the path and domain for your cookie → new Cookie(“s”, _SessionId, “/”, “guildwars2.com”);</p>\n<p>@Fossilized Amber :  You don’t want to use the sessionId from fiddler since everytime you login, you get a new sessionId.  You’ll want to automate the “GetSessionKey” part of your application.  You also don’t need to set the time the cookie expires.  The response’s cookiecontainer will probably not return a Cookie object but you can retrieve it from Response.Headers[“Set-Cookie”].</p>","arenanet":false},{"pubDate":"2014-06-27T22:13:42.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4153456","author":"Fossilized Amber.1352","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on June 23 2014 09:12AM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4140552\">StevenL.3761:</a></cite></div><div class=\"quotey\"><p>Your JS script calls the API controller on your own server: <a href=\"http://yourserver/tradingpost/listings\">http://yourserver/tradingpost/listings</a>. This when your C# code takes over. Your API controller first ensures that your server has a valid session, then gets the requested data from the TP service. Returning the data to your script can be as simple as calling ‘Response.Write(json)’. This is when your JS script takes over again. It’s not particularly hard, and I think you’re overthinking this.</p>\n<p>tl;dr: your API controller acts as a proxy that hides the complexity of maintaining a session</p></div></blockquote>\n<p>Yes I might be, can I ask you again. Can you walk me through how to get “logged in” to the TP and then request some JSON data?</p>\n<p>I have a controller action (MVC – asp.net) that has a cookie set (gotten from fiddler). What I don’t know how to do in asp.net, I don’t know if you can help me, is get my cookie from the server and start making requests so I can get json data. This is what I have so far:</p>\n<p>public ActionResult <acronym title=\")<br />\n        {<br />\n            //HttpCookie myCookie = new HttpCookie(&quot;s&quot;, &quot;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX&quot;\">GW2</acronym>;<br>\n            //myCookie.Expires = DateTime.Now.AddDays(1d);<br>\n            //Response.Cookies.Add(myCookie);</p>\n<p>Response.AddHeader(“s”, “XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX”);<br>\n            Response.Redirect(“<a href=\"https://tradingpost-live.ncplatform.net/\">https://tradingpost-live.ncplatform.net/</a>”);</p>\n<p>return View();<br>\n        }</p>\n<p>*Edit, I just don’t know how to do this, I haven’t done this before.</p>","arenanet":false},{"pubDate":"2014-06-27T21:29:21.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4153353","author":"Dryalkiel.1385","body":"\n<p>They can’t match since everytime you start a new session, you get a new one.  I’ll mess around with it some more and if I find a solution I’ll post here.</p>","arenanet":false},{"pubDate":"2014-06-27T03:03:56.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4151504","author":"DarkSpirit.7046","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on June 26 2014 11:18PM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4151237\">Dryalkiel.1385:</a></cite></div><div class=\"quotey\"><p>The thing is, I AM able to get the sessionId from my application but when I use it to lookup search.json, it get a 401 error.</p>\n<p>If I login with a browser and get the session Id from the cookie and skip the whole “GetSessionKey” part of my app, it works.</p>\n<p>It’s like my session key expires as soon as I get it or something<img src=\"/include/images/smilies/sad.png\"></p></div></blockquote>\n<p>You may have extracted the session key wrongly.  Make sure the session key you got from the app. exactly matches the one showed in fiddler.</p>","arenanet":false},{"pubDate":"2014-06-26T23:18:40.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4151237","author":"Dryalkiel.1385","body":"\n<p>The thing is, I AM able to get the sessionId from my application but when I use it to lookup search.json, it get a 401 error.</p>\n<p>If I login with a browser and get the session Id from the cookie and skip the whole “GetSessionKey” part of my app, it works.</p>\n<p>It’s like my session key expires as soon as I get it or something<img src=\"/include/images/smilies/sad.png\"></p>","arenanet":false},{"pubDate":"2014-06-26T23:10:44.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4151222","author":"Dryalkiel.1385","body":"\n<p>Thanks… I tried this and unfortunately, the app cannot find my session key<img src=\"/include/images/smilies/sad.png\">  It just gives “squares” and some \\0</p>","arenanet":false},{"pubDate":"2014-06-25T03:00:47.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4145180","author":"DarkSpirit.7046","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on June 25 2014 01:29AM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4145049\">Dryalkiel.1385:</a></cite></div><div class=\"quotey\"><p>I’m getting the problems with listings.json as well.  My Service had been running for months with no problems.  Now listings.json doesn’t seem to work anymore.  I tried it in my browser and it still throws an Access Denied response.  search.json still works though.</p>\n<p>Anyone aware of this issue?</p></div></blockquote>\n<p>I think they made a change to listing.json to also require your game client session key.  You can’t use the session key that you get from logging in to their web site.</p>\n<p>As for an example with C# source code, you can look here:</p>\n<p><a href=\"http://notifier.zicore.de/\">http://notifier.zicore.de/</a></p>\n<p>Note:  I am not Zicore and that is not my code.  So, use it at your own risk.</p>","arenanet":false},{"pubDate":"2014-06-25T01:29:32.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4145049","author":"Dryalkiel.1385","body":"\n<p>I’m getting the problems with listings.json as well.  My Service had been running for months with no problems.  Now listings.json doesn’t seem to work anymore.  I tried it in my browser and it still throws an Access Denied response.  search.json still works though.</p>\n<p>Anyone aware of this issue?</p>","arenanet":false},{"pubDate":"2014-06-23T09:12:53.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4140552","author":"StevenL.3761","body":"\n<p>Your JS script calls the API controller on your own server: <a href=\"http://yourserver/tradingpost/listings\">http://yourserver/tradingpost/listings</a>. This when your C# code takes over. Your API controller first ensures that your server has a valid session, then gets the requested data from the TP service. Returning the data to your script can be as simple as calling ‘Response.Write(json)’. This is when your JS script takes over again. It’s not particularly hard, and I think you’re overthinking this.</p>\n<p>tl;dr: your API controller acts as a proxy that hides the complexity of maintaining a session</p>","arenanet":false},{"pubDate":"2014-06-23T03:45:55.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4140186","author":"Fossilized Amber.1352","body":"\n<p>Yes, thank you for clarifying what I wanted to say. How does an API controller work when talking to the TP? I can login but I am stuck on how to get my GET requests from the TP to my code. I am loading up the TP in an iframe and heard you can send messages to get around cross origin problems. Currently I can access the TP, change the URL and get my data; how can I program code to change the URL and get data?</p>\n<p>Is there code I can see?</p>","arenanet":false},{"pubDate":"2014-06-20T23:56:21.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4136189","author":"DarkSpirit.7046","body":"\n<p>There 2 levels of session ids.</p>\n<p>1.  Level 1, you can get by sending your account information to <a href=\"https://account.guildwars2.com\">https://account.guildwars2.com</a>. <br>\n2.  Level 2, gives you level 1 access + more privileges like accessing your own account.  You can read it of process memory from your guild wars 2 client itself.</p>\n<p>Check up the OP on accessing the TP</p>","arenanet":false},{"pubDate":"2014-06-20T06:52:27.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4134212","author":"StevenL.3761","body":"\n<p>If this is a C# project, then the usual way of dealing with this is to do all of the authentication and stuff on the server side in an ASP.NET Web API project. Your JS script should never need to call the TP service directly. Instead, it should call your own API controller. Your API controller should then take care of network handshakes and all that, then return the requested data from the TP service.</p>","arenanet":false},{"pubDate":"2014-06-20T02:39:19.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4133897","author":"Fossilized Amber.1352","body":"\n<p>DarkSpirit, thanks for answering me, although my question isn’t exactly that. I have the session id and don’t know <em>how</em> to make api calls. I can re-direct to the page you linked to, but <em>how</em> can I make the api calls that I want to?</p>\n<p>Threads? Server? I’m lost at this point.</p>\n<p>I get access cross origin errors, because I am running a server (IIS from a c# project) – if that helps anybit</p>\n<p>*Edit, I fixed my issue.</p>","arenanet":false},{"pubDate":"2014-06-20T02:32:38.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4133887","author":"DarkSpirit.7046","body":"\n<p>You need to be authenticated against their server in order to access the TP data.  This will not allow you to access your own account as that would require a session key from the client itself.</p>\n<p>Check this out:</p>\n<p><a href=\"https://account.guildwars2.com/login?redirect_uri=http%3A%2F%2Ftradingpost-live.ncplatform.net%2Fauthenticate%3Fsource%3D%252F&game_code=gw2\">https://account.guildwars2.com/login?redirect_uri=http%3A%2F%2Ftradingpost-live.ncplatform.net%2Fauthenticate%3Fsource%3D%252F&amp;game_code=gw2</a></p>","arenanet":false},{"pubDate":"2014-06-20T02:05:54.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/4133853","author":"Fossilized Amber.1352","body":"\n<p>Question that I haven’t found to see in this thread I was directed to. How can you log into the TP and make api calls? I’ve used Fiddler and grabbed my session ID. I’m getting an access control origin error when I try to GET from the above-mentioned urls (to grab item data).</p>\n<p>I am trying to keep this simple in JS/HTML, is this possible or do I need a server?</p>","arenanet":false},{"pubDate":"2014-01-27T00:38:35.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3554612","author":"Ryan.9387","body":"\n<p>That works too. I have no bandwidth issues though. Thank my uni internet for that. I may change my code later, but it remains fully functional at the moment.</p>","arenanet":false},{"pubDate":"2014-01-26T22:33:54.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3554183","author":"DarkSpirit.7046","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on January 26 2014 07:27AM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3551718\">Ryan.9387:</a></cite></div><div class=\"quotey\"><p>All you have to do is ask the API not to compress it in your headers. Read my posted code and note the gzip header. I get the json returned with that code.</p></div></blockquote>\n<p>Then you are wasting bandwidth.  Gzip reduces the time it takes for the website to transfer the data to your client.  If you are not using it, then you are not being efficient.</p>\n<p>If your client supports it, you should enable it, especially when it is so easy to uncompress the data.</p>\n<p><a href=\"http://love-python.blogspot.com/2008/07/accept-encoding-gzip-to-make-your.html\">http://love-python.blogspot.com/2008/07/accept-encoding-gzip-to-make-your.html</a></p>","arenanet":false},{"pubDate":"2014-01-26T07:27:03.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3551718","author":"Ryan.9387","body":"\n<p>All you have to do is ask the API not to compress it in your headers. Read my posted code and note the gzip header. I get the json returned with that code.</p>","arenanet":false},{"pubDate":"2014-01-26T01:22:54.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3550965","author":"DarkSpirit.7046","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on January 25 2014 10:14PM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3550332\">Maximilian.1926:</a></cite></div><div class=\"quotey\"><p>ya that was my assumption,<br>\nI don’t know why im not able to decode the listing.json… I do get a response in my python program but then it fails at decoding it, while it works fine for me.json, (I have matched the hosts and header info for both requests according to what I get in fiddler from an in client action)</p>\n<p>NVM<br>\nfigured it out, I set accept-encoding to “gzip,q=0”, and now it seems to read it fine… although im now getting “gzip,deflate” from fideller…</p></div></blockquote>\n<p>Setting gzip compression is usually a good idea.  Although I have not written any python code before for that, I am sure you can easily search for how to uncompress the data in python.</p>\n<p>It has been easy enough for me to handle gzip compression on my C# client.</p>","arenanet":false},{"pubDate":"2014-01-25T22:14:24.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3550332","author":"Maximilian.1926","body":"\n<p>ya that was my assumption,<br>\nI don’t know why im not able to decode the listing.json… I do get a response in my python program but then it fails at decoding it, while it works fine for me.json, (I have matched the hosts and header info for both requests according to what I get in fiddler from an in client action)</p>\n<p>NVM<br>\nfigured it out, I set accept-encoding to “gzip,q=0”, and now it seems to read it fine… although im now getting “gzip,deflate” from fideller…</p>","arenanet":false},{"pubDate":"2014-01-25T20:51:21.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3550042","author":"DarkSpirit.7046","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on January 25 2014 08:26PM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3549950\">Maximilian.1926:</a></cite></div><div class=\"quotey\"><p>ok, I know about me.json needing the session key from the client, and I have that working, but I was tiring to use the same key with listings.json, could that be my problem?  <br>\nI need to get both keys separately? I would think the client session key one should cover it as I can view that data in the client</p></div></blockquote>\n<p>You do not need both keys if you already have the game client session key from your guild wars 2 client.  That game client session key seems to have a higher privilege in the sense that it has access to more features of the web service (e.g. me.json) than the session key obtained from logging in to a web site.  Therefore, if you have access to the game client session key, that is enough.</p>\n<p>However, you have to keep your guild wars 2 client running in the background as the game client session key expires, if you log out, after a short while.  The other session key lasts longer though and does not require your guild wars 2 client to be running.</p>","arenanet":false},{"pubDate":"2014-01-25T20:26:46.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3549950","author":"Maximilian.1926","body":"\n<p>ok, I know about me.json needing the session key from the client, and I have that working, but I was tiring to use the same key with listings.json, could that be my problem?  <br>\nI need to get both keys separately? I would think the client session key one should cover it as I can view that data in the client</p>","arenanet":false},{"pubDate":"2014-01-25T19:07:03.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3549652","author":"DarkSpirit.7046","body":"\n<p>me.json – gets your buy/sell/past buys/past sells transactions.<br>\nlistings.json – gets the current buy and sell listings on an item.</p>\n<p>me.json requires you to have the game client session key in your cookie when you communicate with the server.  listing.json doesn’t need to and only requires the session key that you get by posting to “<a href=\"https://account.guildwars2.com/login?redirect_uri=http%3A%2F%2Ftradingpost-live.ncplatform.net%2Fauthenticate%3Fsource%3D%252F&game_code=gw2\">https://account.guildwars2.com/login?redirect_uri=http%3A%2F%2Ftradingpost-live.ncplatform.net%2Fauthenticate%3Fsource%3D%252F&amp;game_code=gw2</a>” with your login email and password.  Therefore, listing.json does not require your guild wars 2 client to be running and logined while me.json does.</p>","arenanet":false},{"pubDate":"2014-01-25T00:59:59.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3547115","author":"Maximilian.1926","body":"\n<p>anyone know the difference between <br>\n<a href=\"https://tradingpost-live.ncplatform.net/ws/listings.json?id\">https://tradingpost-live.ncplatform.net/ws/listings.json?id</a>=##### and <a href=\"https://tradingpost-live.ncplatform.net/ws/me.json\">https://tradingpost-live.ncplatform.net/ws/me.json</a>, encoding wise?<br>\nIm using python (urllisb2 and json) and I can read the me.json but I keep getting errors on the listings</p>","arenanet":false},{"pubDate":"2014-01-22T07:02:24.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3532350","author":"DarkSpirit.7046","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on January 21 2014 09:54PM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3529739\">Galowin.6089:</a></cite></div><div class=\"quotey\"><p>is it possible to extract ur bought/sold items lists (to datasheet)?</p></div></blockquote>\n<p>Yes you can do that programmatically.</p>\n<p>In fact, I did that for my historical records of past items bought/sold, when I realized that I can do this to optimize my app.</p>\n<p>My app saves a copy of my past items bought/sold in persistent memory.  The next time I launch my app, it only downloads my past transactions up to the latest transactions stored in my persistent memory, saving on downloads, then does a merge of both the newer and older lists dynamically.</p>","arenanet":false},{"pubDate":"2014-01-21T21:54:31.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3529739","author":"Galowin.6089","body":"\n<p>is it possible to extract ur bought/sold items lists (to datasheet)?</p>","arenanet":false},{"pubDate":"2014-01-20T04:06:57.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3520365","author":"Ryan.9387","body":"\n<p>I found it expires within 10 min or less. Constant use has no effect on it. It seems that you must have the client running to use the API.</p>","arenanet":false},{"pubDate":"2014-01-19T23:11:48.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3519634","author":"Maximilian.1926","body":"\n<p>regarding SessionID, how long is it active for after log-out from the game client? and is there a way to “refresh” it to keep it alive? or would something like that be a violation of the rules?</p>","arenanet":false},{"pubDate":"2014-01-10T07:45:58.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3474977","author":"DasPatAttack.2516","body":"\n<p>thanks a lot, going to try that ASAP.</p>","arenanet":false},{"pubDate":"2014-01-09T18:19:58.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3472268","author":"Ryan.9387","body":"\n<p>The SessionID is included in most of the API requests you send. How I went about it was by using fiddler and copying the format of the requests sent by the game.</p>\n<p>Go into the game with fiddler running and open something like “my buy orders.” The youcan minimize the game and look at the request that the game sent to the TP website. From there you simply have to copy the headers and values in your program’s html request.</p>\n<p>Here is an example function from python that returns a list of your over cut WTBs. You can see where I pass the SessionID to the TPAPI.</p>\n<p>import urllib<br>\nimport urllib2<br>\nimport json</p>\n<p>def TPMyBuys(SessionID,count):<br>\n      values = {\"time\" : “now”,“type” : “buy”,“charid” : \"\",“offset” : “1”,“count” : count}<br>\n      data = urllib.urlencode(values)<br>\n      req = urllib2.Request(“<a href=\"\"></a>%s” %data)<br>\n      req.add_header(“Accept” , “<strong>/</strong>”)<br>\n      req.add_header(“Accept-Charset” , “iso-8859-1,*,utf-8”)<br>\n      req.add_header( “Accept-Encoding” , “gzip;q=0”)<br>\n      req.add_header(“Accept-Language” , “en”)<br>\n      req.add_header(“Cookie” , SessionID) #&lt;—————-<br>\n      req.add_header( “User-Agent” , “Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1003.1 Safari/535.19 Awesomium/1.7.1”)<br>\n      req.add_header(“Connection” , “keep-alive”)<br>\n      req.add_header(“Host” , “tradingpost-live.ncplatform.net”)<br>\n      req.add_header(“Referer” ,“<a href=\"https://tradingpost-live.ncplatform.net/me\">https://tradingpost-live.ncplatform.net/me</a>”)<br>\n      req.add_header( “X-Requested-With” , “XMLHttpRequest”)<br>\n      response = urllib2.urlopen(req)<br>\n      parsed_json = json.loads(response.read())<br>\n      return parsed_json</p>\n<p>def TPMyBuysCheck(SessionID):<br>\n      list = []<br>\n      OBJ =  TPMyBuys(SessionID,0)<br>\n      OBJ =  TPMyBuys(SessionID,str(OBJ[u’total’]))<br>\n      for Item in OBJ[u’listings’]:<br>\n            if int(Item[u’buy_price’]) &gt; int(Item[u’unit_price’]):<br>\n                  list.append([str(Item[u’listing_id’]),str(Item[u’data_id’])])<br>\n      return list</p>","arenanet":false},{"pubDate":"2014-01-09T11:34:22.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3470789","author":"DasPatAttack.2516","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on December 03 2013 05:11PM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3307210\">DarkSpirit.7046:</a></cite></div><div class=\"quotey\"><p>1.  Obtain a higher privileged session key that has access to your account transactions, etc. :- You need to login with your GW2 client then obtain this session key either through fiddler or through other means (e.g. reading it off the GW2 client process memory or reading it off the GW2 browser cache).</p></div></blockquote>\n<p>Awesome job guys.<br>\nI’m actually interested in knowing how to pass the higher privileged session key to connect and get my personal ackitten info.<br>\nI manage to get this session id, I’ll find my way fining the well formed url to get my specific user account transaction details but I’m missing the way to connect to your services using the higher privileged session key.<br>\nCould you help?<br>\nThanks a bunch.</p>","arenanet":false},{"pubDate":"2014-01-07T00:08:13.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3461147","author":"Tonikor.5637","body":"\n<p>works perfect now, thank you</p>","arenanet":false},{"pubDate":"2014-01-06T23:59:20.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3461119","author":"DarkSpirit.7046","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on January 06 2014 11:22PM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3461000\">Tonikor.5637:</a></cite></div><div class=\"quotey\"><p>What do I do when i get an “ERROR: Invalid authorization” message?</p>\n<p>I’m asking this (and on an “old” post) because I used the tool a couple of days ago and it worked fine.</p></div></blockquote>\n<p>Since it worked fine earlier, I suggest that you check the status of your account.  Do a login at this URL and check your credentials:</p>\n<p><a href=\"https://account.guildwars2.com/login?redirect_uri=http%3A%2F%2Ftradingpost-live.ncplatform.net%2Fauthenticate%3Fsource%3D%252F&game_code=gw2\">https://account.guildwars2.com/login?redirect_uri=http%3A%2F%2Ftradingpost-live.ncplatform.net%2Fauthenticate%3Fsource%3D%252F&amp;game_code=gw2</a></p>","arenanet":false},{"pubDate":"2014-01-06T23:22:05.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3461000","author":"Tonikor.5637","body":"\n<p>What do I do when i get an “ERROR: Invalid authorization” message?</p>\n<p>I’m asking this (and on an “old” post) because I used the tool a couple of days ago and it worked fine.</p>","arenanet":false},{"pubDate":"2013-12-03T17:11:01.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3307210","author":"DarkSpirit.7046","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on November 28 2013 07:16AM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3278423\">BlazingZero.9702:</a></cite></div><div class=\"quotey\"><p>hello everyone, firstly thank you The Talcmaster for creating this awesome post. This really helps a lot for people like me who want to write a bit of program to access the TP outside of the game.</p>\n<p>As I’m pretty new to using JSON, I would like to know how can I authenticate myself when accessing the TP? I’m using C# on Unity.</p></div></blockquote>\n<p>The purpose of authenticating is to obtain a session key which you can then set in your cookie (i.e. s=&lt;your session key guid&gt;) to accompany further transactions with the TP server.  2 ways of authenticating:</p>\n<p>1.  Obtain a higher privileged session key that has access to your account transactions, etc. :- You need to login with your GW2 client then obtain this session key either through fiddler or through other means (e.g. reading it off the GW2 client process memory or reading it off the GW2 browser cache).</p>\n<p>2.  Obtain a lower privileged session key by doing a HTTPS POST to <a href=\"https://account.guildwars2.com/login?redirect_uri=http%3A%2F%2Ftradingpost-live.ncplatform.net%2Fauthenticate%3Fsource%3D%252F&game_code=gw2\">https://account.guildwars2.com/login?redirect_uri=http%3A%2F%2Ftradingpost-live.ncplatform.net%2Fauthenticate%3Fsource%3D%252F&amp;game_code=gw2</a> with the following parameters:</p>\n<p>email = &lt;your email address that you use to login to GW2&gt;<br>\npassword = &lt;your password that you use to login to GW2&gt;</p>\n<p>Note that method 2 doesn’t require your GW2 client to be running and is useful for querying most of the data that you may need from the TP.  I recommend using method 2 as your default means of authentication and only fall back to method 1 when you need to perform privileged transactions (e.g. create buy orders, cancel transactions, query current or past transactions, etc.) on your account.</p>","arenanet":false},{"pubDate":"2013-11-28T07:16:34.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3278423","author":"BlazingZero.9702","body":"\n<p>hello everyone, firstly thank you The Talcmaster for creating this awesome post. This really helps a lot for people like me who want to write a bit of program to access the TP outside of the game.</p>\n<p>As I’m pretty new to using JSON, I would like to know how can I authenticate myself when accessing the TP? I’m using C# on Unity.</p>","arenanet":false},{"pubDate":"2013-11-13T14:01:03.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3197037","author":"Killer Rhino.6794","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on November 13 2013 11:10AM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3196424\">enjoyaol.2398:</a></cite></div><div class=\"quotey\"><p>Any way to get the historical prices of the items from the API ? (sell and buy sides)<br>\nRight now I’m using GW2Spidy api but relying on GW2 servers would be better for me.<br>\nthx !</p></div></blockquote>\n<p>Nope. In order to aggregate TP data over time, you would need to do exactly what gw2spidy.com is already doing, which is to say, constantly poll, collect and store the TP data in some manner.</p>\n<p>If you don’t want to rely on gw2spidy.com remotely, you can fire up your own version of the site. For some time, the author of gw2spidy.com has graciously open sourced his code and provided detailed instructions on how to use it on the project’s <a href=\"https://github.com/rubensayshi/gw2spidy\">GitHub page</a></p>\n<p><em>Shameless Plug</em>: If you want to write iOS or OS X apps which can query gw2spidy.com, check out  <a href=\"https://github.com/KevinVitale/GW2Kit\">GW2Kit</a></p>","arenanet":false},{"pubDate":"2013-11-13T11:10:32.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3196424","author":"enjoyaol.2398","body":"\n<p>Any way to get the historical prices of the items from the API ? (sell and buy sides)<br>\nRight now I’m using GW2Spidy api but relying on GW2 servers would be better for me.<br>\nthx !</p>","arenanet":false},{"pubDate":"2013-10-28T07:54:17.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/3104590","author":"Lil Puppy.5216","body":"\n<p>During beta the check box that currently filters things that are currently available was used to filter items the character could use like armor and weapons. The API had it as &amp;weight=[int] parameter, now &amp;weightclass=[int].</p>","arenanet":false},{"pubDate":"2013-10-03T19:46:36.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/2962070","author":"DarkSpirit.7046","body":"\n<p>Interesting, I never knew that the TP server supported armor weight class filtering.  My app  search function simply applies a second filter to the returned result matched against the weight class specified by the official API or GW2DB, if armor weight class is specified by the user.</p>","arenanet":false},{"pubDate":"2013-10-02T12:28:18.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/2954083","author":"Lil Puppy.5216","body":"\n<p>Does the parameter  &amp;weight=[0,1,2]  no longer do anything? I think it was 0,1,2 but it might be 1,2,3. It was used to filter out light, medium, and heavy armor types in the beginning.</p>\n<p>tested 1: yep, it doesn’t do anything now… that’s a shame since it worked beautifully.<br>\ntested 2: &amp;weightclass=[integer]  is a parameter but integer values don’t return anything useful – still getting mixed weight classes returned (heavy,medium,light).</p>\n<p><a href=\"https://tradingpost-live.ncplatform.net/ws/search.json?text=&levelmin=80&levelmax=80&rarity=5&type=0&weightclass=0\">https://tradingpost-live.ncplatform.net/ws/search.json?text=&amp;levelmin=80&amp;levelmax=80&amp;rarity=5&amp;type=0&amp;weightclass=0</a><br>\nReturns Aidan’s medium armors and just after that is Apothecary’s Draconic heavy armors.<br>\n</p><pre><code>\n{\n\t\"args\": {\n\t\t\"offset\": 1,\n\t\t\"count\": 10,\n\t\t\"rarity\": 5,\n\t\t\"weightclass\": 0,\n\t\t\"levelmin\": 80,\n\t\t\"levelmax\": 80,\n\t\t\"type\": 0\n\t},\n\t\"total\": \"326\",\n\t\"results\": [\n\t\t{\n\t\t\t\"type_id\": \"3\",\n\t\t\t\"data_id\": \"323\",\n\t\t\t\"item_image_hash\": \"761944b\",\n\t\t\t\"guid\": \"AD0B4245-74D8-4713-88D2-EABA36DEF013\",\n\t\t\t\"name\": \"Aidan's Boots\",\n\t\t\t\"description\": \"\",\n\t\t\t\"level\": \"80\",\n\t\t\t\"rarity\": \"5\",\n\t\t\t\"vendor\": \"264\",\n\t\t\t\"sell_price\": \"30192\",\n\t\t\t\"sell_count\": \"101\",\n\t\t\t\"buy_price\": \"21801\",\n\t\t\t\"buy_count\": \"127\",\n\t\t\t\"passwords\": [],\n\t\t\t\"rarity_word\": \"Exotic\",\n\t\t\t\"img\": \"https://dfach8bufmqqv.cloudfront.net/gw2/img/content/761944b_icon_small.png\",\n\t\t\t\"tradeable\": true\n\t\t}, {...}\n\t]\n}\n</code></pre><p></p>","arenanet":false},{"pubDate":"2013-09-29T21:35:28.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/2936137","author":"athanor.7410","body":"\n<p>There is a JAVA implementation here:<br>\n<a href=\"https://code.google.com/p/gw2world/source/browse/trunk/Gw2worldWebApp/src/main/java/com/gw2/gw2world/web/server/mod/TradingPostManager.java\">Java class</a><br>\nYou can connect and get trading post outputs</p>","arenanet":false},{"pubDate":"2013-05-29T07:00:17.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/2112137","author":"DarkSpirit.7046","body":"\n<p>I have updated my enums above as best as I can with the current schema from the items api shown here:</p>\n<p><a href=\"http://wiki.guildwars2.com/wiki/API/item_details\">http://wiki.guildwars2.com/wiki/API/item_details</a></p>\n<p>There are still some confusion with the subtypes because the items api returns strings while the TP api returns integer ids.  Plus the fact that there are existing bugs surrounding the TP search filters so items may not have been listed correctly on the TP at the moment.  However, in the context of the TP, they should not matter since the items in the new enums, returned by the items api, are bounded and are not able to be traded in the TP.</p>\n<p>If my enum value is spelled differently as the strings returned from the items api, I have indicated those through the EnumMember attribute.</p>","arenanet":false},{"pubDate":"2013-05-23T20:17:10.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/2080461","author":"anzenketh.3759","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on May 23 2013 04:08PM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/2079115\">zaced.7948:</a></cite></div><div class=\"quotey\"><p>dear dudes and dudesses from anet. this thread needs a sticky before it leaves the front page and people start making new threads with the same questions over and over again.<br>\ncentralist organization always pays off in terms of administration efficiency, i won’t mention examples since you probably are selling copies there.<br>\ngreetings<br>\nzach</p></div></blockquote>\n<p>Problem is I don’t think they want it there yet. This API is not likely the one ready for Prime Time.</p>","arenanet":false},{"pubDate":"2013-05-23T16:08:18.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/2079115","author":"zaced.7948","body":"\n<p>dear dudes and dudesses from anet. this thread needs a sticky before it leaves the front page and people start making new threads with the same questions over and over again.<br>\ncentralist organization always pays off in terms of administration efficiency, i won’t mention examples since you probably are selling copies there.<br>\ngreetings<br>\nzach</p>","arenanet":false},{"pubDate":"2013-05-22T20:19:47.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/2074863","author":"The Talcmaster.7391","body":"\n<p>Yeah, that count feature reduced the run time of my ETL from around an hour to less than a minute.  Being able to pull in item and recipe information from the game itself will go a long way towards making people’s Trading post apps more robust than before.</p>","arenanet":false},{"pubDate":"2013-05-22T20:07:04.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/2074802","author":"DarkSpirit.7046","body":"\n<p>Thanks for the update, The Talcmaster.  Personally, I am so glad that they added the count parameter to the trading post’s search.json.  My app sorting feature for computed columns, is much faster now.</p>\n<p>I would be very excited when they officially release their trading post api.</p>","arenanet":false},{"pubDate":"2013-05-22T17:43:00.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/2074446","author":"The Talcmaster.7391","body":"\n<p>I totally agree, DarkSpirit.  As it stands, the API that the trading post comes with exists primarily for facilitating its in game functionality, which is why it is a little bit more confusing than the newer API stuff just released.  It was built a bit with external applications in mind, otherwise it wouldn’t be accessible outside the game at all.  This hasn’t stopped people from figuring out how to pull all sorts of useful information from it and building those many excellent sites.  I’ve been informed that the ability to check prices without needing to authenticate may be in the cards but right now it is necessary to prevent people from abusing the TP with too many calls.  I don’t expect this to be truly outdated any time soon since right now is more of a focus on making new information available.  The only changes that I know of was the last release adding the count= parameter to the trading post’s search.json and the release before that making the listings.json not require an in-game session-id.  If people let me know about small changes like that, I’ll try my best to keep this up to date.</p>","arenanet":false},{"pubDate":"2013-05-22T17:33:39.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/2074389","author":"DarkSpirit.7046","body":"\n<p>If you want complete C# code using this API, you can look at Zicore’s TP Notifier:</p>\n<p><a href=\"https://forum-en.guildwars2.com/forum/game/bltc/Zicore-s-Trading-Post-Notifier-Open-Source/first\">https://forum-en.guildwars2.com/forum/game/bltc/Zicore-s-Trading-Post-Notifier-Open-Source/first</a></p>\n<p>It uses .NET 4.0.  I have also written my own C# app in .NET 4.5 (for its async programming) but it is still work-in-progress.</p>\n<p>Here are some of the enums that I use:</p>\n<p>public enum RarityEnum<br>\n    {<br>\n        Junk = 0,<br>\n        Basic,<br>\n        Fine,<br>\n        Masterwork,<br>\n        Rare,<br>\n        Exotic,<br>\n        Ascended,<br>\n        Legendary<br>\n    };</p>\n<p>public enum TypeEnum<br>\n    {<br>\n        Armor = 0,<br>\n        Back = 1,<br>\n        Bag = 2,<br>\n        Consumable,<br>\n        Container,<br>\n        [EnumMember(Value = “CraftingMaterial”)]<br>\n        Crafting_Material,<br>\n        Gathering,<br>\n        Gizmo,<br>\n        MiniPet = 11,<br>\n        Tool = 13,<br>\n        Trinket = 15,<br>\n        Trophy,<br>\n        [EnumMember(Value = “UpgradeComponent”)]<br>\n        Upgrade_Component,<br>\n        Weapon<br>\n    };</p>\n<p>// for TypeEnum.Armor<br>\n    public enum ArmorSubTypeEnum<br>\n    {<br>\n        Coat = 0,<br>\n        Leggings,<br>\n        Gloves,<br>\n        Helm,<br>\n        [EnumMember(Value = “HelmAquatic”)]<br>\n        Aquatic_Helm,<br>\n        Boots,<br>\n        Shoulders<br>\n    };</p>\n<p>// for TypeEnum.Consumable<br>\n    public enum ConsumableSubTypeEnum<br>\n    {<br>\n        Alcohol = 1,<br>\n        Generic,<br>\n        Food = 3,<br>\n        Tonics = 4,         // Suppose to be Generic?<br>\n        Transmutation = 5,<br>\n        Unlock,<br>\n        Skins = 7,<br>\n        Dyes_and_Recipes = 8,  // Suppose to be Unlock?<br>\n        Utility = 9,<br>\n        [EnumMember(Value = “ContractNpc”)]<br>\n        Contract_Npc,<br>\n        [EnumMember(Value = “AppearanceChange”)]<br>\n        Appearance_Change,<br>\n        Immediate,<br>\n        Halloween<br>\n    };</p>\n<p>// for TypeEnum.Container<br>\n    public enum ContainerSubTypeEnum<br>\n    {<br>\n        Default = 0,<br>\n        [EnumMember(Value = “GiftBox”)]<br>\n        Gift_Box<br>\n    };</p>\n<p>// for TypeEnum.Gathering<br>\n    public enum GatheringSubTypeEnum<br>\n    {<br>\n        Foraging = 0,<br>\n        Logging,<br>\n        Mining<br>\n    };</p>\n<p>// for TypeEnum.Gizmo<br>\n    public enum GizmoSubTypeEnum<br>\n    {<br>\n        Default = 0,<br>\n        Salvage = 2,<br>\n        [EnumMember(Value = “RentableContractNpc”)]<br>\n        Rentable_Contract_Npc,<br>\n        [EnumMember(Value = “UnlimitedConsumable”)]<br>\n        Unlimited_Consumable<br>\n    };</p>\n<p>// for TypeEnum.Tool<br>\n    public enum ToolSubTypeEnum<br>\n    {<br>\n        Crafting = 0,<br>\n        Salvage = 2<br>\n    };</p>\n<p>// for TypeEnum.Trinket<br>\n    public enum TrinketSubTypeEnum<br>\n    {<br>\n        Accessory = 0,<br>\n        Amulet,<br>\n        Ring<br>\n    };</p>\n<p>// for TypeEnum.UpgradeComponent<br>\n    public enum UpgradeComponentSubTypeEnum<br>\n    {<br>\n        Default = 0,<br>\n        Gem = 1,<br>\n        Rune = 2,<br>\n        Sigil = 3<br>\n    };</p>\n<p>// for TypeEnum.Weapon<br>\n    public enum WeaponSubTypeEnum<br>\n    {<br>\n        Sword = 0,<br>\n        Hammer,<br>\n        [EnumMember(Value = “LongBow”)]<br>\n        Long_Bow,<br>\n        [EnumMember(Value = “ShortBow”)]<br>\n        Short_Bow,<br>\n        Axe,<br>\n        Dagger,<br>\n        Greatsword,<br>\n        Mace,<br>\n        Pistol,<br>\n        Rifle = 10,<br>\n        Scepter,<br>\n        Staff,<br>\n        Focus,<br>\n        Torch,<br>\n        Warhorn,<br>\n        Shield,<br>\n        [EnumMember(Value = “Harpoon”)]<br>\n        Spear = 19,<br>\n        [EnumMember(Value = “Speargun”)]<br>\n        Harpoon_Gun,<br>\n        Trident,<br>\n        [EnumMember(Value = “TwoHandedToy”)]<br>\n        Toy<br>\n    };</p>\n<p>Note that there are currently some bugs surrounding ArenaNet’s search filters.  They don’t have Back Item search and some of the consumable sub types that I have above, implemented in their TP dialog web page.  So keep in mind that these enums may change by the time ArenaNet releases this api.</p>","arenanet":false},{"pubDate":"2013-05-22T17:15:44.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/2074301","author":"DarkSpirit.7046","body":"\n<p>I would be surprised if ArenaNet finally decides to release their trading post API as it is right now.  I don’t think it is ready.</p>\n<p>Most of the interesting functions require the game session key and char id guid and having this requirement hampers their use in mobile apps, which is why I didn’t post any detail information about their Trading Post API.  I also would not know what I post would be outdated by the time ArenaNet decides to officially release this.</p>\n<p>However, since The Talcmaster has already posted this information, I can help by supplementing any info that he may have missed out.</p>","arenanet":false},{"pubDate":"2013-05-22T15:06:24.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/2073639","author":"Healix.5819","body":"\n<p>Selling and picking up items are done directly though the client. Basically, you can’t “touch” items through the API.</p>\n<p>The charid has to be intercepted by either reading memory or the url used to authenticate. The in-game session key has to be obtained the same way or by reading the cookie file located in gw2cache.</p>","arenanet":false},{"pubDate":"2013-05-22T14:43:59.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/2073524","author":"The Talcmaster.7391","body":"\n<p>I believe it is possible to do any of the functions that you can do normally in those pages, such as buying and selling items, buying and redeeming gems, buying gemstore items, etc.  I haven’t played with any of these functions because 1) I don’t know how to retrieve my charid, 2) I don’t want to mess with things that can cause permanent unwanted changes, and 3) I’m currently only interested in pulling out the data so I can create some nifty visualizations.  I didn’t mention them in the doc for much the same reasons, as well as not wanting to be responsible for people playing with things they may regret.  Of course, I welcome DarkSpirit and other people who have played with it to add to this in their own posts and make it more thorough and complete.</p>","arenanet":false},{"pubDate":"2013-05-22T13:14:44.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/2073047","author":"Killer Rhino.6794","body":"\n<p>The Talcmaster, this is phenomenal! Thank you!</p>","arenanet":false},{"pubDate":"2013-05-22T06:48:50.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/2071778","author":"DarkSpirit.7046","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on May 22 2013 06:30AM\"><a href=\"/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/2071718\">marnick.4305:</a></cite></div><div class=\"quotey\"><p>Is it possible to buy with this api or merely watch prices?</p></div></blockquote>\n<p>Yes it is possible to buy.  For buy, you have to do a https post</p>\n<p><a href=\"https://tradingpost-live.ncplatform.net/ws/item/&lt;itemId&gt;/buy\">https://tradingpost-live.ncplatform.net/ws/item/&lt;itemId&gt;/buy</a></p>\n<p>with the following parameters:</p>\n<p>{count=int,price=int,charid=&lt;char guid&gt;}</p>\n<p>You also need your game session key.</p>","arenanet":false},{"pubDate":"2013-05-22T06:30:28.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/2071718","author":"marnick.4305","body":"\n<p>Is it possible to buy with this api or merely watch prices?</p>","arenanet":false},{"pubDate":"2013-05-22T01:31:02.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/2070775","author":"The Talcmaster.7391","body":"\n<p>…Continued from above</p>\n<ul>\n\t<li><a href=\"https://tradingpost-live.ncplatform.net/ws/listings.json?id=27321\">https://tradingpost-live.ncplatform.net/ws/listings.json?id=27321</a><br>\nThis will pull in the buy and sell listings for the first 20 prices as seen when you click on a specific item in the trading post.  It returns the price, number of listings at that price, and the total of numbers ordered at that price.  If you specify type=buys or type=sells it will return that type, but by default returns both.  The data is not all listings for an item, and since only one item can be returned at a time is a much slower way of getting data out than search.json so if you have no reason to look at specific listings, just stick to search.json</li>\n</ul>\n<ul>\n\t<li><a href=\"https://tradingpost-live.ncplatform.net/ws/trends.json\">https://tradingpost-live.ncplatform.net/ws/trends.json</a><br>\nThis odd little output shows all the trending information you see on the main page.  It has all the standard item information for the items, and a list if IDs for each category.  There are no parameters for it, and may not even be up to date at a given time.  I would not rely on it for much, but am including it here for the sake of completeness.</li>\n</ul>\n<ul>\n\t<li><a href=\"https://tradingpost-live.ncplatform.net/ws/me.json\">https://tradingpost-live.ncplatform.net/ws/me.json</a><br>\nThis output actually requires a session-id that originates in game to be able to access.  I won’t get into how to retrieve that particular session-id.  This is what you see when you view your transactions, and requires a combination of parameters to return a valid result.  The type=buy or type=sell will return either your buy or sell transactions respectively.  The time=now or time=past shows either your current listings or your historical transactions.</li>\n</ul>\n<p><strong>gemstore outputs:</strong></p>\n<ul>\n\t<li><a href=\"https://gemstore-live.ncplatform.net/ws/search.json\">https://gemstore-live.ncplatform.net/ws/search.json</a><br>\nThis outputs all of the information about a given gemstore item and requires either the discounted=1 parameter,  the category= parameter, or the text= to return a valid list.  Using a combination will limit it further.  The category= uses actual words for the categories, and the following are valid: decorative, consumable, convenience, boosts, minipets, account. The text= parameter must have a valid text search after it to return results.  Optional parameters are offset and count, which behave the same as the tradingpost search.json.</li>\n</ul>\n<ul>\n\t<li><a href=\"https://gemstore-live.ncplatform.net/ws/history.json\">https://gemstore-live.ncplatform.net/ws/history.json</a><br>\nThis outputs items previously bought on the gemstore, and requires a session-id that originates from the game.  It is the same information as the search returns, except historical based on your account.  The only known parameter is count=</li>\n</ul>\n<p><strong>exchange outputs:</strong></p>\n<ul>\n\t<li><a href=\"https://exchange-live.ncplatform.net/ws/trends.json\">https://exchange-live.ncplatform.net/ws/trends.json</a><br>\nThis outputs the raw data powering the little graph seen on the bottom of the exchange.  With no type specified, it by default outputs the equivalent of a type=ReceivingCoins parameter, with the gem counterpart being type=ReceivingGems.</li>\n</ul>\n<ul>\n\t<li><a href=\"https://exchange-live.ncplatform.net/ws/rates.json\">https://exchange-live.ncplatform.net/ws/rates.json</a><br>\nThis is another one that requires a session-id from the game.  It is what provides the conversion rates between coins and gems.  It requires a coins= and/or gems= number parameter added on to return values of that type.  I have not managed to get this to successfully work myself, so I think this also requires some sort of character id to be passed.  I do know that it is how Gw2spidy and some others pull in data.</li>\n</ul>\n<p>That’s pretty much everything I know about these APIs.  If there is anything I missed that needs to be clarified or if you have anything to share, let me know and I will add it.</p>","arenanet":false},{"pubDate":"2013-05-22T01:30:30.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guide-to-the-Black-Lion-Trading-Co-API/2070773","author":"The Talcmaster.7391","body":"\n<p>Since we now have a dedicated spot for API discussions, I figured I would take the liberty of sharing what I know about the Trading Post / Gem Store API so that anyone interested in making something with it will have a thorough reference to go off of.  Thanks to all the people in the #gw2spidy chatroom who showed me much of this.</p>\n<p><strong>DISCLAIMER:  This API is not an official-release API and is not intended for public use.  Therefore, it is unsupported by Arenanet, NCsoft or any other company.  It is subject to change without any notification.  USE AT YOUR OWN RISK.</strong></p>\n<p><strong>Web addresses involved:</strong></p>\n<ul>\n\t<li><a href=\"https://tradingpost-live.ncplatform.net\">https://tradingpost-live.ncplatform.net</a> – trading post page</li>\n\t<li><a href=\"https://gemstore-live.ncplatform.net\">https://gemstore-live.ncplatform.net</a> – gem store page</li>\n\t<li><a href=\"https://exchange-live.ncplatform.net\">https://exchange-live.ncplatform.net</a> – gem exchange page</li>\n</ul>\n<p><strong>Accessing the Trading Post:</strong>  <br>\nThe external login page is /authenticate after one of the above address:</p>\n<ul>\n\t<li><a href=\"https://tradingpost-live.ncplatform.net/authenticate\">https://tradingpost-live.ncplatform.net/authenticate</a></li>\n\t<li><a href=\"https://gemstore-live.ncplatform.net/authenticate\">https://gemstore-live.ncplatform.net/authenticate</a></li>\n\t<li><a href=\"https://exchange-live.ncplatform.net/authenticate\">https://exchange-live.ncplatform.net/authenticate</a></li>\n</ul>\n<p>These pages use a fairly standard SSO (Single Sign On) setup, so if you are already logged into the forum, it will check against the forum and automatically redirect you to that particular site’s landing page.  If you are not logged in, it will redirect you to account.guildwars2.com so you can enter your information.  If you already have a valid session ID, you can add it as a parameter: &lt;site&gt;/authenticate?id=&lt;session-id&gt;</p>\n<p>If, like me, you are trying to access these parameters outside of a web browser and don’t retain cookies, you can add the session-id in the form of s=&lt;session-id&gt; as a custom header called Cookie (this is how cookies are automatically passed in a browser) whenever you make an API call.</p>\n<p>Note that session-ids do expire, and you will need to update these regularly or finding a way of retrieving a new one automatically as necessary.</p>\n<p><strong>tradingpost outputs:</strong></p>\n<ul>\n\t<li><a href=\"https://tradingpost-live.ncplatform.net/ws/search.json\">https://tradingpost-live.ncplatform.net/ws/search.json</a><br>\nThis output is the one that does the majority of functions on the TP.  By default it won’t return anything as it requires a combination of different parameters depending on what you are trying to accomplish.</li>\n\t<li>?text=&amp;levelmin=0&amp;levelmax=80<br>\nThis combination will return a list of all the items along with their buy and sell listings and prices.  By default this only returns 10 items at a time, but this is adjustable by the count= parameter. If count=0 it will return all of the items in the list.  The offset= parameter starts the listing based on that number in the list (1 is the first item) The text= can be filled in to filter by the item name, but leaving it blank is still valid.  levelmin and levelmax require valid numbers to be entered.  Other filters that are optional are removeunavailable=true, rarity=, type=, and subtype= (these last 3 require their numeric representation, not characters).  <strong>WARNING: This can pull in ALL ITEMS and can take a long time to run and take a great deal of memory to process</strong></li>\n\t<li>?text=text&amp;typeahead=1<br>\nThis combination returns just the type, id, and name of an item.  This is what is called when you type something into the search box and it gives you a list of items.  It requires some sort of text to be entered to work. The count=0 trick works on this as well, and you can use offset= as well.  Optional parameters levelmin, levelmax, removeunavailable, rarity, type, and subtype all function the same as above.</li>\n\t<li>?ids=27321,24354<br>\nThis allows you to enter a comma delimited list of item ids (up to 250) and pull in the same info as you do from the first set of parameters.  All of the other parameters are rendered inoperable when this parameter is specified.</li>\n</ul>\n<p>Continued in next post…</p>","arenanet":false}]}