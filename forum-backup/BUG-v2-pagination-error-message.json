{"title":"[BUG] v2 pagination error message","pubDate":"2014-09-26T20:44:42.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/BUG-v2-pagination-error-message","comments":[{"pubDate":"2014-09-29T18:15:02.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/BUG-v2-pagination-error-message/4453650","author":"Pat Cavit.9234","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on September 29 2014 03:42PM\"><a href=\"/forum/community/api/BUG-v2-pagination-error-message/4453290\">Dr Ishmael.9685:</a></cite></div><div class=\"quotey\"><p><a href=\"https://forum-en.guildwars2.com/forum/community/api/Return-proper-error-codes/first#post2961806\">https://forum-en.guildwars2.com/forum/community/api/Return-proper-error-codes/first#post2961806</a></p>\n<p>API v1 was originally using non-informative HTTP codes, so I wrote my module to look at the returned JSON instead.  I never bothered updating it after Stefan’s changes because my method “just worked.”  I guess I’ll have to update now.</p></div></blockquote>\n<p>I can’t possible disagree more with your proposal in that thread, sorry. Errors should always return the most-appropriate HTTP error status code in the response. Extra information kittentainly come back in the response body (and we need to do better standardizing those) but the status code should always be the very first thing any consumer checks once a response is received.</p>","arenanet":true},{"pubDate":"2014-09-29T15:42:02.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/BUG-v2-pagination-error-message/4453290","author":"Dr Ishmael.9685","body":"\n<p><a href=\"https://forum-en.guildwars2.com/forum/community/api/Return-proper-error-codes/first#post2961806\">https://forum-en.guildwars2.com/forum/community/api/Return-proper-error-codes/first#post2961806</a></p>\n<p>API v1 was originally using non-informative HTTP codes, so I wrote my module to look at the returned JSON instead.  I never bothered updating it after Stefan’s changes because my method “just worked.”  I guess I’ll have to update now.</p>","arenanet":false},{"pubDate":"2014-09-27T06:28:04.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/BUG-v2-pagination-error-message/4448713","author":"StevenL.3761","body":"\n<p>The error code is useful to determine which parameter was invalid.</p>\n<p>10  = invalid identifier<br>\n90 = invalid language</p>\n<p>You could then use that information to do things like display localized error information, which is useful because error responses are always in English regardless of the given ‘lang’ parameter.</p>","arenanet":false},{"pubDate":"2014-09-26T23:34:08.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/BUG-v2-pagination-error-message/4448250","author":"Pat Cavit.9234","body":"\n<p>Why aren’t you using the HTTP response code to check for errors?</p>\n<p>Those errors are coming from different levels/servers, so it’s not super surprising they’re different. We can take a look at standardizing but you should always use the HTTP status code first and foremost.</p>","arenanet":true},{"pubDate":"2014-09-26T20:44:42.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/BUG-v2-pagination-error-message/4447996","author":"Dr Ishmael.9685","body":"\n<p>I found a bug with the errors returned for bad pagination requests – they don’t match the “standard” format returned for other errors.<br>\nPagination errors:</p>\n<pre><code>{\"text\":\"page out of range. Use page values 0 - 191.\"}\n{\"text\":\"page_size out of range. Use page_size values 1 - 200.\"}</code></pre>\n<p>Standard errors:</p>\n<pre><code>{\"error\":10,\"product\":0,\"module\":2,\"line\":427,\"text\":\"invalid item_id\"}\n{\"error\":90,\"product\":71,\"module\":2,\"line\":378,\"text\":\"CnConn: language not supported\"}</code></pre>\n<p>My v1 code was relying on the presence of the “error” attribute to detect request errors. Would it be possible to standardize the pagination errors – at least give them an “error” attribute?</p>","arenanet":false}]}