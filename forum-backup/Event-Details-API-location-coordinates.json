{"title":"Event Details API location coordinates","pubDate":"2013-06-22T11:41:51.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates","comments":[{"pubDate":"2014-01-25T00:15:36.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/3546948","author":"The Last Engineer.6492","body":"\n<p>Hi all,</p>\n<p>- positionPoint  is x,y event center location.<br>\n- positionToPixelRatio : 1/24</p>\n<p>- <strong>Mumble</strong> : use left handed coordinate system, you have to use the x,z coordinates (not x,y). The x,y,z coords are in meter so you have to convert it to inches knowing that 1 meter = 39.3700787 inches.</p>\n<p><strong>According to Cliff :</strong></p>\n<blockquote><div class=\"quotey\"><p>Some implementation notes:<br>\nThe coordinate system used by mumble is slightly different than the game. GW2 uses inches (don’t ask), but mumble uses meters. So you’ll need to convert the coordinates back to inches for use with the map API.</p></div></blockquote>\n<p>The coordinates in inches are : {x*39.3700787, z*39.3700787}. After that, you may apply these expressions below :</p>\n<p>(these expressions can be used for mumble and events)</p>\n<p><strong>xPixelCoord</strong> = ContinentRectangle [ 0 ] [ 0 ] + (positionPoint.X – MapRectangle [ 0 ][ 0 ]) * poistionToPixelRatio</p>\n<p><strong>yPixelCoord</strong> = ContinentRectangle[ 0 ] [ 1 ] + (MapRectangle [ 1 ] [ 1 ] – positionPoint.Y) * poistionToPixelRatio</p>\n<p><strong>LatLng</strong> = FromPixelToCoordinate(xPixelCoord , yPixelCoord, maxZoomLevel)</p>\n<p>If you need the current map zoom. You have to apply a projection.<br>\nYou need the continent’s MaxZoom level and you can compute the projection like this :<br>\n- <strong>DeltaZoom</strong> : Continent’s max zoom level – current map Zoom.<br>\n- <strong>Projection</strong> : 2^(DeltaZoom).<br>\n- XPixelCoord  = XPixelCoord   / Projection, YPixelCoord  = YPixelCoord   / Projection</p>","arenanet":false},{"pubDate":"2013-07-05T19:01:28.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2355531","author":"smiley.1438","body":"\n<p>SICK KITTEN!</p>\n<p><a href=\"http://gw2.chillerlan.net/examples/gw2maps-jquery.html\">http://gw2.chillerlan.net/examples/gw2maps-jquery.html</a></p>\n<p>:D</p>\n<blockquote><div class=\"citey\"><cite title=\"Posted on June 22 2013 04:35PM\"><a href=\"/forum/community/api/Event-Details-API-location-coordinates/2262702\">zeeZ.5713:</a></cite></div><div class=\"quotey\"><p>IAll condensed in one ugly block of code so I don’t have to look at it so much</p></div></blockquote>\n<p>Ugly function is ugly:<br>\n</p><pre><code>function recalcEventCoords(cr, mr, p){ // continent_rect, map_rect, point\n\treturn [(cr[0][0]+(cr[1][0]-cr[0][0])*(p[0]-mr[0][0])/(mr[1][0]-mr[0][0])),(cr[0][1]+(cr[1][1]-cr[0][1])*(1-(p[1]-mr[0][1])/(mr[1][1]-mr[0][1])))]\n}</code></pre><p></p>","arenanet":false},{"pubDate":"2013-07-04T22:55:58.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2350707","author":"murven.7581","body":"\n<p>Oh, and I agree that the lack of consistency in the coordinate systems is puzzling, especially given the fact that the exact same API where you get map_rect and continent_rect you also get coordinates already in their absolute representation for the continent, while the event details API has coordinates which depend on rectangles which are not even present there.</p>\n<p>Anyway, it is what it is and we just have to know how it works. Thanks for all the clarification.</p>","arenanet":false},{"pubDate":"2013-07-04T22:46:20.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2350672","author":"murven.7581","body":"\n<p>Thanks, I finally got it! My math was working at some point, but the inverted nature of the Y axis was causing me troubles as well and I just couldn’t understand why it was so close, but still wrong. By now I know by heart where on the map Barthol’s event starts and my little pointer was not in the sweet spot. Then I did the (1-delta) and voila!! That is exactly where Barthol sits waiting for you go talk to him!</p>\n<p>Thank you very much, I really appreciate the time you took to explain what continent_rect meant. I just never figured out that continent_rect and map_rect were exactly the same rectangle within different coordinate systems.</p>","arenanet":false},{"pubDate":"2013-07-04T21:50:54.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2350415","author":"smiley.1438","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on July 04 2013 09:42PM\"><a href=\"/forum/community/api/Event-Details-API-location-coordinates/2350376\">zeeZ.5713:</a></cite></div><div class=\"quotey\"><p>To figure out where something is on the continent you need to know their place within map_rect on the map, then fit map_rect inside continent_rect on the continent.</p></div></blockquote>\n<p>In fact we wouldn’t need to mess around with the map_rect at all if the data was consistent. Why can’t the events in the event_details.json have absolute coordinates like the POIs ’n stuff in the floor.json?</p>\n<p>(i have currently ~400 <a href=\"https://github.com/codemasher/gw2api-tools/blob/9f5d2edd105ec535b248919de231a3c611a82f09/js/gw2maps-jquery.js#L176\">extra</a> lines of <a href=\"https://github.com/codemasher/gw2api-tools/blob/9f5d2edd105ec535b248919de231a3c611a82f09/js/gw2maps-jquery.js#L488\">code</a> just to clean up the inconsitent mess of the API o.O)</p>","arenanet":false},{"pubDate":"2013-07-04T21:42:06.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2350376","author":"zeeZ.5713","body":"\n<p>I made a silly picture<img src=\"/include/images/smilies/colondee.png\"></p>\n<p>All events are within map_rect of their respective map.<br>\nAll maps are within continent_rect of their continent.</p>\n<p>To figure out where something is on the continent you need to know their place within map_rect on the map, then fit map_rect inside continent_rect on the continent.</p>","arenanet":false},{"pubDate":"2013-07-04T21:33:06.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2350326","author":"smiley.1438","body":"\n<p>continent_rect (and clamped_view) are the map bounds corners in absolute pixels within the worldmap (usually given by the texture_dims), where x/y 0 is the top left corner.</p>\n<p>see <a href=\"https://github.com/codemasher/gw2api-tools/blob/9f5d2edd105ec535b248919de231a3c611a82f09/js/gw2maps-jquery.js#L131\">that part of my parser</a> for the use of that.</p>\n<p>For the map_rect see a few postings above<img src=\"/include/images/smilies/wink.png\"></p>","arenanet":false},{"pubDate":"2013-07-04T21:13:36.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2350222","author":"murven.7581","body":"\n<p>I guess I am not fully understanding what map_rect and continent_rect are in the map_floor API.</p>\n<p>In my mind, content_rect should always be [[0,0],[32768,32768]], but for Queensdale it is [[9856,11648],[13440,14080]].</p>\n<p>I know I am looking at this from the wrong perspective, but I need to understand how and why. If anyone has any guidance I would really appreciate it.</p>","arenanet":false},{"pubDate":"2013-06-29T22:25:03.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2318071","author":"smiley.1438","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on June 27 2013 12:58AM\"><a href=\"/forum/community/api/Event-Details-API-location-coordinates/2297046\">The Last Engineer.6492:</a></cite></div><div class=\"quotey\"><p>you can do this as below : <br>\n</p><pre><code>\nlongitude = (coord[0] - 16384) / (32768 / 360);\nlatitude = 2 * arctan( e ^ ( ( coord[1] - 16384 ) / -(32768 / (2 * PI)) ) - PI / 2 ) * (180/PI);\n</code></pre><p></p></div></blockquote>\n<p>Thanks so much for this, i got it working now – the hint about the map size was essential, but a few missing brackets made me crazy…<img src=\"/include/images/smilies/colondee.png\"></p>\n<p><a href=\"http://gw2.chillerlan.net/examples/gw2maps-gmaps-simple.html\">http://gw2.chillerlan.net/examples/gw2maps-gmaps-simple.html</a></p>\n<p>so it looks like this now:</p>\n<pre><code>function fromPointToLatLng(point, max_zoom) {\n\tvar size = (1 &lt;&lt; max_zoom) * 256,\n\t\tlat = (2 * Math.atan(Math.exp((point.y - size/2) / -(size/(2 * Math.PI)))) - (Math.PI / 2)) * (180/Math.PI),\n\t\tlng = (point.x - size/2) * (360/size);\n\treturn new google.maps.LatLng(lat, lng);\n}\n\n</code></pre>\n<p>and LatLng to pixel conversion:</p>\n<pre><code>function fromLatLngToPoint(ll, max_zoom){\n\tvar point = new google.maps.Point(0, 0),\n\t\torigin = new google.maps.Point(128, 128),\n\t\ttiles = 1 &lt;&lt; max_zoom,\n\t\tbound = function(value, min, max){\n\t\t\tif (min != null) value = Math.max(value, min);\n\t\t\tif (max != null) value = Math.min(value, max);\n\t\t\treturn value;\n\t\t},\n\t\tsin_y = bound(Math.sin(ll.lat() * (Math.PI / 180)), -0.9999, 0.9999);\n\tpoint.x = origin.x + ll.lng() * (256 / 360);\n\tpoint.y = origin.y + 0.5 * Math.log((1 + sin_y) / (1 - sin_y)) * -(256 / (2 * Math.PI));\n\treturn new google.maps.Point(Math.floor(point.x * tiles), Math.floor(point.y * tiles));\n}\n\n\n</code></pre>","arenanet":false},{"pubDate":"2013-06-27T01:25:03.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2297183","author":"jefe.2705","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on June 26 2013 11:23PM\"><a href=\"/forum/community/api/Event-Details-API-location-coordinates/2296497\">The Last Engineer.6492:</a></cite></div><div class=\"quotey\"><p>Event info :<br>\n\t“location”: “type” : “poly”, \" center \" : [ xxx ,  xxx ,  xxx ]  … <br>\n\t<br>\n\tMap info :<br>\n\t“map_rect”: [ [ xxx, xxx ], [ xxx, xxx ] ] …<br>\n\t“continent_rect”:[ [ xxx,xxx ],[ xxx , xxx ] ] …</p>\n<p>Map Event location :<br>\n\t<br>\n\tevent_center_x = location.center [ 0 ] ;<br>\n\tevent_center_y = location.center [ 1 ] ;<br>\n\t<br>\n\tpercentageX = (event_center_x – map_rect [ 0 ] [ 0 ] ) / (map_rect [ 1 ] [ 0 ] – map_rect [ 0 ] [ 0 ] );<br>\n\tpercentageY = 1-(event_center_y – map_rect [ 0 ] [ 1 ] ) / (map_rect [ 1 ] [ 1 ] – map_rect [ 0 ] [ 1 ] );<br>\n\t<br>\n\tcontinentX = (continent_rect [ 0 ] [ 0 ] + (continent_rect [ 1 ] [ 0 ] – continent_rect [ 0 ] [ 0 ] ) * percentageX);<br>\n\tcontinentY = (continent_rect [ 0 ] [ 1 ] + (continent_rect [ 1 ] [ 1 ] – continent_rect [ 0 ] [ 1 ] ) * percentageY);<br>\n\t<br>\n\t// the coords for the event<br>\n\tevent_coords = FromPixelToCoords([continentX, continentY], map.GetMaxZoom()); // map.GetMaxZoom() is set to 7 for Gw2 Map</p></div></blockquote>\n<p>Thank you, this was exactly what I was looking for</p>","arenanet":false},{"pubDate":"2013-06-27T00:58:53.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2297046","author":"The Last Engineer.6492","body":"\n<p>the pixel globe size is provided by the Gw2 API.<br>\nThat’s the texture_dims defined in v1/map_floor.json?continent_id=1&amp;floor=1</p>\n<pre><code>\n\"texture_dims\": [32768, 32768]\n</code></pre>\n<p>you are able to compute it by doing that :</p>\n<pre><code>\npixelTileSize = 256\npixelGlobeSize = pixelTileSize * (2 ^ 7) = 32768 (7 is the max zoom level).\nPixelGlobeCenter = [16384, 16384]  ( [32768/2, 32768/2] )\n</code></pre>\n<p>For the location : </p><pre><code> \"coord\":[19765.9,16239.2] </code></pre><p></p>\n<p>you can do this as below :</p>\n<pre><code>\nlongitude = (coord[0] - 16384) / (32768 / 360);\nlatitude = (2 * arctan(  e^( (coord[1] - 16384) / -(32768 / (2 * PI))))- PI / 2) * (180/PI);\n</code></pre>\n<p>Details :</p>\n<pre><code>\ncoord[x, y] is the item location.\n\ndegreesToRadiansRatio = 180/PI\npixelTileSize = 256\npixelGlobeSize = pixelTileSize * 2^maxZoomLevel\nXPixelsToDegreesRatio = pixelGlobeSize / 360\nYPixelsToRadiansRatio = pixelGlobeSize / (2 * PI)\npixelGlobeCenter = [pixelGlobeSize /2, pixelGlobeSize /2]\n\nxDiff = coord[0] - pixelGlobeCenter[0]\nyDiff = coord[1] - pixelGlobeCenter[1]\n\nlongitude = xDiff / XPixelsToDegreesRatio\nlatitude = (2 * arctan(e^(yDiff  / -YPixelsToRadiansRatio)) - PI / 2) * degreesToRadiansRatio\n</code></pre>","arenanet":false},{"pubDate":"2013-06-26T23:52:18.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2296674","author":"smiley.1438","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on June 26 2013 10:52PM\"><a href=\"/forum/community/api/Event-Details-API-Coords/2296303\">Dr Ishmael.9685:</a></cite></div><div class=\"quotey\"><p>The third number is the Z-coordinate, which doesn’t matter for plotting on a 2D map.</p></div></blockquote>\n<p>Isn’t that the center of the sphere (if applies) so that you would draw a spherical segment on the map?</p>\n<blockquote><div class=\"citey\"><cite title=\"Posted on June 26 2013 11:40PM\"><a href=\"/forum/community/api/Event-Details-API-Coords/2296599\">The Last Engineer.6492:</a></cite></div><div class=\"quotey\"><p>This is a short sample to convert Pixel To coordinates</p></div></blockquote>\n<p>If you work with leaflet.js, the similar methods are L.Map.project() and L.Map.unproject() btw. <a href=\"http://leafletjs.com/reference.html#map-conversion-methods\">http://leafletjs.com/reference.html#map-conversion-methods</a></p>\n<p>While we’re at it: i’m trying to do the same with the gmaps API – they have a simple example there. However, translating latlng to pixel works fine with that, but i believe i’m too dumb to figure out how to translate back from pixel to latlng – the example function doesn’t seem to work as expected. There are a gazillion threads on the net, asking how that works, most answers are just RTFM like or “yay, solved!” with no comment on the final solution.</p>\n<p>So, anyone please?</p>\n<p><a href=\"https://developers.google.com/maps/documentation/javascript/examples/map-coordinates\">https://developers.google.com/maps/documentation/javascript/examples/map-coordinates</a></p>","arenanet":false},{"pubDate":"2013-06-26T23:40:37.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2296599","author":"The Last Engineer.6492","body":"\n<p>This is a short sample to convert Pixel To coordinates :</p>\n<pre><code>\npublic class APIProjection\n    {\n        private readonly double PixelTileSize = 256d;\n        private readonly double DegreesToRadiansRatio = 180d / Math.PI;\n        private readonly Point PixelGlobeCenter;\n        private readonly double XPixelsToDegreesRatio;\n        private readonly double YPixelsToRadiansRatio;\n\n        public APIProjection(double zoomLevel)\n        {\n            var pixelGlobeSize = this.PixelTileSize * Math.Pow(2d, zoomLevel);\n            this.XPixelsToDegreesRatio = pixelGlobeSize / 360d;\n            this.YPixelsToRadiansRatio = pixelGlobeSize / (2d * Math.PI);\n            var halfPixelGlobeSize = Convert.ToSingle(pixelGlobeSize / 2d);\n            this.PixelGlobeCenter = new Point(\n                halfPixelGlobeSize, halfPixelGlobeSize);\n        }\n\n        public Location FromPixelToCoordinates(Point pixel)\n        {\n            var longitude = (pixel.X - this.PixelGlobeCenter.X) /\n                this.XPixelsToDegreesRatio;\n            var latitude = (2 * Math.Atan(Math.Exp(\n                (pixel.Y - this.PixelGlobeCenter.Y) / -this.YPixelsToRadiansRatio))\n                - Math.PI / 2) * DegreesToRadiansRatio;\n            return new Location(\n                Convert.ToSingle(latitude),\n                Convert.ToSingle(longitude));\n        }\n    }\n</code></pre>","arenanet":false},{"pubDate":"2013-06-26T23:23:52.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2296497","author":"The Last Engineer.6492","body":"\n<p>Event info :<br>\n\t“location”: “type” : “poly”, \" center \" : [ xxx ,  xxx ,  xxx ]  … <br>\n\t<br>\n\tMap info :<br>\n\t“map_rect”: [ [ xxx, xxx ], [ xxx, xxx ] ] …<br>\n\t“continent_rect”:[ [ xxx,xxx ],[ xxx , xxx ] ] …</p>\n<p>Map Event location :<br>\n\t<br>\n\tevent_center_x = location.center [ 0 ] ;<br>\n\tevent_center_y = location.center [ 1 ] ;<br>\n\t<br>\n\tpercentageX = (event_center_x – map_rect [ 0 ] [ 0 ] ) / (map_rect [ 1 ] [ 0 ] – map_rect [ 0 ] [ 0 ] );<br>\n\tpercentageY = 1-(event_center_y – map_rect [ 0 ] [ 1 ] ) / (map_rect [ 1 ] [ 1 ] – map_rect [ 0 ] [ 1 ] );<br>\n\t<br>\n\tcontinentX = (continent_rect [ 0 ] [ 0 ] + (continent_rect [ 1 ] [ 0 ] – continent_rect [ 0 ] [ 0 ] ) * percentageX);<br>\n\tcontinentY = (continent_rect [ 0 ] [ 1 ] + (continent_rect [ 1 ] [ 1 ] – continent_rect [ 0 ] [ 1 ] ) * percentageY);<br>\n\t<br>\n\t// the coords for the event<br>\n\tevent_coords = FromPixelToCoords([continentX, continentY], map.GetMaxZoom()); // map.GetMaxZoom() is set to 7 for Gw2 Map</p>","arenanet":false},{"pubDate":"2013-06-26T22:57:10.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2296337","author":"jefe.2705","body":"\n<p>Thanks for the equation, can you provide an example of it being used as I’m having a hard time assigning variables to known numbers?</p>","arenanet":false},{"pubDate":"2013-06-26T22:52:08.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2296303","author":"Dr Ishmael.9685","body":"\n<p>Covered over here:</p>\n<p><a href=\"https://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/first#post2265375\">https://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/first#post2265375</a></p>\n<p>The third number is the Z-coordinate, which doesn’t matter for plotting on a 2D map.</p>","arenanet":false},{"pubDate":"2013-06-26T22:43:45.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2296240","author":"jefe.2705","body":"\n<p>Looking through the Event Details API the coordinate system used is different then the one used by the Map API coordinates.  Is there a conversion equation/system to convert the coordinates given in the Event Details API to the one used by the Map API coordinates?</p>\n<p>Example:<br>\n[-9463.6,<br>\n-40310.2,<br>\n-785.799]</p>\n<p>to something like</p>\n<p>[20002.2,<br>\n16128.5]</p>\n<p>(a random event coord and a random POI coord used as examples)</p>\n<p>Thanks for any help</p>","arenanet":false},{"pubDate":"2013-06-23T03:20:59.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2265375","author":"Dr Ishmael.9685","body":"\n<p>On caveat that I forgot about, ozma caught me on it in a PM: the Y coordinates are inverted between map and continent.  So you have to take the complement of the delta ( 1 – delta ) in the Y equation.</p>\n<p>This attachment shows just the final equations for X and Y without the derivation I showed above.</p>\n<p>(How do you show an image inside your post?  The IMG tags don’t seem to work.)</p>","arenanet":false},{"pubDate":"2013-06-22T16:35:52.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2262702","author":"zeeZ.5713","body":"\n<p>I was using a numpy matrix, but even if I only built it once per map your pile of random characters is a lot faster.</p>\n<p>All condensed in one ugly block of code so I don’t have to look at it so much:</p>\n<pre><code>\ndef continent_coords(continent_rect, map_rect, point, game=False):\n    return (\n        (point[0]-map_rect[0][0])/(map_rect[1][0]-map_rect[0][0])*(continent_rect[1][0]-continent_rect[0][0])+continent_rect[0][0],\n        ((-point[1] if game else point[1])-map_rect[0][1])/(map_rect[1][1]-map_rect[0][1])*(continent_rect[1][1]-continent_rect[0][1])+continent_rect[0][1]\n    )</code></pre>","arenanet":false},{"pubDate":"2013-06-22T16:17:04.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2262616","author":"Dr Ishmael.9685","body":"\n<p>Yep, you’re using the exact same equations I posted.</p>","arenanet":false},{"pubDate":"2013-06-22T15:39:03.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2262469","author":"Goddchen.4958","body":"\n<p>Got it working by doing some percentage calulcations to calculate the continent coordinates from the map coordinates:<br>\n<a href=\"https://github.com/Goddchen/GuildWars2-API-Explorer/blob/master/GuildWars2APIExplorer/src/main/java/de/goddchen/android/gw2/api/fragments/ContinentFragment.java#L132\">https://github.com/Goddchen/GuildWars2-API-Explorer/blob/master/GuildWars2APIExplorer/src/main/java/de/goddchen/android/gw2/api/fragments/ContinentFragment.java#L132</a></p>","arenanet":false},{"pubDate":"2013-06-22T15:00:31.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2262330","author":"Dr Ishmael.9685","body":"\n<p>It’s basic algebra and coordinate translation.</p>","arenanet":false},{"pubDate":"2013-06-22T14:24:34.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2262227","author":"Healix.5819","body":"\n<p>Those coordinates ([-28975, 27321.2, -785.732]) look like what the in-game coordinates look like.</p>\n<p>In-game, coordinates are calculated from the center of the map, where a negative on the Z axis is above sea level (Z is jumping). Moving West from the center of the map is negative on the X axis and moving South from the center of the map is negative on the Y axis. This is why there are negative coordinates.</p>\n<p>The map_rect appears to be the [south east corner], [north west corner] coordinates. From what I’ve recorded, Queensdale is around that size (86016w, 58368h). Using map_rect, you can find the center and from that, place the event coordinate.</p>\n<p>The continent_rect appears to be [x, y], [x + width, y + height] in pixels based on the world map when fully zoomed in. Using this, you should be able to calculate the center along with map_rect to place the coordinate on the map.</p>\n<p>I haven’t played with these APIs yet, so I’m judging everything based on the Queensdale example above, and what I’ve personally recorded using in-game coordinates.</p>","arenanet":false},{"pubDate":"2013-06-22T12:34:38.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2261860","author":"zeeZ.5713","body":"\n<p>Yes, math hard. Cliff?<img src=\"/include/images/smilies/colondee.png\"></p>","arenanet":false},{"pubDate":"2013-06-22T12:33:53.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2261856","author":"smiley.1438","body":"\n<p>Yep, thats the impression i have too after further investigation:</p>\n<pre><code>15: {\n\tmap_name: \"Queensdale\",\n\tmin_level: 1,\n\tmax_level: 17,\n\tdefault_floor: 1,\n\tfloors: [0, 1, 2],\n\tregion_id: 4,\n\tregion_name: \"Kryta\",\n\tcontinent_id: 1,\n\tcontinent_name: \"Tyria\",\n\tmap_rect: [\n\t\t[-43008, -27648],\n\t\t[43008, 30720]\n\t],\n\tcontinent_rect: [\n\t\t[9856, 11648],\n\t\t[13440, 14080]\n\t]\n}\n\n\nD77349CE-E422-469E-905B-827AA138D88F: {\n\tname: \"Stop the elder earth elemental from destroying the dam.\",\n\tlevel: 4,\n\tmap_id: 15,\n\tflags: [ ],\n\tlocation: {\n\t\ttype: \"sphere\",\n\t\tcenter: [-28975, 27321.2, -785.732],\n\t\tradius: 2000,\n\t\trotation: 0\n\t}\n}\n\n\n</code></pre>\n<p>….but: currently i don’t use the map_rect at all, nor do i have an idea how to translate the coords :o</p>","arenanet":false},{"pubDate":"2013-06-22T12:27:03.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2261830","author":"zeeZ.5713","body":"\n<p>Currently I’m under the impression that those coordinates are supposed to be inside <em>map_rect</em>, which sits inside <em>continent_rect</em> on the map, but I didn’t put a lot of effort into trying to verify that (None)</p>","arenanet":false},{"pubDate":"2013-06-22T12:19:15.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2261812","author":"smiley.1438","body":"\n<p>Hmm, the points in the event details are actually weird. My first thought was that these are relative values, but this wouldn’t make sense too.</p>","arenanet":false},{"pubDate":"2013-06-22T11:41:51.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/2261713","author":"Goddchen.4958","body":"\n<p>Hey everyone,</p>\n<p>I’m kind of confused by the event details API’s center coordinates.</p>\n<p>For example I get:</p>\n<p>“center”:<br>\n[-9463.6,<br>\n-40310.2,<br>\n-785.799]</p>\n<p>But the continent itself only has a dimension of 32768×32768 pixels.</p>\n<p>Doesn’t make much sense to me<img src=\"/include/images/smilies/sad.png\"></p>\n<p>Could someone please explain those coordinates?</p>","arenanet":false}]}