{"title":"Preferred Language","pubDate":"2014-09-14T11:18:17.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Preferred-Language","comments":[{"pubDate":"2014-09-14T21:42:09.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Preferred-Language/4412485","author":"StevenL.3761","body":"\n<p>I’ll put in multiple layers of settings. From high to low priority : user defined language -&gt; Local.dat language (if file is present and in a known format) -&gt; system language (if supported) -&gt; default language (English).</p>\n<p>Still need to figure out the format first. It’s more complicated than I thought at first.</p>","arenanet":false},{"pubDate":"2014-09-14T16:22:23.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Preferred-Language/4411648","author":"Alcarin.9024","body":"\n<p>Don’t trust local.dat, you don’t know if the position or the coding of the language could change tomorrow. In that case you need to stay up-to-date with current local.dat format, maybe it never change, maybe you need to update your application every 2 weeks or every feature packs.<br>\nI think that the best solution could be detect system language, and if the system language is one of the GW2 “known language” use it, otherwise use English.</p>\n<p>I agree with smiley, in any case you should allow the user to overwrite any detected language.</p>","arenanet":false},{"pubDate":"2014-09-14T15:23:06.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Preferred-Language/4411508","author":"smiley.1438","body":"\n<p><a href=\"https://github.com/rhoot/Gw2Browser\">*hint hint*</a></p>","arenanet":false},{"pubDate":"2014-09-14T15:16:44.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Preferred-Language/4411492","author":"StevenL.3761","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on September 14 2014 03:04PM\"><a href=\"/forum/community/api/Preferred-Language/4411462\">smiley.1438:</a></cite></div><div class=\"quotey\"><p>So: i’d say you can’t without violating the EULA. Since GW2 doesn’t store the settings in the windows registry but most likely in the /appdata/roaming/Guild Wars 2/Local.dat. So you’d have to find the setting in there or might hook into the game to find out. (But i guess you know that anyway)</p></div></blockquote>\n<p>Actually I didn’t know that, but I’ll look into it. If Local.dat is really where the language setting is stored, I should be able to find it by checking which bytes change when I change my language setting.</p>\n<p><strong>edit</strong> : thanks, it worked.</p>","arenanet":false},{"pubDate":"2014-09-14T15:04:05.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Preferred-Language/4411462","author":"smiley.1438","body":"\n<p>So: i’d say you can’t without violating the EULA. Since GW2 doesn’t store the settings in the windows registry but most likely in the /appdata/roaming/Guild Wars 2/Local.dat. So you’d have to find the setting in there or might hook into the game to find out. (But i guess you know that anyway)</p>","arenanet":false},{"pubDate":"2014-09-14T14:56:30.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Preferred-Language/4411443","author":"StevenL.3761","body":"\n<p>So that brings me back to my original question: can I detect the user’s in-game language setting somehow? That way, they can set my app’s language by changing their in-game language. And it will always be a valid value.</p>","arenanet":false},{"pubDate":"2014-09-14T14:53:42.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Preferred-Language/4411435","author":"smiley.1438","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on September 14 2014 02:47PM\"><a href=\"/forum/community/api/Preferred-Language/4411424\">StevenL.3761:</a></cite></div><div class=\"quotey\"><p>Why shouldn’t I detect the system language in order to provide a better user experience?</p></div></blockquote>\n<p>Why do “developers” always think that a “better user experience” is to withdraw control from the user? Just give them a choice.</p>\n<blockquote><div class=\"citey\"><cite title=\"Posted on September 14 2014 02:47PM\"><a href=\"/forum/community/api/Preferred-Language/4411424\">StevenL.3761:</a></cite></div><div class=\"quotey\"><p>(zh is a valid language code for v2, but not v1.)</p></div></blockquote>\n<p>Ok, i’ve confused the country code with the language code. However, you know the valid values and you can check them any time.</p>","arenanet":false},{"pubDate":"2014-09-14T14:47:14.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Preferred-Language/4411424","author":"StevenL.3761","body":"\n<p>Why shouldn’t I detect the system language in order to provide a better user experience?</p>\n<p>(zh is a valid language code for v2, but not v1.)</p>","arenanet":false},{"pubDate":"2014-09-14T14:44:09.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Preferred-Language/4411417","author":"smiley.1438","body":"\n<p>Of course there is a way to determine the language of the content. You know that the v1 API i will return data in exactly 4 languages: “en”, “de”, “es” and “fr” while “en” is default. So any other values than these 4 will most likely return english. Always.<br>\nThat a systems language might not be supported is not a problem of the API and you shouldn’t even consider do detect it to determine it to set the API-language.</p>\n<p>(zh isn’t even a valid language code, so this might cause the error – it would be cn-zh)</p>","arenanet":false},{"pubDate":"2014-09-14T14:24:54.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Preferred-Language/4411368","author":"StevenL.3761","body":"\n<p>It does make sense. Observe the differences between the response data for all of these:</p>\n<p><a href=\"https://api.guildwars2.com/v1/event_names.json\">https://api.guildwars2.com/v1/event_names.json</a><br>\n<a href=\"https://api.guildwars2.com/v1/event_names.json?lang=en\">https://api.guildwars2.com/v1/event_names.json?lang=en</a><br>\n<a href=\"https://api.guildwars2.com/v1/event_names.json?lang=de\">https://api.guildwars2.com/v1/event_names.json?lang=de</a><br>\n<a href=\"https://api.guildwars2.com/v1/event_names.json?lang=ru\">https://api.guildwars2.com/v1/event_names.json?lang=ru</a><br>\n<a href=\"https://api.guildwars2.com/v1/event_names.json?lang=zh\">https://api.guildwars2.com/v1/event_names.json?lang=zh</a></p>\n<p>Responses: en → en → de → en → error</p>\n<p>There is no way to accurately determine which language is actually returned (other than analyzing the value of the “name” property using some advanced language detection algorithm).</p>\n<p>The only solution for now is to limit allowed values to values that are known to work. Which brings us back to the original problem: the system language might not be supported.</p>","arenanet":false},{"pubDate":"2014-09-14T14:11:44.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Preferred-Language/4411337","author":"smiley.1438","body":"\n<p>Seriously, the Content-Language header doesn’t make any sense at all. The default language is always english as you already noticed and will only change if requested.</p>\n<p>So if you request ?lang=de, the content language won’t be “cn”. Also, i highly doubt that anyone would do any changes to the v1 API now that it has basically reached end-of-life.</p>","arenanet":false},{"pubDate":"2014-09-14T11:18:18.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Preferred-Language/4410933","author":"StevenL.3761","body":"\n<p>Is there a way to figure out the user’s in-game “Text Language” setting somehow? I’m afraid to go by the current system’s settings, because those include unsupported languages.</p>\n<p>If the answer is no, could a dev please update /v1 to include Content-Language headers in the response? The API data defaults to English when the value of the “lang” parameter is invalid. That’s fine, but it should be reflected in the response when it happens.</p>","arenanet":false}]}