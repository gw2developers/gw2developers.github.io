<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>[API Suggestion] Event Details</title>
  <meta name="description" content="Learn how to use the GW2 API.">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="/forum-backup/API-Suggestion-Event-Details/">
  <link rel="alternate" type="application/rss+xml" title="GW2 Developers" href="/feed.xml">
  
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-106748097-1', 'auto');
  ga('send', 'pageview');

</script>
  

  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    
    
    <a class="site-title" href="/"><img src="/assets/images/logo.svg"></a>
  
    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
          
            
            
            <a class="page-link" href="/forum-backup/">Forum Backup</a>
            
          
            
            
            <a class="page-link" href="/guides/">Guides</a>
            
          
            
            
          
            
            
          
            
            
          
        </div>
      </nav>
    
  </div>
</header>

    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">[API Suggestion] Event Details</h1>
  </header>

  <div class="post-content">
    


<p class="post-meta">
    Original Url: http://forum-en.guildwars2.com/forum/community/api/API-Suggestion-Event-Details
</p>



<h2 id="">smiley.1438:</h2>
<p class="post-meta">
    <time datetime="2013-06-22T09:00:13+00:00">
        22 Jun 2013
    </time>
</p>
<p>
<p>Before i start working with these: please group the events by map_id if possible. (It’s already a pain in the kitteh to write workarounds for getting a poi by id in the maps API. I don’t like workarounds – i like usable data<img src="/include/images/smilies/wink.png"> )</p></p>

<h2 id="">ozma.3498:</h2>
<p class="post-meta">
    <time datetime="2013-06-22T10:20:54+00:00">
        22 Jun 2013
    </time>
</p>
<p>
<p>And on the subject of event details, it would be nice to see event_type (so apps can show the correct icon next to the event name without having to scrape the wiki for this information), as well as a flag for whether or not it’s a group event. It would also be nice to have details about which sub-region of the zone the event occurs in, although I’m not confident that this data would be easy to add to the API.</p></p>

<h2 id="">rodadams.5963:</h2>
<p class="post-meta">
    <time datetime="2013-06-22T18:03:48+00:00">
        22 Jun 2013
    </time>
</p>
<p>
<p>How about adding a “skill_point” flag?</p>
<p>It’s also unclear to me how location is handled for Escort events.<br>
They start in one location, and have an effective radius, but that location migrates as the event progresses. What does the location in the API tell us? start location?</p></p>

<h2 id="">Dr Ishmael.9685:</h2>
<p class="post-meta">
    <time datetime="2013-06-22T19:59:14+00:00">
        22 Jun 2013
    </time>
</p>
<p>
<p>@Ozma: The new event_details API has a flag for GroupEvent.</p>
<p>@Rodadams: Location→center is <em>starting</em> location, per the documentation post.  The rest of the location→ attributes (→radius for type:“sphere”, →points for type:“poly”, etc.) define the 3D volume around the center within which a character can participate in the event.</p></p>

<h2 id="">ozma.3498:</h2>
<p class="post-meta">
    <time datetime="2013-06-22T22:41:04+00:00">
        22 Jun 2013
    </time>
</p>
<p>
<blockquote><div class="citey"><cite title="Posted on June 22 2013 07:59PM"><a href="/forum/community/api/API-Suggestion-Event-Details/2263580">Dr Ishmael.9685:</a></cite></div><div class="quotey"><p>@Ozma: The new event_details API has a flag for GroupEvent.</p></div></blockquote>
<p>Nice. :-)</p>
<blockquote><div class="citey"><cite title="Posted on June 22 2013 07:59PM"><a href="/forum/community/api/API-Suggestion-Event-Details/2263580">Dr Ishmael.9685:</a></cite></div><div class="quotey"><p>@Rodadams: Location-&gt;center is <em>starting</em> location, per the documentation post.  The rest of the location-&gt; attributes (-&gt;radius for type:“sphere”, -&gt;points for type:“poly”, etc.) define the 3D volume around the center within which a character can participate in the event.</p></div></blockquote>
<p>Have you played around with the event coordinates yet? I’m not the most technically gifted web developer, but so far none of the event coordinates I’ve plugged in to the map API have been accurate while the POI/Waypoints etc. work just fine.</p>
<p>Is there some difference we should be aware of in the format of the coordinates in event_details.json as opposed to map_floor.json? Apologies if this has already been covered, but I can’t find it anywhere.</p></p>

<h2 id="">zeeZ.5713:</h2>
<p class="post-meta">
    <time datetime="2013-06-22T22:51:02+00:00">
        22 Jun 2013
    </time>
</p>
<p>
<blockquote><div class="citey"><cite title="Posted on June 22 2013 10:41PM"><a href="/forum/community/api/API-Suggestion-Event-Details/2264298">ozma.3498:</a></cite></div><div class="quotey"><p>Is there some difference we should be aware of in the format of the coordinates in event_details.json as opposed to map_floor.json? Apologies if this has already been covered, but I can’t find it anywhere.</p></div></blockquote>
<p>See <a href="/forum-backup/Event-Details-API-location-coordinates">https://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/first</a></p></p>

<h2 id="">ozma.3498:</h2>
<p class="post-meta">
    <time datetime="2013-06-22T22:53:35+00:00">
        22 Jun 2013
    </time>
</p>
<p>
<blockquote><div class="citey"><cite title="Posted on June 22 2013 10:51PM"><a href="/forum/community/api/API-Suggestion-Event-Details/2264350">zeeZ.5713:</a></cite></div><div class="quotey"><blockquote><div class="citey"><cite title="Posted on June 22 2013 10:41PM"><a href="/forum/community/api/API-Suggestion-Event-Details/2264298">ozma.3498:</a></cite></div><div class="quotey"><p>Is there some difference we should be aware of in the format of the coordinates in event_details.json as opposed to map_floor.json? Apologies if this has already been covered, but I can’t find it anywhere.</p></div></blockquote>
<p>See <a href="/forum-backup/Event-Details-API-location-coordinates">https://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/first</a></p></div></blockquote>
<p>Thanks!</p></p>

<h2 id="">Primal Zed.9714:</h2>
<p class="post-meta">
    <time datetime="2013-06-24T03:06:20+00:00">
        24 Jun 2013
    </time>
</p>
<p>
<p>I also would like to have something to indicate if it’s a skill point.</p>
<p>Also, it’d be great if could have an attribute indicating what an appropriate icon to use for the event would be, like those from this list: <a href="http://wiki.guildwars2.com/wiki/Template:Event_icon#Standard_values">http://wiki.guildwars2.com/wiki/Template:Event_icon#Standard_values</a></p></p>

<h2 id="">Eremko.6950:</h2>
<p class="post-meta">
    <time datetime="2013-06-25T11:40:25+00:00">
        25 Jun 2013
    </time>
</p>
<p>
<p>Is it just me or do you also see the inconsistency in Event Details API? I mean – why do you even use dynamic keys as event IDs? There is a standard JSON approach in Event Names API (flat array with id keys), why don’t you just use the same approach in Event Details API? I would remove the GUID array completely and make it flat events with event_id inside of each of them … The way it is now it just makes the JSON parsing unnecessarily complicated for libraries like RestSharp.</p>
<p>See attached screenshot for explanation what exactly is on my mind.</p></p>

<h2 id="">Healix.5819:</h2>
<p class="post-meta">
    <time datetime="2013-06-26T12:47:31+00:00">
        26 Jun 2013
    </time>
</p>
<p>
<blockquote><div class="citey"><cite title="Posted on June 25 2013 11:40AM"><a href="/forum/community/api/API-Suggestion-Event-Details/2279029">Eremko.6950:</a></cite></div><div class="quotey"><p>Is it just me or do you also see the inconsistency in Event Details API?</p></div></blockquote>
<p>Some people were complaining about how the events were just in a simple array and wanted them to be referenced by the key instead. Since event_details is an extension to event_names, it makes more sense to have the IDs be the keys, since when you already know the ID, you just look it up, rather than iterating through the entire array to search for it. This makes it easier when using javascript. The obvious downside though, which they’ve already encountered, is duplicate keys (map api), causing data to be lost when parsed.</p>
<p>Not sure what RestSharp does, since I use a custom parser, but with the format of event_details, it should be parsed into something like a dictionary. Getting a specific event should be as easy as dictionary[key].</p></p>

<h2 id="">Eremko.6950:</h2>
<p class="post-meta">
    <time datetime="2013-06-26T13:15:36+00:00">
        26 Jun 2013
    </time>
</p>
<p>
<blockquote><div class="citey"><cite title="Posted on June 26 2013 12:47PM"><a href="/forum/community/api/API-Suggestion-Event-Details/2291552">Healix.5819:</a></cite></div><div class="quotey"><p>Since event_details is an extension to event_names, it makes more sense to have the IDs be the keys, since when you already know the ID, you just look it up, rather than iterating through the entire array to search for it.</p></div></blockquote>
<p>What makes you think that event_details is an extension to event_names? If it would be like this, it would maybe make (a little) sense, but it’s not the case. There is no event_id argument passable into events_details API. You have to fetch everything and thus event_details is more like “one-time get all event informations and cache it” API. And that’s the argument for my initial post – the API should be the same as event_names. There’s no reason to have dynamic key names in JSON, that’s just miles far away from JSON best practices.</p>
<p>Many libraries for JSON parsing in .NET (RestSharp, JSON.NET) and Java can handle what you say automatically without custom parsers when the JSON API is standardized (my suggested image from post above) and you’ll have an dictionary with &lt;eventID, event&gt; created automatically by those libraries … dynamic keys just makes everything harder to parse, in .NET for example your simplest solution is to use &lt;dynamic&gt; (e.g. var events = RestClient.Execute&lt;dynamic&gt;(new RestRequest(“event_details.json”)).Data[“events”];), but it’s just not that pretty as automatic deserialization into your own POJOs/POCOs.</p>
<p>ANet, please get rid of dynamic keys in (some of) your JSON APIs.</p></p>

<h2 id="">Cliff Spradlin.3512:</h2>
<p class="post-meta">
    <time datetime="2013-06-26T15:40:21+00:00">
        26 Jun 2013
    </time>
</p>
<p>
<blockquote><div class="citey"><cite title="Posted on June 26 2013 01:15PM"><a href="/forum/community/api/API-Suggestion-Event-Details/2291691">Eremko.6950:</a></cite></div><div class="quotey"><p>ANet, please get rid of dynamic keys in (some of) your JSON APIs.</p></div></blockquote>
<p><a href="/forum-backup/API-Request-Results-as-map-id-details">https://forum-en.guildwars2.com/forum/community/api/API-Request-Results-as-map-id-details/2121379</a> is the discussion that led to our transition to use dictionaries instead of arrays when it makes sense to do so.</p>
<p>The data format for these events are more suited to be a dictionary than an array, and there should be no downsides to having them presented in this format. In javascript there are definitely no downsides.</p>
<p>A quick look at the RestSharp library seems to show that it supports parsing JSON dictionaries. Am I missing something?</p></p>

<h2 id="">Healix.5819:</h2>
<p class="post-meta">
    <time datetime="2013-06-26T18:56:06+00:00">
        26 Jun 2013
    </time>
</p>
<p>
<blockquote><div class="citey"><cite title="Posted on June 26 2013 01:15PM"><a href="/forum/community/api/API-Suggestion-Event-Details/2291691">Eremko.6950:</a></cite></div><div class="quotey"><p>What makes you think that event_details is an extension to event_names?</p></div></blockquote>
<p>From my perspective, that was the starting point, so grabbing the details is something you do after you know what you’re looking for. Starting fresh however, event_details makes event_names redundant, so it’s not really an extension, but the starting point. Just looking at the data though, you can see how event_details adds data on top of event_names, hence, extending it.</p>
<p>Having the array key based really shouldn’t change much for you. Instead of parsing the data into a class such as EventDetails, parse it into a dictionary of &lt;String, EventDetails&gt;. If you wanted EventDetails to also contain the event’s ID, then I could see where you’re now facing the problem of having to go through everything twice, without using a custom deserializer, like what was required in JavaScript.</p>
<p>Example:<br>
rq = new RestRequest(“…event_details.json”);<br>
rq.RootElement = “events”;<br>
details = client.Execute&lt;Dictionary&lt;string, EventDetails&gt;&gt;(rq);</p></p>

<h2 id="">ozma.3498:</h2>
<p class="post-meta">
    <time datetime="2013-06-27T19:25:55+00:00">
        27 Jun 2013
    </time>
</p>
<p>
<p>A couple of requests:</p>
<p>In event_details.json, it would be good to have details on the time between an event being completed and it starting again (including whether or not it is based on its own completion or that of another event – for example, meta events). This would be very useful for making timer-based applications. For example, “cooldown”:“600” for an event that takes 10 minutes to respawn, and “preceded_by”:“event_id” for prerequisite event completions.</p>
<p>In events.json, I’d like to see something to indicate when an event entered its current state. It could be relative (i.e. seconds since last state change), or an actual timestamp using a standard time zone (rather than different time zones for each server). For example, “state_changed”:“1372361374”.</p></p>

<h2 id="">Rawrfaec.6412:</h2>
<p class="post-meta">
    <time datetime="2013-06-28T14:40:09+00:00">
        28 Jun 2013
    </time>
</p>
<p>
<blockquote><div class="citey"><cite title="Posted on June 26 2013 03:40PM"><a href="/forum/community/api/API-Suggestion-Event-Details/2292711">Cliff Spradlin.3512:</a></cite></div><div class="quotey"><p>The data format for these events are more suited to be a dictionary than an array, and there should be no downsides to having them presented in this format. In javascript there are definitely no downsides.</p></div></blockquote>
<p>It is a considerable inconvenience for static languages. With the current approach, in JavaScript, and probably any dynamic language that can map as easily to JSON, everything works <em>immediately</em> and that’s great for JS applications. However, as a rule, static languages have a much easier time processing an array allowing you to explicitly look up the values of the keys you expect to be there. The reasoning that this data is great for maps/dictionaries is completely sound, it’s just that building that dictionary is a lot more work right now if you’re not using JS and literally no work at all if you are. In contrast the alternative would require the same, small amount of work for <em>all</em> languages, including JS, which, of course, is a minor inconvenience for such applications.</p>
<p>I would definitely change this back for an eventual v2 since building your own dictionary from an array is guaranteed trivial in any language with dictionary support, despite the consequence of a needless (but completely negligible) overhead for JS.</p></p>

<h2 id="">Lil Puppy.5216:</h2>
<p class="post-meta">
    <time datetime="2013-06-30T06:04:02+00:00">
        30 Jun 2013
    </time>
</p>
<p>
<p>hmmm event_details.json has a root element and event_names.json does not. I approve of rooting things but these json don’t exactly need it. I root all my stuff out of habit but sometimes it’s redundant.</p>
<p>In jquery<br>
</p><pre><code>
$(function(){
	var event_names = [], event_details = {};
	$.getJSON( 'https://api.guildwars2.com/v1/event_details.json', function(data){
		event_details = data;
		console.info('got event_details.json');
		$.getJSON( 'https://api.guildwars2.com/v1/event_names.json', function(data){
			event_names = data;
			console.info( 'got event_names.json' );
			console.log( event_details.events[ event_names[11].id ].name );
			//                                               ^ .events is unnecessary root element
		}).fail(function(jqxhr, textStatus, error){ console.warn( 'failure in event_names.json:\n\t' +error); });
	}).fail(function(jqxhr, textStatus, error){ console.warn('failure in event_details.json:\n\t' +error); });
});
</code></pre><p></p>
<p>console output: “Defeat the spider king.”</p>
<p>If event_details.json was an array it would pretty much require an iterator if you acquire the entire thing. If you get each event separately you would still have to use it as an array. event_details as a dictionary makes sense.</p></p>

<h2 id="">smiley.1438:</h2>
<p class="post-meta">
    <time datetime="2013-07-05T16:36:22+00:00">
        05 Jul 2013
    </time>
</p>
<p>
<p>Ok, now that i’ve spent some hours on merging the event_details into the map data, please…:</p>
<ul>
	<li>order the events by map (see screen) – or even better: merge them into the floor.json</li>
	<li>recalculate the coordinates so that they match the format given by the texture_dims/continent_rect/clamped_view: X,Y 0 top left (you can then also drop the map_rect in the floor.json)</li>
	<li>spheres and cylinders? We draw 2D maps unless we’re using Google Maps’ 45° view… so you can safely drop all z data as it is useless overhead</li>
	<li>the flags seem to be pretty useless right now, i’ve only seen “group_event” so far. It would be better if we knew the exact event type according to <a href="http://wiki.guildwars2.com/wiki/Dynamic_Event#Event_indicators">the list in the wiki</a> - a key “event_type” would be useful</li>
</ul>
<p>Thanks in advance<img src="/include/images/smilies/wink.png"></p></p>


  </div>

</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">GW2 Developers</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            
              GW2 Developers
            
            </li>
            
            <li><a href="mailto:gw2developers@darthmaim.de">gw2developers@darthmaim.de</a></li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/gw2developers"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">gw2developers</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/gw2api"><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">gw2api</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Learn how to use the GW2 API.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
