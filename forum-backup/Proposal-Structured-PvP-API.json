{"title":"[Proposal] Structured PvP API","pubDate":"2015-01-26T02:16:55.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Proposal-Structured-PvP-API","comments":[{"pubDate":"2015-02-20T01:53:02.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Proposal-Structured-PvP-API/4811875","author":"Glyph.7805","body":"\n<p>Well short of having an API, is there a way to search for specific players rankings through this page: <a href=\"https://leaderboards.guildwars2.com/en/na/pvp\">https://leaderboards.guildwars2.com/en/na/pvp</a> ?</p>\n<p>Perhaps something along the lines of :<br>\n<a href=\"https://leaderboards.guildwars2.com/en/na/pvp?player=Glyph.7805\">https://leaderboards.guildwars2.com/en/na/pvp?player=Glyph.7805</a></p>","arenanet":false},{"pubDate":"2015-02-16T22:46:36.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Proposal-Structured-PvP-API/4802052","author":"Lawton Campbell.8517","body":"\n<p>The match IDs are GUIDs, actually.</p>\n<p>In any case, as much as I want this API to exist today, it probably isn’t going to arrive any time soon<img src=\"/include/images/smilies/sad.png\"></p>","arenanet":true},{"pubDate":"2015-02-16T03:26:25.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Proposal-Structured-PvP-API/4799768","author":"Lumiere.4609","body":"\n<p>match id’s could simply be a hash, all I want is something short enough to type into an app to get live stats…</p>","arenanet":false},{"pubDate":"2015-02-14T21:19:06.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Proposal-Structured-PvP-API/4796627","author":"Glyph.7805","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on January 27 2015 01:19AM\"><a href=\"/forum/community/api/Proposal-Structured-PvP-API/4734895\">Lawton Campbell.8517:</a></cite></div><div class=\"quotey\"><p>This is definitely something I’d like to see — there’s a huge amount of things that could be done with this. I’m thinking something along the lines of automated duel ladders via a password-protected/guild-only custom arena with an external web interface for match-making and gloating.</p>\n<p>For ranked matches, I’m pretty sure we can’t provide data during the match — since you’d be able to inspect your opponent’s builds pre-match-start and other shenanigans. There may be other issues w.r.t. privacy/build secrecy. For hotjoins it’s no big deal since you can see everything in spectate mode; however, it’d be providing an advantage for ranked matches, which is probably something we don’t want. I’m not really sure.</p>\n<p>Finally, there’s an issue of data retention — I’m not sure how much historical data we can feasibly store, but there’s a limit somewhere. It’d be on the application developer’s end to archive data, that’s just not something we can do.</p>\n<p>Anyway, I don’t know if/when we’ll be able to implement it (or even which parts will come to light), but it’s an endpoint I really want, at least.</p></div></blockquote>\n<p>I really hope we can see something soon! I’m very interested in how this plays out, hopefully we can get some functionality that will allow us to also grab kills/deaths and some more specific information such as team damage dealt, skill use, and things of that nature to further track individual player stats in a log for developers and players. For instance tracking playstyle could help players run a better build. (do i deal alot of dps, or am i better at healing, or capping points, or team killing, etc.) it will really put a new level on pvp builds.</p>\n<p>Now as for the applications developers or for the UI devs on guild wars 2 (whoever does the game programming), a tickbox that will be “disabled by default” for match data retention would be a good idea. and perhaps having a short window where that data can be grabbed by a server through the API. Say 7 days? I don’t know the specifics on how much data that will be for the servers personally, but I think it’s worth looking into, not everyone is going to have a use for data retention so I think it should be up to the players to manually enable the check box in order to cut down on data. If match data expired then return an error code that signifies that.</p>\n<p>I don’t have a deep understanding of how match ID’s work (is each match incremented? or are the ID’s recycled?) but that’s my two cents. I really hope to see this up soon, i’m super excited to start taking advantage of this feature.</p>","arenanet":false},{"pubDate":"2015-01-30T03:11:41.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Proposal-Structured-PvP-API/4747490","author":"Lumiere.4609","body":"\n<p>Hi Lawton,</p>\n<p>Sorry about the delay in my reply!  I agree with the during match for rated/unrated, maybe make the match data available after match (and for 24 hours after?)</p>\n<p>I also added <strong>GET /v2/spvp/match?since={$time}</strong> as I realized there was no api-safe way to scrape the data.  This would allow me to get a list once every 15..30..60 minutes of matches that I needed to record.</p>\n<p>For ArenaNet Hot Join servers it should be active in real time, and for Custom Arenas it could be a flag given to the room owner (and maybe a separate password?)  That said, Custom Arena’s is the most important place for it to exist as it will allow a streamer / broadcaster to pull all the builds and show them together instead of having to load each person individually.  It also can serve as proof of match for tournament organizers.</p>\n<p>From a data retention standpoint I totally agree about full historical data being difficult to feasibly search/manage while keeping any meaningful speed to the api.  I would hope for the following to be in the API:</p>\n<ul>\n\t<li>All Time data (totals, updated hourly)</li>\n\t<li>Current Season/Ladder sum data (totals, updated hourly)</li>\n\t<li>Last x matches/last x days (updated live, cached 15 minutes)</li>\n</ul>\n<p>Beyond that, storing each match is actually trivial in that they’re all small json blobs that could be compressed and tossed into an object store (Amazon S3 or Rackspace Cloud Files) to be able to replay matches (it would also let us recreate MMR’s if at some point we wanted to tweak the glicko settings from back data)</p>\n<p>If there’s anything I can help with to make this happen, please pm me or kick me a mail in game!</p>\n<p>— Lumiere</p>","arenanet":false},{"pubDate":"2015-01-27T01:19:32.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Proposal-Structured-PvP-API/4734895","author":"Lawton Campbell.8517","body":"\n<p>This is definitely something I’d like to see — there’s a huge amount of things that could be done with this. I’m thinking something along the lines of automated duel ladders via a password-protected/guild-only custom arena with an external web interface for match-making and gloating.</p>\n<p>For ranked matches, I’m pretty sure we can’t provide data during the match — since you’d be able to inspect your opponent’s builds pre-match-start and other shenanigans. There may be other issues w.r.t. privacy/build secrecy. For hotjoins it’s no big deal since you can see everything in spectate mode; however, it’d be providing an advantage for ranked matches, which is probably something we don’t want. I’m not really sure.</p>\n<p>Finally, there’s an issue of data retention — I’m not sure how much historical data we can feasibly store, but there’s a limit somewhere. It’d be on the application developer’s end to archive data, that’s just not something we can do.</p>\n<p>Anyway, I don’t know if/when we’ll be able to implement it (or even which parts will come to light), but it’s an endpoint I really want, at least.</p>","arenanet":true},{"pubDate":"2015-01-26T02:31:54.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Proposal-Structured-PvP-API/4730761","author":"Lumiere.4609","body":"\n<p>(Holding an additional post just in case it needs it!)</p>","arenanet":false},{"pubDate":"2015-01-26T02:31:34.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Proposal-Structured-PvP-API/4730759","author":"Lumiere.4609","body":"\n<p><strong>GET /v2/spvp/stats/{$character_id}</strong></p>\n<p>Stats for a character/account over longer periods of time (season or all time)</p>\n<p>Attributes:</p>\n<ul>\n\t<li>season: Season number or “all” for all stats. M</li>\n</ul>\n<p>No Request Body</p>\n<p>Response Example:<br>\n[pre]<br>\n{<br>\n  \"character\": \"https://api.guildwars2.com/v2/characters/24597629\",<br>\n  \"kills\": 24.<br>\n  \"skirmisher\": 4208,<br>\n  \"defends\": 4,<br>\n  \"captures\": 49,<br>\n  \"neutralizations\": 48290<br>\n}</p>\n<p>(etc etc)</p>\n<p><strong>GET /v2/spvp/match?since={$time}</strong></p>\n<p>Get all available matches that finished in a time period (default last ?? hours)</p>\n<p>{<br>\n  “matches”: [<br>\n    “link1”,<br>\n    “link2”,<br>\n    “link3”,<br>\n    “link4”, <br>\n    “link5”<br>\n]}</p>\n<p>This would allow a stats site to get a list of matches to pull data from without requiring it to look as frequently (lowering the load on the api)</p>","arenanet":false},{"pubDate":"2015-01-26T02:18:49.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Proposal-Structured-PvP-API/4730738","author":"Lumiere.4609","body":"\n<p>Response Example (in-match):<br>\n</p><pre><code>\n{\n    \"match\": {\n        \"id\": 24727692,\n        \"room_uri\": \"http://api.guildwars2.com/v2/spvp/room/1004882\",\n        \"score\": {\n            \"red\": 0,\n            \"blue\": 0,\n        },\n        \"map\": \"temple\",\n        \"time_left\": false,\n        \"players\": {\n            \"red\": [\n                { \n                    \"account_id\": \"somebody.2392\",\n                    \"name\": \"Some Name\",\n                    \"class\", \"Guardian\",\n                    \"weapons\": [\n                        {\n                            \"main_hand\": \"mace\",\n                            \"sigil1\": \"Sigil of Energy\",\n                            \"off_hand\": \"focus\",\n                            \"sigil2\": \"Sigil of Intelligence\"\n                        },\n                        {\n                            \"main_hand\": \"staff\",\n                            \"sigil1\": \"Sigil of Energy\",\n                            \"sigil2\": \"Sigil of Battle\"\n                        }\n                    ],\n                    \"rune\": \"Rune of the Soldier\",\n                    \"amulet\": \"Cleric\",\n                    \"utilities\": [\n                       \"Shelter\",\n                       \"Hold the Line\",\n                       \"Sanctuary\",\n                       \"Stand Your Ground\",\n                       \"Renewed Focus\"\n                    ],\n                    \"trait\": {\n                        \"distribution\": [0,1,6,6,1],\n                        \"points\": [\n                            [],\n                            [],\n                            [4,5,11],\n                            [2,5,11],\n                            []\n                        ]\n                    }\n                    \"events\": [\n                        {\n                            \"at\": \"00:30\",\n                            \"type\": \"capture\",\n                            \"point\": \"gate\"\n                        },\n                        {\n                            \"at\": \"01:02\",\n                            \"type\" \"kill\",\n                            \"killed\": \"somebodyelse.2492\"\n                        },\n                        {\n                            \"at\": \"06:51\",\n                            \"type\": \"temple_buff\",\n                            \"buff\": \"stillness\"\n                        },\n                },\n                ... // repeat these 4 more times\n            ],\n            \"blue\": [\n                {\n                    \"account_id\": \"somebodyelse.2492\",\n                    \"name\": \"Some Other Name\",\n                    \"class\", \"Guardian\",\n                    \"weapons\": [\n                        {\n                            \"main_hand\": \"mace\",\n                            \"sigil1\": \"Sigil of Energy\",\n                            \"off_hand\": \"focus\",\n                            \"sigil2\": \"Sigil of Intelligence\"\n                        },\n                        {\n                            \"main_hand\": \"staff\",\n                            \"sigil1\": \"Sigil of Energy\",\n                            \"sigil2\": \"Sigil of Battle\"\n                        }\n                    ],\n                    \"rune\": \"Rune of the Soldier\",\n                    \"amulet\": \"Cleric\",\n                    \"utilities\": [\n                       \"Shelter\",\n                       \"Hold the Line\",\n                       \"Sanctuary\",\n                       \"Stand Your Ground\",\n                       \"Renewed Focus\"\n                    ],\n                    \"trait\": {\n                        \"distribution\": [0,1,6,6,1],\n                        \"points\": [\n                            [],\n                            [],\n                            [4,5,11],\n                            [2,5,11],\n                            []\n                        ]\n                    }\n                },\n                ... // repeat these 4 more times\n            ]\n        }\n    }\n }\n</code></pre><p></p>\n<p>Notes/Explaination:</p>\n<ul>\n\t<li>Pre-Match the data provided is just the build itself, once the match starts it includes some event data to allow statistics to be generated, and to let someone post-match generate interesting tidbits to discuss like how quickly a team decapped behind their opponents.</li>\n</ul>\n<p>Events:</p>\n<ul>\n\t<li>Point Capture Neutralize Defend</li>\n\t<li>Kills</li>\n\t<li>Resses</li>\n\t<li>Skirmisher</li>\n\t<li>Map Special Events:\n\t<ul>\n\t\t<li>Temple Buffs</li>\n\t\t<li>Kyhlo/Skyhammer Weapon Use/Hit</li>\n\t\t<li>Forest Boss kills</li>\n\t\t<li>Legacy Doors/Lord</li>\n\t\t<li>Spirit Watch Orb pickup/drop/score (half/full)</li>\n\t</ul></li>\n\t<li>Others?</li>\n</ul>","arenanet":false},{"pubDate":"2015-01-26T02:18:22.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Proposal-Structured-PvP-API/4730736","author":"Lumiere.4609","body":"\n<p><strong>GET /v2/spvp/match/{$match_id}</strong></p>\n<p>Attributes:</p>\n<ul>\n\t<li>password: If the room for this match is password protected, require that the password be provided.\n\t<ul>\n\t\t<li>Ignore the password if owner is logged in via oauth.</li>\n\t</ul></li>\n</ul>\n<p>No Request Body</p>\n<p>Response Example (pre-match):<br>\n</p><pre><code>\n{\n    \"match\": {\n        \"id\": 24727692,\n        \"room_uri\": \"http://api.guildwars2.com/v2/spvp/room/1004882\",\n        \"score\": {\n            \"red\": 0,\n            \"blue\": 0,\n        },\n        \"map\": \"temple\",\n        \"time_left\": false,\n        \"players\": {\n            \"red\": [\n                { \n                    \"account_id\": \"somebody.2392\",\n                    \"class\", \"Guardian\",\n                    \"weapons\": [\n                        {\n                            \"main_hand\": \"mace\",\n                            \"sigil1\": \"Sigil of Energy\",\n                            \"off_hand\": \"focus\",\n                            \"sigil2\": \"Sigil of Intelligence\"\n                        },\n                        {\n                            \"main_hand\": \"staff\",\n                            \"sigil1\": \"Sigil of Energy\",\n                            \"sigil2\": \"Sigil of Battle\"\n                        }\n                    ],\n                    \"rune\": \"Rune of the Soldier\",\n                    \"amulet\": \"Cleric\",\n                    \"utilities\": [\n                       \"Shelter\",\n                       \"Hold the Line\",\n                       \"Sanctuary\",\n                       \"Stand Your Ground\",\n                       \"Renewed Focus\"\n                    ],\n                    \"trait\": {\n                        \"distribution\": [0,1,6,6,1],\n                        \"points\": [\n                            [],\n                            [],\n                            [4,5,11],\n                            [2,5,11],\n                            []\n                        ]\n                    }\n                },\n                ... // repeat these 4 more times\n            ],\n            \"blue\": [\n                {\n                    \"account_id\": \"somebodyelse.2492\",\n                    \"class\", \"Guardian\",\n                    \"weapons\": [\n                        {\n                            \"main_hand\": \"mace\",\n                            \"sigil1\": \"Sigil of Energy\",\n                            \"off_hand\": \"focus\",\n                            \"sigil2\": \"Sigil of Intelligence\"\n                        },\n                        {\n                            \"main_hand\": \"staff\",\n                            \"sigil1\": \"Sigil of Energy\",\n                            \"sigil2\": \"Sigil of Battle\"\n                        }\n                    ],\n                    \"rune\": \"Rune of the Soldier\",\n                    \"amulet\": \"Cleric\",\n                    \"utilities\": [\n                       \"Shelter\",\n                       \"Hold the Line\",\n                       \"Sanctuary\",\n                       \"Stand Your Ground\",\n                       \"Renewed Focus\"\n                    ],\n                    \"trait\": {\n                        \"distribution\": [0,1,6,6,1],\n                        \"points\": [\n                            [],\n                            [],\n                            [4,5,11],\n                            [2,5,11],\n                            []\n                        ]\n                    }\n                },\n                ... // repeat these 4 more times\n            ]\n        }\n    }\n }            \n</code></pre><p></p>\n<p>(This Section is split between 2 posts)</p>","arenanet":false},{"pubDate":"2015-01-26T02:17:52.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Proposal-Structured-PvP-API/4730735","author":"Lumiere.4609","body":"\n<p><strong>GET /v2/spvp/room/{$room_id}</strong></p>\n<p>Attributes:</p>\n<ul>\n\t<li>password: If the room is password protected, require that the password be provided.\n\t<ul>\n\t\t<li>Ignore the password if owner is logged in via oauth.</li>\n\t</ul></li>\n</ul>\n<p>No Request Body</p>\n<p>Response Example:<br>\n</p><pre><code>\n{\n    \"room\": {\n        \"name\": \"The Plunderdome\",\n        \"motd\": \"Plundering all day, yarr.\",\n        \"team_size\": 5,\n        \"score_limit\": 500,\n        \"time_limit\": 15,\n        \"respawn_time\": 20,\n        \"respawn_type\": \"wave\",\n        \"starting_players\": 1,\n        \"reserved_slots\": 0,\n        \"spectators\": true,\n        \"ready_up\": false,\n        \"autobalance\": true,\n        \"lock_gear\": false,\n        \"lock_skills\": false,\n        \"progression\": true,\n        \"force_respawn\": false,\n        \"tournament_commands\": false,\n        \"map_rotation\": [\n            \"kyhlo\",\n            \"forest\",\n            \"legacy\",\n            \"temple\",\n            \"spirit_watch\",\n            \"skyhammer\",\n            \"courtyard\n        ],\n        \"match_uri\": \"http://api.guildwars2.com/v2/spvp/match/47947\"\n    }\n}\n</code></pre><p></p>\n<p>Optionally, show member players/guilds and banned players… but I don’t see it as a big deal.</p>\n<p>Notes:</p>\n<ul>\n\t<li>progression displays reverse of checkbox in the custom arena page (“No Progression” makes little sense)</li>\n\t<li>match_uri is created as soon as the map loads and is active until a match begins and ends.</li>\n</ul>","arenanet":false},{"pubDate":"2015-01-26T02:16:55.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Proposal-Structured-PvP-API/4730733","author":"Lumiere.4609","body":"\n<p>Having spent a bit of time watching how most streams for pvp events in GW2 look, I think there is room for ArenaNet to provide some data that would simplify greatly the streams, as well as provide them with real data to generate stats on and work with.</p>\n<p><strong>API layout.</strong></p>\n<p>It makes sense to layout the API under /v2/ with the rest of the new APIs (and get use of their oauth/new codebase.)</p>\n<p>This Document attempts to describe both how it might work specifically and why to do it.</p>\n<p>/v2/spvp # open rooms/matches <br>\n/v2/spvp/room/{$room_id} # Room information and link to the match in progress<br>\n/v2/spvp/match/{$match_id} # Match information<br>\n/v2/spvp/stats/{$character/account?} # Stats for an account/character</p>\n<p><strong>GET /v2/spvp</strong></p>\n<p>Attributes:</p>\n<ul>\n\t<li>search – Search for a room name</li>\n\t<li>limit – limit count to a number of results</li>\n\t<li>offset – start showing with the Nth result (use with limit to paginate)</li>\n</ul>\n<p>No Request Body.</p>\n<p>Response Example:<br>\n</p><pre><code>\n{\n    \"rooms\": [\n        { \n     \t    \"name\": \"Server 023\",\n            \"room_uri\": \"http://api.guildwars2.com/v2/spvp/room/42\",\n            \"match_uri\": http://api.guildwars2.com/v2/spvp/match/47947\"\n        },\n        { \n\t    \"name\": \"The Plunderdome\",\n            \"room_uri\": \"http://api.guildwars2.com/v2/spvp/room/1004882\",\n            \"match_uri\": \"http://api.guildwars2.com/v2/spvp/match/47948\"\n        }\n    ]\n}\n</code></pre><p></p>\n<p>(Continues Next Post… 5000 characters… lol)</p>\n<p>This is a Cross-Post of <a href=\"https://forum-en.guildwars2.com/forum/game/pvp/Proposal-Structured-PvP-API\">https://forum-en.guildwars2.com/forum/game/pvp/Proposal-Structured-PvP-API</a> to hopefully hit the right set of eyes (after talking to Colin last night<img src=\"/include/images/smilies/smile.png\"> )</p>","arenanet":false}]}