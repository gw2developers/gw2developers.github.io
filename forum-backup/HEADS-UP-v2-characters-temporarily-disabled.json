{"title":"HEADS UP: /v2/characters temporarily disabled","pubDate":"2016-04-23T01:04:00.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled","comments":[{"pubDate":"2016-05-18T23:46:14.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6162000","author":"stress level zero.4907","body":"\n<p>No worries, thanks Lawton!</p>","arenanet":false},{"pubDate":"2016-05-18T23:08:27.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6161905","author":"Lawton Campbell.8517","body":"\n<p>The non-transient errors are supposed to be “invalid key” (key doesn’t exist), “banned key” (we’ve blacklisted the key on our side) or “broken key” (something horrible has happened).</p>\n<p>Looking at the code, there <strong>may</strong> be an issue where “invalid key” is incorrectly returned during a temporary failure — need to root around in some code to check what situations can cause that.</p>\n<p>In any case, this is definitely not documented well and we really should be returning 5xx responses for transient failures. I’ve created a <a href=\"https://github.com/arenanet/api-cdi/issues/314\">tracking issue</a> for both the audit and better docs; I would keep seemingly broken API keys around until this gets resolved. Sorry about the hassle <img src=\"/include/images/smilies/sad.png\"></p>","arenanet":true},{"pubDate":"2016-05-18T22:43:07.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6161859","author":"stress level zero.4907","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on May 18 2016 08:28PM\"><a href=\"/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6161516\">Lawton Campbell.8517:</a></cite></div><div class=\"quotey\"><p>Actually, I think we might have done a server deploy around that time — one of the backend servers the API talks to was timing out over two windows last night. Do you happen to have the error text returned by the server? There’s a lot of reasons a key can be invalid (and they all return unique error strings).</p></div></blockquote>\n<p>No I don’t have the error message unfortunately (though I’ll add it to the logs now). Do you have a potential list of messages I should target to ensure I remove a token when it has actually been removed by a user in the AN application page?</p>\n<p>Also, any reason why it wouldn’t return a 500 for cases like this (can’t reach an internal server, etc)?</p>\n<p>As always thanks for the speedy replies.</p>","arenanet":false},{"pubDate":"2016-05-18T20:28:21.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6161516","author":"Lawton Campbell.8517","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on May 18 2016 10:52AM\"><a href=\"/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6160522\">stress level zero.4907:</a></cite></div><div class=\"quotey\"><blockquote><div class=\"citey\"><cite title=\"Posted on May 10 2016 07:06PM\"><a href=\"/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6147789\">Lawton Campbell.8517:</a></cite></div><div class=\"quotey\"><p>I found and fixed a bug awhile back that would cause issues like that for the first request once/day or so (when the session created for the token would expire). I haven’t personally seen it happening anymore, but let me know if you’re still seeing it and I’ll investigate some more.</p></div></blockquote>\n<p>Hey Lawton, this happened today.</p>\n<p>Received an unexpected 400 response:</p>\n<p><a href=\"http://i.imgur.com/umE1OXw.png\">http://i.imgur.com/umE1OXw.png</a></p>\n<p>Thoughts?</p>\n<p><a href=\"https://github.com/madou/armory-back/blob/master/gw2-fetch/src/controllers/ping-controller.js#L95\">https://github.com/madou/armory-back/blob/master/gw2-fetch/src/controllers/ping-controller.js#L95</a></p>\n<p>I guess I’ll disable deleting the token for now.</p></div></blockquote>\n<p>Actually, I think we might have done a server deploy around that time — one of the backend servers the API talks to was timing out over two windows last night. Do you happen to have the error text returned by the server? There’s a lot of reasons a key can be invalid (and they all return unique error strings).</p>","arenanet":true},{"pubDate":"2016-05-18T10:52:59.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6160522","author":"stress level zero.4907","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on May 10 2016 07:06PM\"><a href=\"/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6147789\">Lawton Campbell.8517:</a></cite></div><div class=\"quotey\"><p>I found and fixed a bug awhile back that would cause issues like that for the first request once/day or so (when the session created for the token would expire). I haven’t personally seen it happening anymore, but let me know if you’re still seeing it and I’ll investigate some more.</p></div></blockquote>\n<p>Hey Lawton, this happened today.</p>\n<p>Received an unexpected 400 response:</p>\n<p><a href=\"http://i.imgur.com/umE1OXw.png\">http://i.imgur.com/umE1OXw.png</a></p>\n<p>Thoughts?</p>\n<p><a href=\"https://github.com/madou/armory-back/blob/master/gw2-fetch/src/controllers/ping-controller.js#L95\">https://github.com/madou/armory-back/blob/master/gw2-fetch/src/controllers/ping-controller.js#L95</a></p>\n<p>I guess I’ll disable deleting the token for now.</p>","arenanet":false},{"pubDate":"2016-05-10T19:06:18.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6147789","author":"Lawton Campbell.8517","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on May 07 2016 05:24AM\"><a href=\"/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6142132\">bobsort.4097:</a></cite></div><div class=\"quotey\"><p>It seems last “/” causes a redirect which removes the key from request.</p></div></blockquote>\n<p>That’s a bug; here’s a <a href=\"https://github.com/arenanet/api-cdi/issues/309\">tracking issue</a>. It’s probably all the authenticated endpoints, not just /v2/characters. I can probably have that fixed in a week or two, in the meanwhile I recommend not sending the trailing slash in requests.</p>\n<blockquote><div class=\"citey\"><cite title=\"Posted on May 09 2016 09:50PM\"><a href=\"/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6146050\">stress level zero.4907:</a></cite></div><div class=\"quotey\"><p>Has the false negative bug been fixed where the api would return 40x responses for valid tokens on the characters endpoint?</p></div></blockquote>\n<p>I found and fixed a bug awhile back that would cause issues like that for the first request once/day or so (when the session created for the token would expire). I haven’t personally seen it happening anymore, but let me know if you’re still seeing it and I’ll investigate some more.</p>","arenanet":true},{"pubDate":"2016-05-09T21:50:45.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6146050","author":"stress level zero.4907","body":"\n<p>Has the false negative bug been fixed where the api would return 40x responses for valid tokens on the characters endpoint?</p>","arenanet":false},{"pubDate":"2016-05-07T05:24:54.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6142132","author":"bobsort.4097","body":"\n<p>Isn’t get request supposed to work like following on characters end point?</p>\n<p>I’m trying</p>\n<p><a href=\"https://api.guildwars2.com/v2/characters/?access_token\">https://api.guildwars2.com/v2/characters/?access_token</a>=[InsertMyKey]</p>\n<p>and it returns</p>\n<p>{\"text\":“endpoint requires authentication”}</p>\n<p>It seems last “/” causes a redirect which removes the key from request.</p>","arenanet":false},{"pubDate":"2016-04-27T18:41:37.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6124539","author":"Lawton Campbell.8517","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on April 27 2016 04:57PM\"><a href=\"/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6124262\">Nekres.1038:</a></cite></div><div class=\"quotey\"><p>Uhm, does the data update somewhat slower? My deaths went from 5 minutes intervall updates to almost 20 minutes!</p></div></blockquote>\n<p>Should still be ~5 minutes. There’s an edge case where the map instance server hasn’t persisted character data to the database (IIRC that’s on a 5 minute timer, or when you switch maps or sell something on the trading post etc) and that stale data gets pulled in and cached by the API backend for another 5 minutes. So to the best of my knowledge, the maximum staleness should be around ~10 minutes (though only under special circumstances).</p>\n<p>It’s altogether possible there’s a bug somewhere causing data to be cached too long. If the issue doesn’t clear up, consider <a href=\"https://github.com/arenanet/api-cdi/issues/new\">opening an issue on github</a> (or just posting again here).</p>","arenanet":true},{"pubDate":"2016-04-27T16:57:07.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6124262","author":"Nekres.1038","body":"\n<p>Uhm, does the data update somewhat slower? My deaths went from 5 minutes intervall updates to almost 20 minutes!</p>","arenanet":false},{"pubDate":"2016-04-27T07:05:58.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6123340","author":"Bormotun.9568","body":"\n<p>Thanks! Great improvements are implemented.</p>","arenanet":false},{"pubDate":"2016-04-27T06:50:43.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6123327","author":"AZY.8352","body":"\n<p>Working nicely – thank you!</p>","arenanet":false},{"pubDate":"2016-04-27T02:53:45.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6123093","author":"Behellagh.1468","body":"\n<p>Yay!  Thank you Thank you Thank you</p>","arenanet":false},{"pubDate":"2016-04-26T23:57:39.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6122869","author":"Redenaz.8631","body":"\n<p>Awesome! Thanks!</p>","arenanet":false},{"pubDate":"2016-04-26T23:45:57.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6122848","author":"Lawton Campbell.8517","body":"\n<p>Fix went out with today’s hotfix and works correctly; just turned the /v2/characters endpoint back on.</p>","arenanet":true},{"pubDate":"2016-04-26T22:11:12.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6122708","author":"Vegeta.2563","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on April 26 2016 12:28AM\"><a href=\"/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6120790\">Lawton Campbell.8517:</a></cite></div><div class=\"quotey\"><blockquote><div class=\"citey\"><cite title=\"Posted on April 26 2016 12:06AM\"><a href=\"/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6120751\">TPMN.1483:</a></cite></div><div class=\"quotey\"><p>Did this get fixed with the latest patch?<br>\nAre we waiting for normal patch Tue for the fix if above is No?</p></div></blockquote>\n<p>software is hard  :&lt;</p></div></blockquote>\n<p>Isn’t that just hardware?<img src=\"/include/images/smilies/colondee.png\"></p>","arenanet":false},{"pubDate":"2016-04-26T15:22:55.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6121831","author":"AZY.8352","body":"\n<p>Wow, speedy turnaround! Great work Lawton :-)</p>","arenanet":false},{"pubDate":"2016-04-26T05:18:10.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6121133","author":"DeviantShark.6548","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on April 26 2016 12:28AM\"><a href=\"/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6120790\">Lawton Campbell.8517:</a></cite></div><div class=\"quotey\"><p>software is hard</p></div></blockquote>\n<p>Oh you!<br>\n(Still true)</p>","arenanet":false},{"pubDate":"2016-04-26T04:18:39.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6121071","author":"Behellagh.1468","body":"\n<p>I know … heisenbugs.</p>","arenanet":false},{"pubDate":"2016-04-26T00:28:09.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6120790","author":"Lawton Campbell.8517","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on April 26 2016 12:06AM\"><a href=\"/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6120751\">TPMN.1483:</a></cite></div><div class=\"quotey\"><p>Did this get fixed with the latest patch?<br>\nAre we waiting for normal patch Tue for the fix if above is No?</p></div></blockquote>\n<p>No, it’s not yet fixed.</p>\n<p>We tracked down the issue today and the current plan is to get it hotfixed tomorrow evening, but can’t make any promises. Sorry again about the downtime, software is hard  :&lt;</p>","arenanet":true},{"pubDate":"2016-04-26T00:06:33.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6120751","author":"TPMN.1483","body":"\n<p>Did this get fixed with the latest patch?<br>\nAre we waiting for normal patch Tue for the fix if above is No?</p>","arenanet":false},{"pubDate":"2016-04-25T19:29:02.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6120219","author":"Behellagh.1468","body":"\n<p>You don’t know what you got until it’s gone.</p>","arenanet":false},{"pubDate":"2016-04-25T11:02:34.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6119194","author":"Fury.6408","body":"\n<p>Thank you for posting this. It has been driving me nuts =P</p>","arenanet":false},{"pubDate":"2016-04-24T14:40:47.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6117444","author":"Redenaz.8631","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on April 23 2016 04:23PM\"><a href=\"/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6115515\">Lawton Campbell.8517:</a></cite></div><div class=\"quotey\"><p>By “next release” I mean “the next time we do a patch that isn’t a hotfix”.</p>\n<p>Sorry about the ambiguity.</p></div></blockquote>\n<p>Okay, great! Things get broken, but it’s good to hear this wasn’t shattered into a million pieces somehow.<img src=\"/include/images/smilies/colondee.png\"></p>","arenanet":false},{"pubDate":"2016-04-24T11:22:10.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6117199","author":"Pifil.5193","body":"\n<p>I think Lawton will let you know when it’s back up. Lawton is a Trojan worker, and I for one am hugely impressed by his dedication, output and communication.</p>\n<p>Thanks Lawton you are like unto a coding god!</p>","arenanet":false},{"pubDate":"2016-04-23T20:12:37.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6115948","author":"Southghost.9581","body":"\n<p>If anybody knows when this is resolved, please post an update.</p>","arenanet":false},{"pubDate":"2016-04-23T19:52:31.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6115912","author":"Lawton Campbell.8517","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on April 23 2016 07:01PM\"><a href=\"/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6115814\">AZY.8352:</a></cite></div><div class=\"quotey\"><p>Am I a “v2” character? I haven’t been able to access my API all day…</p></div></blockquote>\n<p>“v2” refers to the API version — not the character version. The only way to access character data is via the “/v2/characters” API endpoint, which is disabled.</p>\n<p>Effectively, all API access to all character data is turned off until I can resolve the issue.</p>","arenanet":true},{"pubDate":"2016-04-23T19:01:31.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6115814","author":"AZY.8352","body":"\n<p>Am I a “v2” character? I haven’t been able to access my API all day…</p>","arenanet":false},{"pubDate":"2016-04-23T16:23:04.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6115515","author":"Lawton Campbell.8517","body":"\n<p>By “next release” I mean “the next time we do a patch that isn’t a hotfix”.</p>\n<p>Sorry about the ambiguity.</p>","arenanet":true},{"pubDate":"2016-04-23T15:47:56.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6115449","author":"Atenhara.2947","body":"\n<p>Til that there is a way to view your char stats when offline.</p>","arenanet":false},{"pubDate":"2016-04-23T15:33:01.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6115425","author":"Vegeta.2563","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on April 23 2016 01:04AM\"><a href=\"/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6114118\">Lawton Campbell.8517:</a></cite></div><div class=\"quotey\"><p>We found some issues with /v2/characters that necessitated temporarily disabling the /v2/characters endpoints. I’m not sure when we’ll have it back up, but it likely won’t be before the next release.</p>\n<p>Sorry <img src=\"/include/images/smilies/sad.png\"></p></div></blockquote>\n<p>Do you mean next patch, or next Quarter Release?</p>\n<p>A lot of people depend on the Character API when it comes to tracking down where their items went, along with different stats they could check into while not in game.</p>","arenanet":false},{"pubDate":"2016-04-23T13:04:02.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6115213","author":"Nekres.1038","body":"\n<p>Tuesday probably, but its true that it could mean anything between big or small release. Clarification would be welcome!<img src=\"/include/images/smilies/smile.png\"></p>","arenanet":false},{"pubDate":"2016-04-23T12:53:40.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6115199","author":"Redenaz.8631","body":"\n<p>“Next release” as in next Tuesday, next month, or next season?</p>\n<p>Sad face! Thanks for the heads up, though.</p>","arenanet":false},{"pubDate":"2016-04-23T12:49:04.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6115188","author":"Miazara.8164","body":"\n<p>Ermm next major patch? next hotfix patch? next api patch/update/release? At what possible time frame are we looking at this?</p>","arenanet":false},{"pubDate":"2016-04-23T01:04:01.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/HEADS-UP-v2-characters-temporarily-disabled/6114118","author":"Lawton Campbell.8517","body":"\n<p>We found some issues with /v2/characters that necessitated temporarily disabling the /v2/characters endpoints. I’m not sure when we’ll have it back up, but it likely won’t be before the next release.</p>\n<p>Sorry <img src=\"/include/images/smilies/sad.png\"></p>","arenanet":true}]}