{"title":"Listings question","pubDate":"2017-02-13T17:52:16.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Listings-question","comments":[{"pubDate":"2017-04-28T16:17:18.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Listings-question/6568000","author":"SlippyCheeze.5483","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on April 27 2017 09:29PM\"><a href=\"/forum/community/api/Listings-question/6567126\">Lawton Campbell.8517:</a></cite></div><div class=\"quotey\"><blockquote><div class=\"citey\"><cite title=\"Posted on April 27 2017 05:47PM\"><a href=\"/forum/community/api/Listings-question/6566882\">Demosthenex.7368:</a></cite></div><div class=\"quotey\"><p>Ever considered making a compressed bulk file available hourly for the most common endpoints?</p></div></blockquote>\n<p>Our stack makes it pretty difficult to do that; currently the APIs don’t have any sane way to trigger periodic events.</p></div></blockquote>\n<p>Don’t tell anyone, because it’s kinda an ugly hack, but this one time I implemented that sort of endpoint in a system with the same limitation.  I just let lucky number one request after the hour do all the work of fetch-and-compress, and then saved that to a cache to serve for the rest of the hour.</p>","arenanet":false},{"pubDate":"2017-04-28T11:09:06.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Listings-question/6567701","author":"Demosthenex.7368","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on April 27 2017 09:29PM\"><a href=\"/forum/community/api/Listings-question/6567126\">Lawton Campbell.8517:</a></cite></div><div class=\"quotey\"><p>Our stack makes it pretty difficult to do that; currently the APIs don’t have any sane way to trigger periodic events.</p></div></blockquote>\n<p>I’ve transitioned over to using pagination instead of long lists of IDs. I bet that’s more cache layer friendly, and really eliminates the need for bulk files.</p>\n<p>I saw someone else mention there should be a best practice guide. I totally agree!</p>","arenanet":false},{"pubDate":"2017-04-27T21:29:52.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Listings-question/6567126","author":"Lawton Campbell.8517","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on April 27 2017 05:47PM\"><a href=\"/forum/community/api/Listings-question/6566882\">Demosthenex.7368:</a></cite></div><div class=\"quotey\"><p>Ever considered making a compressed bulk file available hourly for the most common endpoints?</p></div></blockquote>\n<p>Our stack makes it pretty difficult to do that; currently the APIs don’t have any sane way to trigger periodic events.</p>","arenanet":true},{"pubDate":"2017-04-27T17:47:27.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Listings-question/6566882","author":"Demosthenex.7368","body":"\n<blockquote><div class=\"quotey\"><p>IMO, the best way to fetch them all is to paginate through the listings using ?page_size=200&amp;page=N, with N starting at 0 and ending at the value of the X-Page-Total response header. This will require 121 requests/scrape.</p></div></blockquote>\n<p>I’ll have to look into that. I’ve been using the list of id’s returned by the root of each endpoint, and creating 200 long URLs.</p>\n<p>I was asking about bulk download because it seems like most (of my) API usage has nothing to do with requesting single items or 200 at a time. The most common use seems to be download to a local DB to query and a bulk option would rather make sense.</p>\n<p>Ever considered making a compressed bulk file available hourly for the most common endpoints?</p>","arenanet":false},{"pubDate":"2017-04-27T16:52:27.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Listings-question/6566779","author":"Lawton Campbell.8517","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on April 27 2017 01:53PM\"><a href=\"/forum/community/api/Listings-question/6566528\">Demosthenex.7368:</a></cite></div><div class=\"quotey\"><blockquote><div class=\"citey\"><cite title=\"Posted on February 21 2017 07:40PM\"><a href=\"/forum/community/api/Listings-question/6503149\">Lawton Campbell.8517:</a></cite></div><div class=\"quotey\"><p>You totally can make it a <a href=\"https://api.guildwars2.com/v2/commerce/listings?ids=76,77,78\">get request with ids separated by commas</a>. Also the results can be <a href=\"https://api.guildwars2.com/v2/commerce/listings?page_size=200&page=0\">paginated</a> if you don’t want to deal with ids.</p></div></blockquote>\n<p>To confirm, that’s limited to 200 ids per result?</p></div></blockquote>\n<p>Correct.</p>\n<blockquote><div class=\"citey\"><cite title=\"Posted on April 27 2017 01:53PM\"><a href=\"/forum/community/api/Listings-question/6566528\">Demosthenex.7368:</a></cite></div><div class=\"quotey\"><p>I also read somewhere that ids=all was valid, but doesn’t appear to work for items, recipes, commerce/prices, or commerce/listings?</p>\n<p>Is there a better way to bulk download price/listing data (ie: prepared cache) somewhere?</p></div></blockquote>\n<p>Typically, ids=all is only available on endpoints that have &lt;500 resources.</p>\n<p>IMO, the best way to fetch them all is to paginate through the listings using ?page_size=200&amp;page=N, with N starting at 0 and ending at the value of the X-Page-Total response header. This will require 121 requests/scrape.</p>","arenanet":true},{"pubDate":"2017-04-27T13:53:43.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Listings-question/6566528","author":"Demosthenex.7368","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on February 21 2017 07:40PM\"><a href=\"/forum/community/api/Listings-question/6503149\">Lawton Campbell.8517:</a></cite></div><div class=\"quotey\"><p>You totally can make it a <a href=\"https://api.guildwars2.com/v2/commerce/listings?ids=76,77,78\">get request with ids separated by commas</a>. Also the results can be <a href=\"https://api.guildwars2.com/v2/commerce/listings?page_size=200&page=0\">paginated</a> if you don’t want to deal with ids.</p></div></blockquote>\n<p>To confirm, that’s limited to 200 ids per result?</p>\n<p>I also read somewhere that ids=all was valid, but doesn’t appear to work for items, recipes, commerce/prices, or commerce/listings?</p>\n<p>Is there a better way to bulk download price/listing data (ie: prepared cache) somewhere?</p>","arenanet":false},{"pubDate":"2017-02-21T19:40:25.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Listings-question/6503149","author":"Lawton Campbell.8517","body":"\n<p>You totally can make it a <a href=\"https://api.guildwars2.com/v2/commerce/listings?ids=76,77,78\">get request with ids separated by commas</a>. Also the results can be <a href=\"https://api.guildwars2.com/v2/commerce/listings?page_size=200&page=0\">paginated</a> if you don’t want to deal with ids.</p>","arenanet":true},{"pubDate":"2017-02-18T17:05:08.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Listings-question/6499736","author":"Tharin.6358","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on February 13 2017 06:31PM\"><a href=\"/forum/community/api/Listings-question/6494034\">Lawton Campbell.8517:</a></cite></div><div class=\"quotey\"><blockquote><div class=\"citey\"><cite title=\"Posted on February 13 2017 05:52PM\"><a href=\"/forum/community/api/Listings-question/6493992\">Tharin.6358:</a></cite></div><div class=\"quotey\"><p>But what if there is actually an ID for every listing done by users and anet is just not providing us with that functionality? It would be so much easier with this to calculate if it was a normal buy or just a cancellation of order.</p></div></blockquote>\n<p>There is an id associated with every listing (the ids are returned from /v2/commerce/transactions), but we’re never going to return that from /v2/commerce/listings. The basic rundown is that those transaction ids are only stored in the actual database — which for performance reasons the API doesn’t have access to. Instead, the API talks to some servers which have cached aggregates for the listings (basically, what’s displayed on the UI in-game).</p>\n<p>Adding in the ids would require piping them through a small handful of backend services and would probably have some serious performance implications, so it’s never going to happen.</p>\n<blockquote><div class=\"citey\"><cite title=\"Posted on February 13 2017 05:52PM\"><a href=\"/forum/community/api/Listings-question/6493992\">Tharin.6358:</a></cite></div><div class=\"quotey\"><p>Oh! And is there a limit to how fast I can make another GET request?</p></div></blockquote>\n<p>Not currently, but there’s some caching going on. Check the Expires/Cache-Control response headers to see how often the API’s data is updated. My rough rule of thumb is to keep below 100k requests/day; we haven’t had issues so far but reserve the right to add in a rate limit if there’s ever a problem.</p></div></blockquote>\n<p>Okay, so if I want to request alot of id’s, I believe I can’t make it with a get-request simply dividing tons of ids by commas? Do you have an option to make post-request?</p>","arenanet":false},{"pubDate":"2017-02-13T18:31:30.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Listings-question/6494034","author":"Lawton Campbell.8517","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on February 13 2017 05:52PM\"><a href=\"/forum/community/api/Listings-question/6493992\">Tharin.6358:</a></cite></div><div class=\"quotey\"><p>But what if there is actually an ID for every listing done by users and anet is just not providing us with that functionality? It would be so much easier with this to calculate if it was a normal buy or just a cancellation of order.</p></div></blockquote>\n<p>There is an id associated with every listing (the ids are returned from /v2/commerce/transactions), but we’re never going to return that from /v2/commerce/listings. The basic rundown is that those transaction ids are only stored in the actual database — which for performance reasons the API doesn’t have access to. Instead, the API talks to some servers which have cached aggregates for the listings (basically, what’s displayed on the UI in-game).</p>\n<p>Adding in the ids would require piping them through a small handful of backend services and would probably have some serious performance implications, so it’s never going to happen.</p>\n<blockquote><div class=\"citey\"><cite title=\"Posted on February 13 2017 05:52PM\"><a href=\"/forum/community/api/Listings-question/6493992\">Tharin.6358:</a></cite></div><div class=\"quotey\"><p>Oh! And is there a limit to how fast I can make another GET request?</p></div></blockquote>\n<p>Not currently, but there’s some caching going on. Check the Expires/Cache-Control response headers to see how often the API’s data is updated. My rough rule of thumb is to keep below 100k requests/day; we haven’t had issues so far but reserve the right to add in a rate limit if there’s ever a problem.</p>","arenanet":true},{"pubDate":"2017-02-13T17:52:17.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Listings-question/6493992","author":"Tharin.6358","body":"\n<p>Hello! I’m new to development, and I want to make a trading post website similar to gw2bltc.com <br>\nI was looking through the commerce/ api and found out that there’s no actual way to find if a listing was cancelled by the buying user, not bought.<br>\nWhat I mean is there is a json array for buys with 0 element being the top buyer.<br>\nI want to calculate how much of that item is being bought a day. One of the idea was to pull the data every 2-5 mins and see if and how the top buying (0) element changed, if it decreased in price or if the price is the same but the quantity decreased, then the quantity of that difference is bought and vice-versa, if it increased in price (or in quantity) – it is a new bid. But what if there is actually an ID for every listing done by users and anet is just not providing us with that functionality? It would be so much easier with this to calculate if it was a normal buy or just a cancellation of order. If people here have any good idea – feel free to help me, a noobie, to progress in this matter<img src=\"/include/images/smilies/smile.png\"></p>\n<p>Oh! And is there a limit to how fast I can make another GET request?</p>","arenanet":false}]}