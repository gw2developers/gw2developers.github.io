{"title":"New endpoint: /v2/wvw/objectives","pubDate":"2015-09-24T23:12:04.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/New-endpoint-v2-wvw-objectives","comments":[{"pubDate":"2015-10-10T01:54:21.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/New-endpoint-v2-wvw-objectives/5593671","author":"Tanis.5134","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on October 09 2015 09:40PM\"><a href=\"/forum/community/api/New-endpoint-v2-wvw-objectives/5593026\">Lawton Campbell.8517:</a></cite></div><div class=\"quotey\"><p>Found and fixed the issue. <a href=\"https://github.com/arenanet/api-cdi/pull/101\">Github PR</a>. It should go out with HoT release.</p></div></blockquote>\n<p>Woohoo! Thanks!</p>\n<p>Out of curiosity, are there going to be any more API updates prior to HoT, or is this issue one that required some changes outside the API and that release isn’t happening until HoT?</p>","arenanet":false},{"pubDate":"2015-10-09T21:40:08.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/New-endpoint-v2-wvw-objectives/5593026","author":"Lawton Campbell.8517","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on October 05 2015 05:52PM\"><a href=\"/forum/community/api/New-endpoint-v2-wvw-objectives/5575506\">Lawton Campbell.8517:</a></cite></div><div class=\"quotey\"><blockquote><div class=\"citey\"><cite title=\"Posted on October 02 2015 07:33PM\"><a href=\"/forum/community/api/New-endpoint-v2-wvw-objectives/5559649\">Tanis.5134:</a></cite></div><div class=\"quotey\"><p>Has anyone had any luck using the coordinates in /v2/wvw/objectives? I can’t quite get markers to line up on a map created with the tile service.</p></div></blockquote>\n<p>I’m actually not sure how the game client places markers — my impression is that the sector centroid is used for the label placement, not marker placement. I need to dig up how the markers are placed; I’m not certain that they’re data-driven.</p></div></blockquote>\n<p>Found and fixed the issue. <a href=\"https://github.com/arenanet/api-cdi/pull/101\">Github PR</a>. It should go out with HoT release.</p>","arenanet":true},{"pubDate":"2015-10-08T17:17:00.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/New-endpoint-v2-wvw-objectives/5588320","author":"Lawton Campbell.8517","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on October 08 2015 02:30PM\"><a href=\"/forum/community/api/New-endpoint-v2-wvw-objectives/5587735\">draos.9574:</a></cite></div><div class=\"quotey\"><p>Maybe I asked wrong because I know how the layered maps are working.<br>\nLet me reword my question. Here is an older <a href=\"https://bytebucket.org/draos/guildwars2-battle-hud/raw/02e93e445cc2ab7f24c0ff70c236a8d793c3b26c/screenshots/Timer.png\">example</a> of my overlay. It projects the self-tracked 3D coordinates of the objectives, in the same way the gw2 graphic engine would do, into the field of view of the users. As coordinates I use the center of the flipping areas of each objectiv.</p>\n<p>Would it be possible to give us such 3D coordinates too?</p></div></blockquote>\n<p>You’re looking at the capture gadget location (which is a 3D point). The capture gadget is only casually related to the objective, so pulling them out is going to be a doozie. It’s something I can look into doing, but I can’t make any guarentees.</p>\n<p>The marker and label coordinates are only 2D points because they’re currently only used to render the map. I found out where the marker coordinates are stored so I’ll work on having those piped through (maybe before HoT ships, I dunno).</p>\n<p>I’ll be looking into map tiles today.</p>","arenanet":true},{"pubDate":"2015-10-08T14:30:31.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/New-endpoint-v2-wvw-objectives/5587735","author":"draos.9574","body":"\n<p>Maybe I asked wrong because I know how the layered maps are working.<br>\nLet me reword my question. Here is an older <a href=\"https://bytebucket.org/draos/guildwars2-battle-hud/raw/02e93e445cc2ab7f24c0ff70c236a8d793c3b26c/screenshots/Timer.png\">example</a> of my overlay. It projects the self-tracked 3D coordinates of the objectives, in the same way the gw2 graphic engine would do, into the field of view of the users. As coordinates I use the center of the flipping areas of each objectiv.</p>\n<p>Would it be possible to give us such 3D coordinates too?</p>","arenanet":false},{"pubDate":"2015-10-08T13:40:25.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/New-endpoint-v2-wvw-objectives/5587576","author":"Tanis.5134","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on October 05 2015 05:52PM\"><a href=\"/forum/community/api/New-endpoint-v2-wvw-objectives/5575506\">Lawton Campbell.8517:</a></cite></div><div class=\"quotey\"><p>I’m actually not sure how the game client places markers — my impression is that the sector centroid is used for the label placement, not marker placement. I need to dig up how the markers are placed; I’m not certain that they’re data-driven.</p></div></blockquote>\n<p>If you find out that they are not data-driven, it would be awesome if we could get access to the desert borderlands in the tile service so we could map out those objectives prior to the release of HoT.</p>","arenanet":false},{"pubDate":"2015-10-07T20:46:40.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/New-endpoint-v2-wvw-objectives/5585323","author":"Lawton Campbell.8517","body":"\n<p>The data we’re using for objectives doesn’t have coordinates at all but they’re associated with sectors. Sectors don’t have 3D coordinates — they’re entirely 2D. IIRC the 3D bit comes from which floors the sector belongs to, though I think there’s only 1 floor for the WvW maps.</p>\n<p>I’m not sure what I typed makes any sense. :s</p>","arenanet":true},{"pubDate":"2015-10-07T17:29:34.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/New-endpoint-v2-wvw-objectives/5584534","author":"draos.9574","body":"\n<p>Great endpoint but I have one question.<br>\nIs it possible to give us 3D coordinate instead of 2D? Currently I’m tracking the coordinates of the objectives in wvw on my own using the mumble api. Well I have the coordinates even for HoT but I would prefer to skip this step.</p>","arenanet":false},{"pubDate":"2015-10-05T17:52:57.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/New-endpoint-v2-wvw-objectives/5575506","author":"Lawton Campbell.8517","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on October 02 2015 07:33PM\"><a href=\"/forum/community/api/New-endpoint-v2-wvw-objectives/5559649\">Tanis.5134:</a></cite></div><div class=\"quotey\"><p>Has anyone had any luck using the coordinates in /v2/wvw/objectives? I can’t quite get markers to line up on a map created with the tile service.</p></div></blockquote>\n<p>I’m actually not sure how the game client places markers — my impression is that the sector centroid is used for the label placement, not marker placement. I need to dig up how the markers are placed; I’m not certain that they’re data-driven.</p>","arenanet":true},{"pubDate":"2015-10-03T14:45:20.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/New-endpoint-v2-wvw-objectives/5564765","author":"Tanis.5134","body":"\n<p>I’m hoping I can find something in the API that will be reliable when objectives are changed or added, as I’m trying to update to support the new desert borderlands prior to the HoT release.</p>","arenanet":false},{"pubDate":"2015-10-03T14:11:43.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/New-endpoint-v2-wvw-objectives/5564627","author":"smiley.1438","body":"\n<p>Ok, that’s clearly API side (tbh, i haven’t checked the new coordinates yet). I wonder if it’s possible to get the positions of the markers. The thing about the sector centroids was in context of the sector name positions, so the current coordinates may be used that way  instead.</p>\n<p>Also, no need to figure out the marker coordinates, you can still use this for the time being: <a href=\"https://gist.github.com/codemasher/bac2b4f87e7af128087e\">https://gist.github.com/codemasher/bac2b4f87e7af128087e</a></p>","arenanet":false},{"pubDate":"2015-10-03T13:32:55.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/New-endpoint-v2-wvw-objectives/5564472","author":"Tanis.5134","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on October 02 2015 07:38PM\"><a href=\"/forum/community/api/New-endpoint-v2-wvw-objectives/5559671\">smiley.1438:</a></cite></div><div class=\"quotey\"><p>This looks like a rounding error to me, but then again, the positions of the keeps are odd.<br>\nWhat library are you using? Leaflet? Google Maps?</p></div></blockquote>\n<p>I tried with Google Maps back with v1 and the sectors, and I believe I had the same result. I am currently using <a href=\"https://www.mapbox.com/mapbox-android-sdk\">Mapbox’s Android SDK </a>.</p>\n<p><a href=\"http://jsfiddle.net/43ccLc5k/1\">Here’s a JS fiddle using leaflet with the same problem</a>. I know that the PR for this mentioned that the coordinates are just the centroid of the objective’s sector- perhaps that doesn’t actually line up with where the markers should be?</p>\n<p>If that’s the case, is there a better way to get the “correct” location of markers without just figuring them out myself and hard coding them?</p>","arenanet":false},{"pubDate":"2015-10-02T19:38:55.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/New-endpoint-v2-wvw-objectives/5559671","author":"smiley.1438","body":"\n<p>This looks like a rounding error to me, but then again, the positions of the keeps are odd.<br>\nWhat library are you using? Leaflet? Google Maps?</p>\n<p>€: see also this: <a href=\"https://forum-en.guildwars2.com/forum/community/api/New-endpoint-v2-wvw-objectives/first#post5526223\">https://forum-en.guildwars2.com/forum/community/api/New-endpoint-v2-wvw-objectives/first#post5526223</a></p>","arenanet":false},{"pubDate":"2015-10-02T19:33:26.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/New-endpoint-v2-wvw-objectives/5559649","author":"Tanis.5134","body":"\n<p>Has anyone had any luck using the coordinates in /v2/wvw/objectives? I can’t quite get markers to line up on a map created with the tile service.</p>\n<p>Here’s what I am seeing for each borderlands: <a href=\"https://dl.dropboxusercontent.com/u/1096483/map_offset.png\">https://dl.dropboxusercontent.com/u/1096483/map_offset.png</a></p>\n<p>Notice how the markers all seem to be offset towards the center of the map. My initial thought was that I had to play around with the zoom a little, but since it is happening on all maps and the offset is relative to each individual map (instead of the world as a whole), I’m starting to doubt that.</p>\n<p>I’ll probably work on creating a Javascript fiddle tomorrow to see if it is just the library I’m using, but I’ve seen it on two libraries so far. I’m also not particularly fluent in mapping terminology, so if anyone knows what I should be looking for, I would appreciate pointers.</p>","arenanet":false},{"pubDate":"2015-10-02T08:45:02.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/New-endpoint-v2-wvw-objectives/5557692","author":"chaly.7638","body":"\n<p>Thx a lot for your integer hint though datafolks will hate this change<img src=\"/include/images/smilies/colondee.png\"></p>","arenanet":false},{"pubDate":"2015-09-28T18:23:59.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/New-endpoint-v2-wvw-objectives/5540563","author":"Lawton Campbell.8517","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on September 26 2015 05:48AM\"><a href=\"/forum/community/api/New-endpoint-v2-wvw-objectives/5530305\">Patches.7584:</a></cite></div><div class=\"quotey\"><p>Will the int-&gt;str change be going into any of the other API endpoints (pvp, item, etc)?</p></div></blockquote>\n<p>No, it’s only for WvW objectives (and even then, only for the v2 for now — the v1 stuff won’t change without a good deal of notice).</p>\n<p>In the old system, the borderlands maps were literal copy-pastes of the red borderlands. For the new borderlands maps, we added support for a programmatic copy-paste that uses almost all of the same data (so same map details, objectives, etc) but with map-specific overrides. So all of the same keep on each of the borderlands would have different metadata (e.g., different name) but same objective id because the name was just overridden. To work around this, I made the objective ids be the concatenation of the map id and objective id just to make them unique.</p>\n<p>This change is pretty WvW-specific, so no other endpoints need to change.</p>","arenanet":true},{"pubDate":"2015-09-26T05:48:50.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/New-endpoint-v2-wvw-objectives/5530305","author":"Patches.7584","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on September 24 2015 11:12PM\"><a href=\"/forum/community/api/New-endpoint-v2-wvw-objectives/5524366\">Lawton Campbell.8517:</a></cite></div><div class=\"quotey\"><p>Soft-launched this yesterday and nothing blew up. Basically /v2/wvw/objectives is an actually working replacement for /v1/wvw/objective_names.json — it provides a bulk-expandable endpoint for WvW objective data. It also provides some additional fields that the v1 endpoint doesn’t, notably  the label coordinates, sector_id and such.</p>\n<ul>\n\t<li><a href=\"https://api.guildwars2.com/v2/wvw/objectives?ids=all\">/v2/wvw/objectives</a></li>\n\t<li><a href=\"https://github.com/arenanet/api-cdi/pull/91\">Github PR</a></li>\n</ul>\n<p>It’s really important to note that due to backend changes objectives ids will going forward no longer be integers — they’ll be strings. This will be reflected in /v2/wvw/matches (and likely /v1/wvw/match_details.json) which I’m trying to get out before HoT ships. Check (and comment on!) the <a href=\"https://github.com/arenanet/api-cdi/pull/94\">/v2/wvw/matches Github PR</a> if you’ve got some time before we ship it!</p>\n<p>Hopefully coming next week are <a href=\"https://github.com/arenanet/api-cdi/pull/96\">/v2/achievements and /v2/achievements/daily</a> (the bits for account achievements aren’t on live yet so it’ll just be dailies for a while).</p>\n<p>Lemmie know if you’ve got feedback/questions about /v2/wvw/objectives <img src=\"/include/images/smilies/smile.png\"></p></div></blockquote>\n<p>Will the int-&gt;str change be going into any of the other API endpoints (pvp, item, etc)?</p>\n<p>I ask because if so I’ll need to cast them into ints for my wrapper (it expects int from the non-wvw endpoints).</p>\n<p>Otherwise, stoked to implement this and achievements.</p>","arenanet":false},{"pubDate":"2015-09-25T18:18:56.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/New-endpoint-v2-wvw-objectives/5526223","author":"smiley.1438","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on September 25 2015 06:01PM\"><a href=\"/forum/community/api/New-endpoint-v2-wvw-objectives/5526182\">Elfo Bianco.3786:</a></cite></div><div class=\"quotey\"><p>I have read “/v2/wvw/objectives” and there are big value for coordinates. If I’d like to use them with a scale of 1:1, the coordinates retrieved by API are to compare with a maximum zoom in of the map?</p></div></blockquote>\n<p>I don’t get your question 100% because syntax error. But from what i get, you’re basically asking how to project them 1:1 on the map.</p>\n<p>You might want to check out some examples:<br>\n<a href=\"http://gw2.chillerlan.net/examples/gw2maps-leaflet.html\">http://gw2.chillerlan.net/examples/gw2maps-leaflet.html</a> (latest, vanilla JS, using ES6 window.fetch())<br>\n<a href=\"http://gw2.chillerlan.net/examples/gw2maps-gmaps-simple.html\">http://gw2.chillerlan.net/examples/gw2maps-gmaps-simple.html</a><br>\n<a href=\"http://gw2.chillerlan.net/examples/gw2staticmaps.php\">http://gw2.chillerlan.net/examples/gw2staticmaps.php</a> (source: <a href=\"https://gist.github.com/codemasher/75d8e1a24b2363cabebf\">https://gist.github.com/codemasher/75d8e1a24b2363cabebf</a> )</p>\n<p>The <a href=\"https://gist.github.com/codemasher/75d8e1a24b2363cabebf#file-gw2staticmaps-php-L11\">project() function</a> in the php example or fromPointToLatLng() in the gmaps one is probably what you’re looking for. (map.project/unproject in leaflet)</p>\n<p>@Lawton: Thanks! Can’t wait for the matches!<img src=\"/include/images/smilies/colondee.png\"></p>","arenanet":false},{"pubDate":"2015-09-25T18:01:51.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/New-endpoint-v2-wvw-objectives/5526182","author":"Elfo Bianco.3786","body":"\n<p>Thank you Lawton for you job!!<img src=\"/include/images/smilies/colondee.png\"><br>\nNow I’m not using this API, but I have a question for the future.<br>\nI have read “/v2/wvw/objectives” and there are big value for coordinates. If I’d like to use them with a scale of 1:1, the coordinates retrieved by API are to compare with a maximum zoom in of the map?</p>","arenanet":false},{"pubDate":"2015-09-24T23:12:04.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/New-endpoint-v2-wvw-objectives/5524366","author":"Lawton Campbell.8517","body":"\n<p>Soft-launched this yesterday and nothing blew up. Basically /v2/wvw/objectives is an actually working replacement for /v1/wvw/objective_names.json — it provides a bulk-expandable endpoint for WvW objective data. It also provides some additional fields that the v1 endpoint doesn’t, notably  the label coordinates, sector_id and such.</p>\n<ul>\n\t<li><a href=\"https://api.guildwars2.com/v2/wvw/objectives?ids=all\">/v2/wvw/objectives</a></li>\n\t<li><a href=\"https://github.com/arenanet/api-cdi/pull/91\">Github PR</a></li>\n</ul>\n<p>It’s really important to note that due to backend changes objectives ids will going forward no longer be integers — they’ll be strings. This will be reflected in /v2/wvw/matches (and likely /v1/wvw/match_details.json) which I’m trying to get out before HoT ships. Check (and comment on!) the <a href=\"https://github.com/arenanet/api-cdi/pull/94\">/v2/wvw/matches Github PR</a> if you’ve got some time before we ship it!</p>\n<p>Hopefully coming next week are <a href=\"https://github.com/arenanet/api-cdi/pull/96\">/v2/achievements and /v2/achievements/daily</a> (the bits for account achievements aren’t on live yet so it’ll just be dailies for a while).</p>\n<p>Lemmie know if you’ve got feedback/questions about /v2/wvw/objectives <img src=\"/include/images/smilies/smile.png\"></p>","arenanet":true}]}