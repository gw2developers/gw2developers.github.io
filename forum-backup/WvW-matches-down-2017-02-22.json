{"title":"WvW matches down 2017-02-22","pubDate":"2017-02-23T02:04:51.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/WvW-matches-down-2017-02-22","comments":[{"pubDate":"2017-03-01T01:00:42.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/WvW-matches-down-2017-02-22/6513630","author":"Lawton Campbell.8517","body":"\n<p>Okay, pushed some changes today that should fix</p>\n<ul>\n\t<li>/v2/wvw/matches was erroneously being cached for 5 minutes; it’s now back to a 1-second cache (hooray for complicated cache code).</li>\n\t<li>/v2/wvw/matches.scores (and .map.scores) no longer count the current skirmish twice. The scores should properly represent the total scores.</li>\n\t<li>/v2/wvw/matches.map.objectives.last_flipped should be properly “null” when it’s never been flipped (rather than 2001-01-01).</li>\n</ul>\n<p>As always, let me know when you find further issues <img src=\"/include/images/smilies/sad.png\"></p>","arenanet":true},{"pubDate":"2017-02-26T21:50:34.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/WvW-matches-down-2017-02-22/6511090","author":"Lawton Campbell.8517","body":"\n<p>Ugh, best guess is that it’s including the current skirmish score twice. I’ll see if I can get that fixed next week; I’m all hopped up on cold meds right now and don’t trust myself to make any correct changes right now.</p>\n<p>Next week I’ll look into exposing the raw skirmish data in addition to fixing this.</p>","arenanet":true},{"pubDate":"2017-02-26T16:46:40.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/WvW-matches-down-2017-02-22/6510774","author":"Weris.5248","body":"\n<p>I think there is another issue with global score.<br>\nThe global score seems to roll back at each new skirmish and becomes smaller than a few minutes before.</p>\n<p>Here is an example  : <a href=\"http://mos.millenium.org/servers/view/8/\">http://mos.millenium.org/servers/view/8/</a> and we can see at each beginning of a skirmish the same value for several minutes.</p>\n<p>I save every 15 minutes the global score. If the score is fewer than the previous score (it should not be possible) i save the same value as the previous score (that’s why the graph show same value for several minutes after a new skirmish).</p>\n<p>Currently, for Piken Squre, my last saved score was 109,568 (at 5 PM CEST). At 5:44pm CEST, the api return 109,113 for piken square.</p>\n<p>NB. I’ve just updated the tracker, and now it will save the exact value returned from the api even if the current value is fewer than the previous saved value.</p>","arenanet":false},{"pubDate":"2017-02-25T02:17:26.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/WvW-matches-down-2017-02-22/6509191","author":"Lawton Campbell.8517","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on February 25 2017 02:11AM\"><a href=\"/forum/community/api/WvW-matches-down-2017-02-22/6509184\">aandiarie.7195:</a></cite></div><div class=\"quotey\"><p>Q_Q This is not a good set of links.</p></div></blockquote>\n<p>Hey man I don’t make the rules I just break the API endpoints.</p>\n<p>I updated the temporary hardcoded API configs for the NA merges+matchups; let me know if I botched something else; I’ll check back later tonight. AFAIK everything should be working (KDRs should be fixed, /v1 endpoints should be fixed, scores should be the total match scores, not just skirmish scores, etc).</p>\n<p>What a week.</p>","arenanet":true},{"pubDate":"2017-02-25T02:11:16.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/WvW-matches-down-2017-02-22/6509184","author":"aandiarie.7195","body":"\n<p>Q_Q This is not a good set of links.</p>","arenanet":false},{"pubDate":"2017-02-25T00:43:22.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/WvW-matches-down-2017-02-22/6509091","author":"Lawton Campbell.8517","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on February 25 2017 12:22AM\"><a href=\"/forum/community/api/WvW-matches-down-2017-02-22/6509065\">Weris.5248:</a></cite></div><div class=\"quotey\"><p>Seems to be working again, but now kills and deaths are equals to 0<img src=\"/include/images/smilies/smile.png\"></p></div></blockquote>\n<p><a href=\"https://www.youtube.com/watch?v=-wntX-a3jSY\">This is how I feel right now</a>.</p>\n<p>After briefly panicking, the fix for the KDR data is en-route.</p>\n<p>Hopefully this will be the last stop on today’s pain train.</p>","arenanet":true},{"pubDate":"2017-02-25T00:22:53.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/WvW-matches-down-2017-02-22/6509065","author":"Weris.5248","body":"\n<p>Seems to be working again, but now kills and deaths are equals to 0<img src=\"/include/images/smilies/smile.png\"></p>","arenanet":false},{"pubDate":"2017-02-24T22:25:10.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/WvW-matches-down-2017-02-22/6508966","author":"Lawton Campbell.8517","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on February 24 2017 10:19PM\"><a href=\"/forum/community/api/WvW-matches-down-2017-02-22/6508963\">Weris.5248:</a></cite></div><div class=\"quotey\"><p>Wow, and now score is score of the current skirmish (and not the total score of the week). Is it a another bug or is it defenitive ?</p></div></blockquote>\n<p>Uhh, that’s a bug.</p>\n<p>Sorry, bear with me on these changes.</p>\n<p>EDIT: also apologies for this disaster; I’ll bundle the fix for that one with the /v1 deploy later today.</p>","arenanet":true},{"pubDate":"2017-02-24T22:19:46.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/WvW-matches-down-2017-02-22/6508963","author":"Weris.5248","body":"\n<p>Wow, and now score is score of the current skirmish (and not the total score of the week). Is it a another bug or is it defenitive ?</p>","arenanet":false},{"pubDate":"2017-02-24T18:21:42.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/WvW-matches-down-2017-02-22/6508667","author":"Lawton Campbell.8517","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on February 24 2017 04:39PM\"><a href=\"/forum/community/api/WvW-matches-down-2017-02-22/6508511\">Boss Nomad.6487:</a></cite></div><div class=\"quotey\"><p>Are all these problems related to an update of the api?</p></div></blockquote>\n<p>Specifically, to an update to one of the API’s backend components. Long story short, we updated how WvW data is stored last year and the API component has been using the old data source which doesn’t have some of the newer features. Talking to the new data source is a bit involved so I’ve been rolling back after finding more bugs on stage each release. This time the bugs didn’t crop up until it was on live (whoops).</p>\n<p>Despite that, this time everything appears to be working except for the merges/matchup worlds, which I can just update manually at reset until the next release. Everything should be more-or-less good to go after the next release (i.e. patch not hotfix).</p>\n<blockquote><div class=\"citey\"><cite title=\"Posted on February 24 2017 04:39PM\"><a href=\"/forum/community/api/WvW-matches-down-2017-02-22/6508511\">Boss Nomad.6487:</a></cite></div><div class=\"quotey\"><p>I dont recognize seeing points_tick, points_capture, yaks_delivered or upgrades before. Also appears that there are objectives with a new “Spawn” type.</p></div></blockquote>\n<p>The updated backend code has support for the extra fields, so the API frontend detects that and just emits them with the response. There’s an open PR on github for those that needs to be closed out (I’ll have to go through github and merge a bunch of stuff I think). I can strip out the Spawn objectives if wanted; IIRC some application developers and I had a discussion on gitter and the conclusion was to just leave them in.</p>\n<p>EDIT: Hmm I guess I should fix the v1 API as well.</p>","arenanet":true},{"pubDate":"2017-02-24T16:39:43.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/WvW-matches-down-2017-02-22/6508511","author":"Boss Nomad.6487","body":"\n<p>Are all these problems related to an update of the api? I dont recognize seeing points_tick, points_capture, yaks_delivered or upgrades before. Also appears that there are objectives with a new “Spawn” type.</p>\n<p>Any ETA when all the problems are going to be solved? If not an exact date, just a rough estimation. Will it take more than a week?</p>","arenanet":false},{"pubDate":"2017-02-24T00:09:21.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/WvW-matches-down-2017-02-22/6507661","author":"Lawton Campbell.8517","body":"\n<p>Okay, it’s back up now, but due to EVEN MORE BUGS (i did this) it’s only being held together with gum and duct tape. Some caveats while I work through the underlying problems:</p>\n<ul>\n\t<li>Linking data is currently hardcoded.</li>\n\t<li>Matchup data is currently hardcoded.</li>\n\t<li>The whole thing is liable to catch fire and burn down.</li>\n</ul>\n<p>On Friday (and next Friday ;_;), I plan to disable the endpoint when the scores zero, then manually update the hardcoded bits once the new matchups are decided, then turn it back on; should be back up before the initial RI runs out.</p>","arenanet":true},{"pubDate":"2017-02-23T23:47:30.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/WvW-matches-down-2017-02-22/6507637","author":"Athakron.6791","body":"\n<p>Thank you very much for the information and honesty!  I am sure a lot of people will be glad to know whats going on.</p>","arenanet":false},{"pubDate":"2017-02-23T12:18:39.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/WvW-matches-down-2017-02-22/6506739","author":"CJay.5013","body":"\n<p>Awesome, thank you very much for the update – looking forward to seeing it up and running again.</p>","arenanet":false},{"pubDate":"2017-02-23T03:10:10.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/WvW-matches-down-2017-02-22/6506217","author":"Lawton Campbell.8517","body":"\n<p>It’s actually totally unrelated; for the WvW APIs I basically broke everything. Thought the fix I put into the first hotfix would correct the issue, but there turned out to be a totally unrelated issue that caused it to still be broken.</p>\n<p>I’ll have it fixed tomorrow provided the rest of the API backend doesn’t explode and catch fire.</p>\n<p>Sorry <img src=\"/include/images/smilies/sad.png\"></p>","arenanet":true},{"pubDate":"2017-02-23T02:04:51.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/WvW-matches-down-2017-02-22/6506104","author":"Drant.5902","body":"\n<p>WvW <a href=\"https://api.guildwars2.com/v2/wvw/matches\">matches</a> API has been down since Wednesday afternoon ArenaNet HQ time. Can’t use v1’s <a href=\"https://api.guildwars2.com/v1/wvw/match_details.json?match_id=1-1\">match_details</a> either, so wondering if this is related to <a href=\"https://forum-en.guildwars2.com/forum/community/api/HEADS-UP-API-were-temporarily-disabled\">yesterday’s</a> total API downtime.</p>","arenanet":false}]}