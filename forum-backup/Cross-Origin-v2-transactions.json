{"title":"Cross-Origin:  v2/transactions","pubDate":"2015-05-22T09:00:52.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Cross-Origin-v2-transactions","comments":[{"pubDate":"2015-05-22T10:12:10.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Cross-Origin-v2-transactions/5089795","author":"smiley.1438","body":"\n<p>@mav: you have to include the token into the URL using the “access_token” parameter. A cross origin request won’t work with extra headers. (see: <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS#Simple_requests\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS#Simple_requests</a> )</p>\n<p>(also “Access-Control-Allow-Origin” is a header a server has to respond with)</p>","arenanet":false},{"pubDate":"2015-05-22T09:23:31.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Cross-Origin-v2-transactions/5089721","author":"Wizeon.3852","body":"\n<p>I’m not sure if that’s a firefox specific problem, but here’s my ajax function stripped of my own stuff.</p>\n<p>And here’s a link to the dev response about using headers or get parameters <a href=\"https://forum-en.guildwars2.com/forum/community/api/Launching-v2-commerce-transactions/5077482\">https://forum-en.guildwars2.com/forum/community/api/Launching-v2-commerce-transactions/5077482</a></p>\n<p>anetAjax(“transactions/current/buys”, function(response) {<br>\n    console.log(response);<br>\n});</p>\n<p>function anetAjax(url, successFunction, errorFunction) {<br>\n    if(config[‘apiKey’]) {<br>\n        $.ajax({<br>\n            url: ‘<a href=\"https://api.guildwars2.com/v2/commerce/\">https://api.guildwars2.com/v2/commerce/</a>’+url+’?access_token=‘+config[’apiKey’],<br>\n            success: function(response) {<br>\n                if(typeof(successFunction) == “function”) {<br>\n                    successFunction(response);<br>\n                }<br>\n            },<br>\n            error: function(response, status) {<br>\n                console.log(“Error retrieving data from the server”);<br>\n                if(typeof(errorFunction) == “function”) {<br>\n                    errorFunction();<br>\n                }<br>\n            }<br>\n        });<br>\n    }<br>\n    else {<br>\n        console.log(“ERROR: Api key not set”);<br>\n        if(typeof(errorFunction) == “function”) {<br>\n            errorFunction();<br>\n        }<br>\n    }<br>\n}</p>\n<p>edit: can’t figure out how to make a code block, indentation doesn’t really work now…</p>","arenanet":false},{"pubDate":"2015-05-22T09:00:53.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Cross-Origin-v2-transactions/5089688","author":"mav.3904","body":"\n<p>Hi,</p>\n<p>this is my first try to make an app using the GW2 API. Every time i tested my code in Firefox a Cross-Origin error pops up.</p>\n<p>This is my simple code<br>\n</p><pre><code>\n      var config = {\n\t\theaders: {\n\t\t\t'Access-Control-Allow-Origin': '*',\n\t\t\t'Authorization': 'Bearer TOKEN ID'\n\t\t\t\n\t\t}\n\t};\n\t\n\t$http.get('https://api.guildwars2.com/v2/commerce/transactions/history/sells',config)\n\t.success(function(data) {\n\t\t$scope.output = \"success\";\n\t}).error(function (data) {\n\t\t$scope.output = \"Request failed\";\n\t\tconsole.log(JSON.stringify(data));\n\t});\n</code></pre><p></p>\n<p>If i use jsonp instead of method get i get a 403 forbidden as response.</p>\n<p>Does anyone have an idea what I’m doing wrong?</p>\n<p>p.s.<br>\nI build my apps with the ionic framework and angularJS.</p>\n<p>best regards<br>\nmav</p>","arenanet":false}]}