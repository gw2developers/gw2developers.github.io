<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Enable keep-alive and pipelining?</title>
  <meta name="description" content="Learn how to use the GW2 API.">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="/forum-backup/Enable-keep-alive-and-pipelining/">
  <link rel="alternate" type="application/rss+xml" title="GW2 Developers" href="/feed.xml">
  
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-106748097-1', 'auto');
  ga('send', 'pageview');

</script>
  

  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    
    
    <a class="site-title" href="/"><img src="/assets/images/logo.svg"></a>
  
    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
          
            
            
            <a class="page-link" href="/forum-backup/">Forum Backup</a>
            
          
            
            
            <a class="page-link" href="/guides/">Guides</a>
            
          
            
            
          
            
            
          
            
            
          
        </div>
      </nav>
    
  </div>
</header>

    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Enable keep-alive and pipelining?</h1>
  </header>

  <div class="post-content">
    


<p class="post-meta">
    Original Url: http://forum-en.guildwars2.com/forum/community/api/Enable-keep-alive-and-pipelining
</p>



<h2 id="">joshflosh.4517:</h2>
<p class="post-meta">
    <time datetime="2015-02-27T11:39:39+00:00">
        27 Feb 2015
    </time>
</p>
<p>
<p>Hey,</p>
<p>i am currently programming an app for gw2 and when downloading the item-lists (/v2/items/?page=..) i noticed that your server don’t seem to support persistent connection and therefore also no HTTP Pipelining. Would it be possible for you guys to enable those, as that could drastically improve the performance of fetching the whole item-list?</p>
<p>On a sidenote: an even better solution would be, if you could enable ?ids=all for that endpoint. But since i don’t know your backend infrastructure, that could just be server limitations.</p>
<p>Btw i love the API v2, it already improved performance by a lot, thank you for that!</p></p>

<h2 id="">smiley.1438:</h2>
<p class="post-meta">
    <time datetime="2015-02-27T11:50:58+00:00">
        27 Feb 2015
    </time>
</p>
<p>
<blockquote><div class="citey"><cite title="Posted on February 27 2015 11:39AM"><a href="/forum/community/api/Enable-keep-alive-and-pipelining/4834202">joshflosh.4517:</a></cite></div><div class="quotey"><p>On a sidenote: an even better solution would be, if you could enable ?ids=all for that endpoint.</p></div></blockquote>
<p>I guess the servers would then explode…<img src="/include/images/smilies/colondee.png"></p>
<p>I’d recommend you something like RollingCurl which speeds up the whole process (a few minutes on a fast connection).</p>
<p><a href="https://github.com/codemasher/gw2-database/blob/master/classes/rollingcurl.class.php">https://github.com/codemasher/gw2-database/blob/master/classes/rollingcurl.class.php</a><br>
<a href="https://github.com/codemasher/gw2-database/blob/master/classes/gw2items.class.php#L186">https://github.com/codemasher/gw2-database/blob/master/classes/gw2items.class.php#L186</a></p></p>

<h2 id="">joshflosh.4517:</h2>
<p class="post-meta">
    <time datetime="2015-02-27T11:57:42+00:00">
        27 Feb 2015
    </time>
</p>
<p>
<p>A few minutes? Maybe im misreading something there, but i currently fetch all items in 15 seconds^^</p></p>

<h2 id="">smiley.1438:</h2>
<p class="post-meta">
    <time datetime="2015-02-27T12:01:04+00:00">
        27 Feb 2015
    </time>
</p>
<p>
<p>So where’s the problem then? (We’re talking about ~38k items and ~150MB DB size)<img src="/include/images/smilies/colondee.png"></p>
<p>I’ve a very slow connection, so i can only estimate – there have been reports from like a couple seconds to a few minutes. However, it also depends on the amount of languages you pull from the DB.</p></p>

<h2 id="">joshflosh.4517:</h2>
<p class="post-meta">
    <time datetime="2015-02-27T12:04:33+00:00">
        27 Feb 2015
    </time>
</p>
<p>
<p>Well it’s not a problem, just a question, since i care about optimization.  150MB? Are we talking about the same thing?</p></p>

<h2 id="">Pat Cavit.9234:</h2>
<p class="post-meta">
    <time datetime="2015-02-27T17:28:42+00:00">
        27 Feb 2015
    </time>
</p>
<p>
<p>With our current setup keep-alive/pipelining isn’t possible, sorry.</p>
<p>/v2/items?ids=all would be a massive response and probably make our servers very, very unhappy.</p></p>

<h2 id="">joshflosh.4517:</h2>
<p class="post-meta">
    <time datetime="2015-02-27T17:50:18+00:00">
        27 Feb 2015
    </time>
</p>
<p>
<p>Ok i thought so, thanks for the response nonetheless!</p></p>

<h2 id="">StevenL.3761:</h2>
<p class="post-meta">
    <time datetime="2015-02-27T21:08:26+00:00">
        27 Feb 2015
    </time>
</p>
<p>
<p>I always thought that the problem with ids=all is that it runs synchronously. I don’t experience any server hiccups when I send hundreds of smaller requests (200 ids) in parallel. Shouldn’t synchronous requests for the same data actually be less demanding?</p>
<p>Unless the problem is that you buffer every json response in memory before you start writing to the underlying socket. I don’t know how difficult it would be to stream the response, but that would give you an immediate, noticeable performance boost.</p></p>


  </div>

</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">GW2 Developers</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            
              GW2 Developers
            
            </li>
            
            <li><a href="mailto:gw2developers@darthmaim.de">gw2developers@darthmaim.de</a></li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/gw2developers"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">gw2developers</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/gw2api"><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">gw2api</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Learn how to use the GW2 API.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
