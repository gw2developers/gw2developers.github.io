{"title":"Website Authentication","pubDate":"2013-12-17T01:42:13.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Website-Authentication","comments":[{"pubDate":"2013-12-21T01:45:59.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Website-Authentication/3403984","author":"Healix.5819","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on December 20 2013 10:37PM\"><a href=\"/forum/community/api/Website-Authentication/3403391\">Abbot.8496:</a></cite></div><div class=\"quotey\"><p>How did you know about or where did you find reference to “Referer”?</p></div></blockquote>\n<p>When making a login script, you simply replicate the headers your web browser would send. Discovering that the referrer is required is simply a task of trial and error.</p>","arenanet":false},{"pubDate":"2013-12-20T22:37:36.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Website-Authentication/3403391","author":"Abbot.8496","body":"\n<p>Thanks for the references, Healix.  Those will come in handy.</p>\n<p>Snowman, adding the entry to the dictionary was just the trick.  How did you know about or where did you find reference to “Referer”?</p>","arenanet":false},{"pubDate":"2013-12-17T21:41:46.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Website-Authentication/3388400","author":"Healix.5819","body":"\n<p>This should help you answer any questions:</p>\n<p><a href=\"http://code.google.com/p/gw2-lastonline-leaderboards/\">http://code.google.com/p/gw2-lastonline-leaderboards/</a></p>\n<p><a href=\"http://code.google.com/p/gw2-lastonline-leaderboards/source/browse/Services/Account.cs\">For logging in specifically.</a></p>","arenanet":false},{"pubDate":"2013-12-17T09:55:51.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Website-Authentication/3385451","author":"Abominable Snowman.2036","body":"\n<p>Well, first, your content-type is off (it should be <strong>application/x-www-form-urlencoded</strong>), but second, the login page seems to check the Referer. Simply adding<br>\n</p><pre><code>\"Referer\": url,\n</code></pre><p></p>\n<p>to your headers2 dict would do the trick.</p>","arenanet":false},{"pubDate":"2013-12-17T01:42:13.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Website-Authentication/3383965","author":"Abbot.8496","body":"\n<p>This isn’t strictly related to the API, but this is where all the cool kids hang out so I’m posting here.</p>\n<p>I’m currently building some automated tools for guild management using the information from the Achievements Leaderboard page.  The program first needs to log in, however.  Looking at the sign-in page, the form submits an ‘email’ field and a ‘password’ field via POST method.</p>\n<p>When attempting to log in, I get back an error 400 (bad request) in response.  Any ideas on how to diagnose the issue?</p>\n<p>For reference, python code is as follows:</p>\n<pre><code>\n        import Request\n\n        url = \"https://account.guildwars2.com/login\"\n        content_type = 'text/html'\n        payload = {\"email\" : username, \"password\" : password}\n        headers2 = {\"User-Agent\" : 'Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)',\n                    \"Content-Type\" : content_type,\n                    }\n        \n        s = Session()\n        req = Request ('POST', url, data=payload, headers=headers2)\n        prepped = req.prepare()\n        resp = s.send(prepped)\n</code></pre>","arenanet":false}]}