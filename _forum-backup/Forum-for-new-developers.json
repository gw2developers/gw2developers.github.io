{"title":"Forum for new developers","pubDate":"2016-07-13T14:09:12.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Forum-for-new-developers","comments":[{"pubDate":"2016-07-15T17:01:56.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Forum-for-new-developers/6245348","author":"Lawton Campbell.8517","body":"\n<p>Yeah, it would.</p>\n<p>Our backend doesn’t support OPTIONS requests which means we can’t preflight CORS requests — so code running in the browser can’t actually set an authentication header — so for most use-cases the key <em>has</em> to go in the URL. Which is a bit unfortunate, but it is what it is.</p>","arenanet":true},{"pubDate":"2016-07-15T00:26:20.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Forum-for-new-developers/6244644","author":"Aidan Savage.2078","body":"\n<p>Also lawton, wouldnt the requestheader call-</p>\n<pre><code>}\n\t\t\n\t\t//request.setRequestHeader(\"Authorization\", \"Bearer&amp;lt;&lt;snipped because OP probably doesnt want it shared&gt;&amp;gt;\");\n\t\trequest.send();\n\t}</code></pre>\n<p>be slightly redundant, as that’s in effect what you’re doing when you append the apikey to the end of the url?</p>","arenanet":false},{"pubDate":"2016-07-13T17:20:41.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Forum-for-new-developers/6242748","author":"Lawton Campbell.8517","body":"\n<p>We worked this out over <a href=\"https://gitter.im/arenanet/api-cdi\">gitter</a>, but for anyone else following along, the issue was that</p>\n<p>var url = “<a href=\"https://api.guildwars2.com\">https://api.guildwars2.com</a>?access-token=&lt;” +key +\"&gt;/v2/account\";</p>\n<p>should have been</p>\n<p>var url = “<a href=\"https://api.guildwars2.com/v2/account?access_token\">https://api.guildwars2.com/v2/account?access_token</a>=” + key;</p>","arenanet":true},{"pubDate":"2016-07-13T14:09:12.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Forum-for-new-developers/6242417","author":"RobbyT.1925","body":"\n<p>I figured I’d start a forum for new developers who are having specific issues with the v2 API.  This is not for general programming questions, it’s specifically for getting help with issues that have something to do with using the API.  To get started, here’s an issue I’m having.</p>\n<p>I’m trying to return the array of characters on my account, yet all I’m getting is the array of API versions.  Can anyone explain where I’m going wrong and how to fix it?</p>\n<pre><code>window.onload = function(){\n\tfunction createCORSRequest(method, url){\n\t\tvar request = new XMLHttpRequest();\n\t\tif(\"withCredentials\" in request){\n\t\t\trequest.open(method, url, true);\n\t\t}\n\t\telse if(typeof XDomainRequest != \"undefined\"){\n\t\t\trequest = newXDomainRequest();\n\t\t\trequest.open(method, url);\n\t\t}\n\t\telse{\n\t\t\trequest = null;\n\t\t}\n\t\treturn request;\n\t}\n\t\n\tfunction makeCORSRequest(){\n\t\tvar key = API Key;\n\t\tvar url = \"https://api.guildwars2.com?access-token=&amp;lt;\" +key +\"&amp;gt;/v2/account\";\n\t\t//var url = \"https://api.guildwars2.com\";\n\t\tvar request = createCORSRequest(\"GET\", url);\n\t\tif(!request){\n\t\t\talert(\"CORS not supported\");\n\t\t\treturn;\n\t\t}\n\t\t\n\t\trequest.onload = function(){\n\t\t\tvar text = request.responseText;\n\t\t\tdocument.write(text);\n\t\t\talert(text);\n\t\t}\n\t\t\n\t\trequest.onerror = function(){\n\t\t\talert(\"Error\");\n\t\t}\n\t\t\n\t\t//request.setRequestHeader(\"Authorization\", \"Bearer&amp;lt;68ADC137-8DB1-904C-BEA3-7F4F09458405109C9565-8B0F-43B6-9154-A3C1BF80962C&amp;gt;\");\n\t\trequest.send();\n\t}\n\t\n\tmakeCORSRequest();\n}</code></pre>","arenanet":false}]}