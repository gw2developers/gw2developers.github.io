{"title":"Z map coordinate and conversions","pubDate":"2017-03-06T20:03:02.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Z-map-coordinate-and-conversions","comments":[{"pubDate":"2017-03-06T21:19:28.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Z-map-coordinate-and-conversions/6519249","author":"Drant.5902","body":"\n<p>The <strong>floor number</strong> is for getting the right tile images (canopy Verdant Brink versus ground level), which is categorial information. It would be nice to have. However, what I’m asking for is the <strong>equation</strong> to convert the <strong>Z coordinate</strong> of the character position (I put as ??? above), which is unitary information.</p>","arenanet":false},{"pubDate":"2017-03-06T20:28:42.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Z-map-coordinate-and-conversions/6519192","author":"SlippyCheeze.5483","body":"\n<p>FWIW, I asked a while back about getting the “map floor” exposed, and there was some talk of doing that, maybe, via mumble.  I’m not sure if that’s what you are hunting for with this, but figured to mention it…</p>","arenanet":false},{"pubDate":"2017-03-06T20:03:02.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Z-map-coordinate-and-conversions/6519171","author":"Drant.5902","body":"\n<p>Before I ask my question, I want to share the ways of using the three types of coordinates in the API for those unfamiliar with it…</p>\n<p>A <strong>standard map API</strong> coordinate is like this:<br>\nstandardcoord = [16295, 14527] // Trader Forum’s Waypoint</p>\n<p>An X and Y coordinate that can be converted to LeafletJS’ system using:<br>\n</p><pre><code>latlng = map.unproject(coord, map.getMaxZoom());</code></pre><p></p>\n<hr>\n<p>An <strong>event API</strong> coordinate is like this:<br>\neventcoord = [9835, -17597, -86] // Shadow Behemoth</p>\n<p>An X, Y, and Z coordinate that can be converted to a standard map API coordinate using:</p>\n<pre><code>\ncr = zone.continent_rect;\nmr = zone.map_rect;\nstandardcoord[0] = (cr[0][0]+(cr[1][0]-cr[0][0])*(eventcoord[0]-mr[0][0])/(mr[1][0]-mr[0][0]));\nstandardcoord[1] = (cr[0][1]+(cr[1][1]-cr[0][1])*(1-(eventcoord[1]-mr[0][1])/(mr[1][1]-mr[0][1])));\n\n</code></pre>\n<p><a href=\"https://forum-en.guildwars2.com/forum/community/api/Event-Details-API-location-coordinates/\">Source</a>. Note that the Z coordinate is discarded because the map is 2D.</p>\n<hr>\n<p>A <strong>Mumble Link API</strong> coordinate is like this:<br>\nmumblecoord = [-385.71387, 93.76999, 360.89853] // WvW Sunnyhill Tower</p>\n<p>An X, Z, and Y coordinate that can be converted to an event API coordinate using:<br>\n</p><pre><code>\nMETERS_TO_INCHES = 39.37;\neventcoord[0] = mumblecoord[0] * METERS_TO_INCHES; // x coordinate\neventcoord[1] = mumblecoord[2] * METERS_TO_INCHES; // z becomes y coordinate\neventcoord[2] = mumblecoord[1] * METERS_TO_INCHES; // y becomes z coordinate\n</code></pre><p></p>\n<hr>\n<p>My question is basically to get the Z coordinate for standard map API:</p>\n<pre><code>\nstandardcoord[0] = (cr[0][0]+(cr[1][0]-cr[0][0])*(eventcoord[0]-mr[0][0])/(mr[1][0]-mr[0][0]));\nstandardcoord[1] = (cr[0][1]+(cr[1][1]-cr[0][1])*(1-(eventcoord[1]-mr[0][1])/(mr[1][1]-mr[0][1])));\nstandardcoord[2] = ??? // What is the equation?\n\n</code></pre>\n<p>If you look in the v2/wvw/objectives API, the objectives use the standard map API coordinate, but also has a Z coordinate; Sunnyhill Tower is [6276, 12718, -3758] So even though the map icons are intended to be shown on a 2D map, Anet also allows them to be depicted with elevation.</p>","arenanet":false}]}