{"title":"Guild emblem ids string or numbers?","pubDate":"2015-07-29T09:01:52.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guild-emblem-ids-string-or-numbers","comments":[{"pubDate":"2015-07-29T19:07:06.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guild-emblem-ids-string-or-numbers/5331741","author":"JaxomNC.5381","body":"\n<p>Thx,  it’s working ok again now.</p>","arenanet":false},{"pubDate":"2015-07-29T18:54:56.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guild-emblem-ids-string-or-numbers/5331696","author":"Lawton Campbell.8517","body":"\n<p>This should be fixed on live.</p>","arenanet":true},{"pubDate":"2015-07-29T16:20:08.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guild-emblem-ids-string-or-numbers/5331122","author":"Lawton Campbell.8517","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on July 29 2015 09:01AM\"><a href=\"/forum/community/api/Guild-emblem-ids-string-or-numbers/5329814\">JaxomNC.5381:</a></cite></div><div class=\"quotey\"><p>Before I attempt to fix anything and use string instances all over the place: is this an intended change? Is this supposed to be permanent or is this something that was overlooked? What about other API endpoints which used to have numbers/integers for ids?</p></div></blockquote>\n<p>This is a bug. I changed some backend pieces around and this somehow slipped through the cracks; I’ll try to get this fixed on live today.</p>","arenanet":true},{"pubDate":"2015-07-29T11:13:00.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guild-emblem-ids-string-or-numbers/5330080","author":"JaxomNC.5381","body":"\n<p>Thx I’ve been doing Java since ’98, parseInt() is not the issue.</p>\n<p>The issue is that invoking jsonObject.getInt(&lt;id&gt;) in JSON-P raises a ClassCastException because, due to this change, the value stored for those accessors in the JsonObject is of type JsonValue.STRING instead of JsonValue.NUMBER. Thus jsonObject.getString(&lt;id&gt;) or jsonObject.getJsonString(&lt;id&gt;) needs to be called instead and then the value needs to be parsed. And, if I do the change preemptively,  and later the API switches back to numbers instead of strings, I will get ClassCastException instead for the very same reason.</p>","arenanet":false},{"pubDate":"2015-07-29T09:42:57.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guild-emblem-ids-string-or-numbers/5329908","author":"Chokapik.3741","body":"\n<p>In Java you should be able to use Integer.parseInt(\"\" + i). This way it should convert strings to ints and not cause errors if i is already an integer.</p>","arenanet":false},{"pubDate":"2015-07-29T09:22:26.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guild-emblem-ids-string-or-numbers/5329866","author":"smiley.1438","body":"\n<p>Yay, my guild is famous!<img src=\"/include/images/smilies/colondee.png\"></p>\n<p>I’m pretty sure this is not intended. In fact, there have been patches which turned numerical strings into actual numbers in other endpoints (items for example).</p>","arenanet":false},{"pubDate":"2015-07-29T09:01:53.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guild-emblem-ids-string-or-numbers/5329814","author":"JaxomNC.5381","body":"\n<p>Hi, a recent change to v1/guild_details/emblem now returns all ids are strings instead of numbers.</p>\n<p>Taking the example on the wiki (<a href=\"http://wiki.guildwars2.com/wiki/API:1/guild_details\">http://wiki.guildwars2.com/wiki/API:1/guild_details</a>), for <a href=\"https://api.guildwars2.com/v1/guild_details.json?guild_id=75FD83CF-0C45-4834-BC4C-097F93A487AF\">https://api.guildwars2.com/v1/guild_details.json?guild_id=75FD83CF-0C45-4834-BC4C-097F93A487AF</a> , previouly we’ve had:</p>\n<p>{<br>\n   “guild_id”: “75FD83CF-0C45-4834-BC4C-097F93A487AF”,<br>\n   “guild_name”: “Veterans Of Lions Arch”,<br>\n   “tag”: “LA”,<br>\n   “emblem”: {<br>\n     “background_id”: 27,<br>\n     “foreground_id”: 114,<br>\n     “flags”: [],<br>\n     “background_color_id”: 11,<br>\n     “foreground_primary_color_id”: 584,<br>\n     “foreground_secondary_color_id”: 64<br>\n   }<br>\n }</p>\n<p>Now, instead, we get:</p>\n<p>{<br>\n    “guild_id”: “75FD83CF-0C45-4834-BC4C-097F93A487AF”,<br>\n    “guild_name”: “Veterans Of Lions Arch”,<br>\n    “tag”: “LA”,<br>\n    “emblem”: {<br>\n        “background_id”: “27”,<br>\n        “foreground_id”: “114”,<br>\n        “flags”: [],<br>\n        “background_color_id”: “11”,<br>\n        “foreground_primary_color_id”: “584”,<br>\n        “foreground_secondary_color_id”: “64”<br>\n    }<br>\n}</p>\n<p>All ids that were numbers are now strings. It’s probably not an issue with JavaScript but I am programming tests in Java with JSON-P where type does actually matter. So currently I am getting a lot of ClassCastExceptions because of this. Before I attempt to fix anything and use string instances all over the place: is this an intended change? Is this supposed to be permanent or is this something that was overlooked? What about other API endpoints which used to have numbers/integers for ids?</p>","arenanet":false}]}