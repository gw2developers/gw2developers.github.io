{"title":"How to draw event circles","pubDate":"2013-10-12T18:37:35.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/How-to-draw-event-circles","comments":[{"pubDate":"2013-10-28T16:35:17.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/How-to-draw-event-circles/3106553","author":"Dr Ishmael.9685","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on October 28 2013 08:35AM\"><a href=\"/forum/community/api/How-to-draw-event-circles/3104688\">Lil Puppy.5216:</a></cite></div><div class=\"quotey\"><p>Some events move, I don’t believe the API gives current GPS type location info, only starting location info.</p></div></blockquote>\n<p>That’s correct, the API only lists the starting location of the objective, it does not track the current location.</p>","arenanet":false},{"pubDate":"2013-10-28T08:35:53.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/How-to-draw-event-circles/3104688","author":"Lil Puppy.5216","body":"\n<p>1000 is like the little escort ones, 8500 is like major boss ones.<br>\nFire elemental has a huge area circle during one of the pre-event phases that circles just inside the entire building for example.<br>\nSomewhere inside this forum is the circle to map translation.<br>\nGW2Stuff may be adjusting the size/location of some of the circles manually.<br>\nSome events move, I don’t believe the API gives current GPS type location info, only starting location info.</p>","arenanet":false},{"pubDate":"2013-10-12T18:37:37.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/How-to-draw-event-circles/3011982","author":"Darsin Callagher.5821","body":"\n<p>Hey guys, i’m trying to create a personal event timer with all the best features from multiple websites.<br>\nso far it get’s all the map poi’s, hearts etc and puts them in layers.<br>\nthen i get all the events i care about and their details.</p>\n<p>now i’m trying to place the event circle.png ontop of the map like gwstuff is doing.<br>\nbut his data is inconsistent with what comes out of the api.</p>\n<p>i found a conversion for tile coords to continent coords. but that still doesn’t seem to work completely.</p>\n<p>This is my coord conversion.<br>\nfunction calc_continent_coord($map_rect, $continent_rect, $event_location)<br>\n\t{<br>\n\t\t$center = $event_location-&gt;center;</p>\n<p>$map_width = $map_rect<sup class=\"footnote\"><a href=\"#fn1\">1</a></sup><sup class=\"footnote\"><a href=\"#fn0\">0</a></sup> – $map_rect<sup class=\"footnote\"><a href=\"#fn0\">0</a></sup><sup class=\"footnote\"><a href=\"#fn0\">0</a></sup>; <br>\n\t\t$map_height = $map_rect<sup class=\"footnote\"><a href=\"#fn1\">1</a></sup><sup class=\"footnote\"><a href=\"#fn1\">1</a></sup> – $map_rect<sup class=\"footnote\"><a href=\"#fn0\">0</a></sup><sup class=\"footnote\"><a href=\"#fn1\">1</a></sup>;</p>\n<p>$continent_width = $continent_rect<sup class=\"footnote\"><a href=\"#fn1\">1</a></sup><sup class=\"footnote\"><a href=\"#fn0\">0</a></sup> – $continent_rect<sup class=\"footnote\"><a href=\"#fn0\">0</a></sup><sup class=\"footnote\"><a href=\"#fn0\">0</a></sup>; <br>\n\t\t$continent_height = $continent_rect<sup class=\"footnote\"><a href=\"#fn1\">1</a></sup><sup class=\"footnote\"><a href=\"#fn1\">1</a></sup> – $continent_rect<sup class=\"footnote\"><a href=\"#fn0\">0</a></sup><sup class=\"footnote\"><a href=\"#fn1\">1</a></sup>;</p>\n<p>$xMap = ($center<sup class=\"footnote\"><a href=\"#fn0\">0</a></sup> – $map_rect<sup class=\"footnote\"><a href=\"#fn0\">0</a></sup><sup class=\"footnote\"><a href=\"#fn0\">0</a></sup>) / $map_width;<br>\n\t\t$yMap = ($center<sup class=\"footnote\"><a href=\"#fn1\">1</a></sup> – $map_rect<sup class=\"footnote\"><a href=\"#fn0\">0</a></sup><sup class=\"footnote\"><a href=\"#fn1\">1</a></sup>) / $map_height;</p>\n<p>$yMap = 1 – $yMap;</p>\n<p>$xContinent = $continent_rect<sup class=\"footnote\"><a href=\"#fn0\">0</a></sup><sup class=\"footnote\"><a href=\"#fn0\">0</a></sup> + $xMap * $continent_width;<br>\n\t\t$yContinent = $continent_rect<sup class=\"footnote\"><a href=\"#fn0\">0</a></sup><sup class=\"footnote\"><a href=\"#fn1\">1</a></sup> + $yMap * $continent_height;</p>\n<p>return [$xContinent,$yContinent];<br>\n\t}<br>\n<strong>and then i use</strong></p>\n<p>worldToPixel: function(latlng)<br>\n\t{<br>\n\t\treturn map.project(latlng,0);<br>\n\t},<br>\n\t<br>\n\tpixelToWorld: function(xy)<br>\n\t{<br>\n\t\treturn map.unproject(xy, 0);<br>\n\t},<br>\n\t<br>\n\tnavigate: function(x, y)<br>\n\t{<br>\n\t\tvar latlng = this.pixelToWorld([x, y]);<br>\n\t\tmap.setView(latlng, 7);<br>\n\t},<br>\n    setScaledMarker: function(key, x, y, r, image)<br>\n    {<br>\n    \t<br>\n        if (this.<em>eventmarkers[key])<br>\n        {<br>\n            map.removeLayer(this.</em>eventmarkers[key]);<br>\n        }<br>\n        <br>\n        if (r &amp;&amp; image)<br>\n        {<br>\n        \tvar boundSouthWest = this.pixelToWorld([x – r, y + r]);<br>\n\t\t\tvar boundNorthEast = this.pixelToWorld([x + r, y – r]);<br>\n            var layer = new L.ImageOverlay(image, [boundSouthWest, boundNorthEast]);<br>\n            map.addLayer(layer);<br>\n            this.<em>eventmarkers[key] = layer;<br>\n        }<br>\n        else<br>\n        {<br>\n            delete this.</em>eventmarkers[key];<br>\n        }<br>\n    }</p>\n<p>to create the layers.<br>\n1. i don’t even see the actual layer.<br>\n2. how does the radius translate to the event vs the coordinate.<br>\n3. some of them have a radius of 1000 and some have 8500 that seems like a large difference.</p>","arenanet":false}]}