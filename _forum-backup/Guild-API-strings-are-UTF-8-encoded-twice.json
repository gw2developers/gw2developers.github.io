{"title":"Guild API strings are UTF-8 encoded twice?","pubDate":"2015-02-14T17:06:40.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guild-API-strings-are-UTF-8-encoded-twice","comments":[{"pubDate":"2015-02-18T00:19:36.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guild-API-strings-are-UTF-8-encoded-twice/4805018","author":"AysonCurrax.3254","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on February 17 2015 10:24PM\"><a href=\"/forum/community/api/Guild-API-strings-are-UTF-8-encoded-twice/4804800\">Lawton Campbell.8517:</a></cite></div><div class=\"quotey\"><p>And the fix is live.</p></div></blockquote>\n<p>Thanks A Lot! Now that also explains why my request timed out earlier too.</p>","arenanet":false},{"pubDate":"2015-02-17T22:24:19.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guild-API-strings-are-UTF-8-encoded-twice/4804800","author":"Lawton Campbell.8517","body":"\n<p>And the fix is live.</p>","arenanet":true},{"pubDate":"2015-02-17T22:03:04.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guild-API-strings-are-UTF-8-encoded-twice/4804759","author":"Pat Cavit.9234","body":"\n<p>The fix for all of these issues is identical.</p>","arenanet":true},{"pubDate":"2015-02-17T21:03:01.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guild-API-strings-are-UTF-8-encoded-twice/4804606","author":"AysonCurrax.3254","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on February 16 2015 10:34PM\"><a href=\"/forum/community/api/Guild-API-strings-are-UTF-8-encoded-twice/4802027\">Lawton Campbell.8517:</a></cite></div><div class=\"quotey\"><p>Tracked this one down today, hoping to have the fix deployed sometime this week. Thanks for the report!</p></div></blockquote>\n<p>by “this one” do you mean the encoding issue in general, or just for the guild api? the v1/skin_details.json is affected by that issue as well, as i mentioned on the recent maintenance post. the v1/recipe_details.json and v1/item_details.json might be affected by the same issue. I would appreciate if you were to look into that, if you havent already.<img src=\"/include/images/smilies/smile.png\"></p>","arenanet":false},{"pubDate":"2015-02-16T22:34:09.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guild-API-strings-are-UTF-8-encoded-twice/4802027","author":"Lawton Campbell.8517","body":"\n<p>Tracked this one down today, hoping to have the fix deployed sometime this week. Thanks for the report!</p>","arenanet":true},{"pubDate":"2015-02-15T03:21:28.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guild-API-strings-are-UTF-8-encoded-twice/4797288","author":"fooey.5824","body":"\n<p>Whew, I thought I’d broken something on my side</p>","arenanet":false},{"pubDate":"2015-02-14T17:46:16.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guild-API-strings-are-UTF-8-encoded-twice/4796222","author":"smiley.1438","body":"\n<p>Yeah, seems like there’s something wrong with the encoding on API side, probably happened during the backend change a couple days ago. API v1 only.</p>\n<p>See also: <a href=\"http://wiki-de.guildwars2.com/wiki/Widget:Karte#Beispiel\">http://wiki-de.guildwars2.com/wiki/Widget:Karte#Beispiel</a> (floor data)</p>","arenanet":false},{"pubDate":"2015-02-14T17:06:40.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/Guild-API-strings-are-UTF-8-encoded-twice/4796130","author":"Averdia.9753","body":"\n<p>The GW2 guild API seems to be doing a UTF-8 encoding twice on strings which means they don’t get decoded correctly on the client end unless you do a workaround. I’ve not checked the other APIs.</p>\n<p>An example is the guild “Bojovní Lumíci”. The API returns “Bojovn?? Lum??ci” which is 0xEF 0xBF 0×83 0xEF 0xBE 0xAD for the out of place characters. The forum is stripping out those characters and replacing it with ?? so you’ll have to look at the JSON output of the API for the actual characters. If you run each 3 byte encoding through the UTF-8 decoding algorithm and ignoring the invalid codepoints then you get 0xFF 0xC3 0xFF 0xAD. If you then strip out the extraneous 0xFFs then you’re left with 0xC3 0xAD which is the UTF-8 encoding for í.</p>\n<p><a href=\"https://api.guildwars2.com/v1/guild_details.json?guild_id=95EE4085-7824-4564-AC3F-77F79C970D7C\">https://api.guildwars2.com/v1/guild_details.json?guild_id=95EE4085-7824-4564-AC3F-77F79C970D7C</a></p>\n<p>Apologies for anybody actually in Bojovní Lumíci. You’re just a handy example due to the accented letters in your name.</p>","arenanet":false}]}