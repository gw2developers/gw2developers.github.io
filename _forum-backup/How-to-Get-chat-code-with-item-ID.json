{"title":"[How to] Get chat code with item ID","pubDate":"2013-05-25T10:03:47.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/How-to-Get-chat-code-with-item-ID","comments":[{"pubDate":"2015-02-10T19:51:15.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/How-to-Get-chat-code-with-item-ID/4783311","author":"smiley.1438","body":"\n<p>So here’s a snippet for PHP which works with IDs &gt; 16 bit:</p>\n<p><a href=\"https://gist.github.com/codemasher/47dea40f70f990480c5b\">https://gist.github.com/codemasher/47dea40f70f990480c5b</a></p>","arenanet":false},{"pubDate":"2014-07-14T11:24:12.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/How-to-Get-chat-code-with-item-ID/4200986","author":"AysonCurrax.3254","body":"\n<p>I too, noticed that exceeding 65535 ids borked up my previous code where only the 3rd and 4th byte were depending on the item id. The first byte indicates whether it is an item, skin etc. the second byte, atleast for items, indicates the amount of items (which is why its normally set to 1). the last 4 bytes consist of the item id in little endian order.<br>\nThis is how i did it in Java :</p>\n<p>private String encodeBase64(int itemId) {<br>\n\t\tbyte[] temp = ByteBuffer.allocate(4).order(ByteOrder.LITTLE_ENDIAN).putInt(itemId).array();<br>\n\t\tStringBuilder result = new StringBuilder();<br>\n\t\tresult.append(“[&amp;”);<br>\n\t\tbyte[ ] bytes = new byte[ 6 ];<br>\n\t\tbytes[ 0 ] = 0×02;<br>\n\t\tbytes[ 1 ] = 0×01;<br>\n\t\tbytes[ 2 ] = temp[ 0 ];<br>\n\t\tbytes[ 3 ] = temp[ 1 ];<br>\n\t\tbytes[ 4 ] = temp[ 2 ];<br>\n\t\tbytes[ 5 ] = temp[ 3 ];<br>\n\t\tresult.append(Base64.encodeBase64String(bytes));<br>\n\t\tresult.append(“]”);<br>\n\t\treturn result.toString();<br>\n\t}</p>\n<p>i noticed because i wanted to test my chat code for light of dwayna (infused) which resulted in some blue item. the cause was the fact that all chat codes with an item id below 65535 would end in AA, but since this one is above that limit, it should have ended in EA. I hope this helped.</p>","arenanet":false},{"pubDate":"2014-07-13T14:17:48.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/How-to-Get-chat-code-with-item-ID/4198916","author":"Leylin.3901","body":"\n<p>Hello there,</p>\n<p>I don’t know if it is okay to revive this long dead thread. But the thing that you were afraid about happened: There are Item ID’s higher than 65535.</p>\n<p>I used the python code snippet from zeeZ.5713 and modified it to fit into my environment:</p>\n<p>def genItemChatCode(item_id):<br>\n    a = b’\\x02\\x01’ + bytes([item_id % 256]) + bytes([int(item_id / 256)]) + b’\\x00\\x00’<br>\n    return ‘[&amp;’ + b64encode(a).decode(encoding=“UTF-8”) + ‘]’</p>\n<p>It was working really well – until I reached “Item: 65536\tAscalonian Elementalist Loot Box”.</p>\n<p>After a bit of searching I stumbled across a little python gem from “Guest”:<br>\n<a href=\"http://pastebin.com/Nkw5iZGv\">http://pastebin.com/Nkw5iZGv</a></p>\n<p>I modified it and used it with Python 3.3.2 and Django 1.6 as a template filter.</p>\n<p>@register.filter<br>\ndef genItemChatCode(item_id):<br>\n    – - hexa = b’\\x02\\x01’<br>\n    – - for i in range(4):<br>\n      – - – - hexa += bytes([item_id % 256])<br>\n       – - – - item_id //= 256<br>\n    – - return ‘[&amp;’ + b64encode(hexa).decode(encoding=“UTF-8”) + ‘]’</p>\n<p>I hope this helps<img src=\"/include/images/smilies/smile.png\"></p>","arenanet":false},{"pubDate":"2013-05-25T22:15:24.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/How-to-Get-chat-code-with-item-ID/2091921","author":"Dr Ishmael.9685","body":"\n<p>Here’s some VBA I wrote for Excel.  The Base64 module is from <a href=\"http://www.source-code.biz/\">http://www.source-code.biz/</a> , but it expected all input to be ASCII, so I had to modify it to accept integer/byte-array inputs.</p>\n<ul>\n\t<li>Base64Coder.bas: <a href=\"https://drive.google.com/file/d/0B5NobLNMdY89bElkRE9yRzRPWW8/edit?usp=sharing\">https://drive.google.com/file/d/0B5NobLNMdY89bElkRE9yRzRPWW8/edit?usp=sharing</a></li>\n\t<li>GWID.bas: <a href=\"https://drive.google.com/file/d/0B5NobLNMdY89U1hTRVl5QWlWWm8/edit?usp=sharing\">https://drive.google.com/file/d/0B5NobLNMdY89U1hTRVl5QWlWWm8/edit?usp=sharing</a></li>\n</ul>\n<p>Usage:</p>\n<p>=EncodeGWID(12345)</p>\n<p>=DecodeGWID(“[&amp;AGXXXX]”)</p>","arenanet":false},{"pubDate":"2013-05-25T10:57:06.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/How-to-Get-chat-code-with-item-ID/2089566","author":"Yoone.9461","body":"\n<p>Thank you, I added it.</p>\n<blockquote><div class=\"citey\"><cite title=\"Posted on May 25 2013 10:39AM\"><a href=\"/forum/community/api/How-to-Get-chat-code-with-item-ID/2089524\">zeeZ.5713:</a></cite></div><div class=\"quotey\"><p>There might be a better approach to this, though :P Also what happens once IDs exceed 65535?</p></div></blockquote>\n<p>That’s why I said: “You also can improve the existing functions!”<img src=\"/include/images/smilies/smile.png\"></p>\n<p>I don’t really know what to do in that case.</p>\n<p><strong>Edit:</strong> first post updated with links to external pastes (for a more readable message).</p>","arenanet":false},{"pubDate":"2013-05-25T10:39:47.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/How-to-Get-chat-code-with-item-ID/2089524","author":"zeeZ.5713","body":"\n<p>Python?</p>\n<pre><code>from base64 import b64encode\ndef genItemChatCode(item_id):\n    return '[&amp;' + b64encode('\\x02\\x01' + chr(item_id%256) + chr(item_id/256) + '\\x00\\x00') + ']'</code>\n\n</pre>\n<p>There might be a better approach to this, though :P Also what happens once IDs exceed 65535?</p>","arenanet":false},{"pubDate":"2013-05-25T10:03:47.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/How-to-Get-chat-code-with-item-ID/2089449","author":"Yoone.9461","body":"\n<p>Hello!</p>\n<p>I saw some messages about how to get the <strong>chat codes</strong> of the items we get from the API, so I thought a collection of snippets in multiple languages would be nice.</p>\n<p>I’ll start with JavaScript and PHP, feel free to adapt it in other languages if you can.</p>\n<p>As pointed out by zeeZ.5713, the following functions are designed for the <strong>item_id</strong> to be lower or equal than <strong>65535</strong> (or 65536, it depends on the first ID).</p>\n<p><em>So if you know how, please improve the existing functions!</em></p>\n<ul>\n\t<li><a href=\"http://paste.awesom.eu/DVw\">JavaScript</a> (by <a href=\"http://www.reddit.com/r/Guildwars2/comments/zy8gb/how_to_preview_any_item_in_the_trade_post/c68vvxi\">OriginalLuCHEF</a> from reddit)</li>\n\t<li><a href=\"http://paste.awesom.eu/Vmh\">PHP</a></li>\n\t<li><a href=\"http://paste.awesom.eu/99X\">Python</a> (by zeeZ.5713)</li>\n</ul>","arenanet":false}]}