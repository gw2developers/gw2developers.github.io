{"title":"[API Bug] map_floor: multiple entries per map","pubDate":"2013-06-23T02:57:45.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/API-Bug-map-floor-multiple-entries-per-map","comments":[{"pubDate":"2014-07-25T18:22:17.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/4236840","author":"Dr Ishmael.9685","body":"\n<p>Time to practice my thread necromancy… ABRACADABRA!  <strong>puff of smoke</strong>  <strong>coughcough</strong> <strong>blink</strong>  Hey, it worked!</p>\n<p>Guess what guys?  Floor 1 is fixed!  I ran ElGreenGo’s fiddle, and all maps show 1 instance in the output JSON.  I specifically searched for the 5 last known bugged map names, and all of them appear only once.</p>","arenanet":false},{"pubDate":"2013-09-10T02:45:09.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2808740","author":"ElGreenGo.6734","body":"\n<p>I spent the last week going crazy because of this bug. I thought it had already been fixed, so I thought it was a problem with my code.</p>\n<p>I built this tool to find duplicate maps:<br>\n<a href=\"http://jsfiddle.net/UselessCode/uuMB7/\">http://jsfiddle.net/UselessCode/uuMB7/</a></p>\n<p>The following maps are currently still affected.</p>\n<ul>\n\t<li>Dredgehaunt Cliffs</li>\n\t<li>Lornar’s Pass</li>\n\t<li>Blazeridge Steppes</li>\n\t<li>Harathi Hinterlands</li>\n\t<li>Bloodtide Coast</li>\n</ul>","arenanet":false},{"pubDate":"2013-07-03T18:24:20.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2342665","author":"das moran fool.1072","body":"\n<p>Any rough idea as to when this will be addressed?  A month?  Six months?</p>\n<p>Thanks.</p>","arenanet":false},{"pubDate":"2013-06-27T00:56:21.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2297034","author":"Primal Zed.9714","body":"\n<p>Thanks Spradlin.</p>","arenanet":false},{"pubDate":"2013-06-27T00:48:56.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2296994","author":"Cliff Spradlin.3512","body":"\n<p>OK, so we found the cause of this bug. The underlying map floor content sometimes points to the incorrect map_id for a few map instances.</p>\n<p>Since it’s a bug in the underlying content, it’ll take a little while for it to be fixed in a live patch.</p>\n<p>At least you found a good workaround in the meantime, which is to read floor 2’s data instead.</p>","arenanet":true},{"pubDate":"2013-06-26T21:36:51.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2295719","author":"Cliff Spradlin.3512","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on June 26 2013 09:17PM\"><a href=\"/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2295565\">Dr Ishmael.9685:</a></cite></div><div class=\"quotey\"><blockquote><div class=\"citey\"><cite title=\"Posted on June 26 2013 08:38PM\"><a href=\"/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2295248\">Primal Zed.9714:</a></cite></div><div class=\"quotey\"><blockquote><div class=\"citey\"><cite title=\"Posted on June 26 2013 05:06PM\"><a href=\"/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2293481\">Cliff Spradlin.3512:</a></cite></div><div class=\"quotey\"><blockquote><div class=\"citey\"><cite title=\"Posted on June 23 2013 02:57AM\"><a href=\"/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2265307\">Dr Ishmael.9685:</a></cite></div><div class=\"quotey\"><p>In map_floors.json, some maps are returning as 2 separate entries under “maps”.</p></div></blockquote>\n<p>I believe this problem is fixed, can you verify?</p></div></blockquote>\n<p>Blazedridge Steppes and Lornar’s Pass are each still showing up twice in <a href=\"https://api.guildwars2.com/v1/map_floor.json?continent_id=1&floor=1\">https://api.guildwars2.com/v1/map_floor.json?continent_id=1&amp;floor=1</a></p>\n<p>Possibly other maps as well.</p></div></blockquote>\n<p>Yep, Harathi Hinterlands is still there twice.  The first has all POIs and all sectors, the second has all waypoints and vistas but no landmarks and only 1 sector (tasks and skill challenges are all present in both).</p></div></blockquote>\n<p>You’re right. OK, still looking into the bug.</p>","arenanet":true},{"pubDate":"2013-06-26T21:17:56.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2295565","author":"Dr Ishmael.9685","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on June 26 2013 08:38PM\"><a href=\"/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2295248\">Primal Zed.9714:</a></cite></div><div class=\"quotey\"><blockquote><div class=\"citey\"><cite title=\"Posted on June 26 2013 05:06PM\"><a href=\"/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2293481\">Cliff Spradlin.3512:</a></cite></div><div class=\"quotey\"><blockquote><div class=\"citey\"><cite title=\"Posted on June 23 2013 02:57AM\"><a href=\"/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2265307\">Dr Ishmael.9685:</a></cite></div><div class=\"quotey\"><p>In map_floors.json, some maps are returning as 2 separate entries under “maps”.</p></div></blockquote>\n<p>I believe this problem is fixed, can you verify?</p></div></blockquote>\n<p>Blazedridge Steppes and Lornar’s Pass are each still showing up twice in <a href=\"https://api.guildwars2.com/v1/map_floor.json?continent_id=1&floor=1\">https://api.guildwars2.com/v1/map_floor.json?continent_id=1&amp;floor=1</a></p>\n<p>Possibly other maps as well.</p></div></blockquote>\n<p>Yep, Harathi Hinterlands is still there twice.  The first has all POIs and all sectors, the second has all waypoints and vistas but no landmarks and only 1 sector (tasks and skill challenges are all present in both).</p>","arenanet":false},{"pubDate":"2013-06-26T20:38:46.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2295248","author":"Primal Zed.9714","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on June 26 2013 05:06PM\"><a href=\"/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2293481\">Cliff Spradlin.3512:</a></cite></div><div class=\"quotey\"><blockquote><div class=\"citey\"><cite title=\"Posted on June 23 2013 02:57AM\"><a href=\"/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2265307\">Dr Ishmael.9685:</a></cite></div><div class=\"quotey\"><p>In map_floors.json, some maps are returning as 2 separate entries under “maps”.</p></div></blockquote>\n<p>I believe this problem is fixed, can you verify?</p></div></blockquote>\n<p>Blazedridge Steppes and Lornar’s Pass are each still showing up twice in <a href=\"https://api.guildwars2.com/v1/map_floor.json?continent_id=1&floor=1\">https://api.guildwars2.com/v1/map_floor.json?continent_id=1&amp;floor=1</a></p>\n<p>Possibly other maps as well.</p>","arenanet":false},{"pubDate":"2013-06-26T17:06:24.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2293481","author":"Cliff Spradlin.3512","body":"\n<blockquote><div class=\"citey\"><cite title=\"Posted on June 23 2013 02:57AM\"><a href=\"/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2265307\">Dr Ishmael.9685:</a></cite></div><div class=\"quotey\"><p>In map_floors.json, some maps are returning as 2 separate entries under “maps”.</p></div></blockquote>\n<p>I believe this problem is fixed, can you verify?</p>","arenanet":true},{"pubDate":"2013-06-23T04:39:00.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2265573","author":"smiley.1438","body":"\n<p>I’ve already seen your approaches on the wiki, but you seem to have problems with bounding boxes aka. pan restrictions – thats why i posted my example on your talk page earlier. It has also a minimum of inline JS which allows easier maintenance and it already supports multiple maps as you can see. <img src=\"/include/images/smilies/wink.png\"></p>","arenanet":false},{"pubDate":"2013-06-23T04:33:39.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2265560","author":"Dr Ishmael.9685","body":"\n<p>I’ve already created a widget on GW2W.EN: <a href=\"http://wiki.guildwars2.com/wiki/Widget:Zone_map\">http://wiki.guildwars2.com/wiki/Widget:Zone_map</a></p>\n<p>And while floor 2 does seem to not have this issue, the problem is that in maps.json, the explorable zones specify default_floor = 1.  So if you’re building a map dynamically based on a map name, you’re going to use the default_floor value, and floor 1 is screwed up currently.</p>","arenanet":false},{"pubDate":"2013-06-23T04:12:49.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2265505","author":"smiley.1438","body":"\n<p>Actually floor 2 seems to be the better choice to draw a full world map. Floor 1 is missing (or overwrites) sector names for Dredgehaunt Cliffs, Lornar Pass, Bloodtide Coast and Harathi Hinterlands. (You can see the holes on the map on low zoom levels with the sector name layer enabled. I’ve updated the demo on my server, not yet on GitHub – i’m using floor 2 now and dropped the workaround.</p>\n<p><a href=\"http://gw2.chillerlan.net/examples/gw2maps.html\">http://gw2.chillerlan.net/examples/gw2maps.html</a></p>\n<p>btw. it’s interesting how leaflet manages the zoom levels depending on the viewport, yet annoying sometimes…</p>\n<p>Dr Ishmael, i’d like to encourage you to use my example and help making it perfect for wiki use – i made these examples for the german wiki – i hope i’ll get some widget rights there soon to test it<img src=\"/include/images/smilies/wink.png\"></p>","arenanet":false},{"pubDate":"2013-06-23T03:30:17.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2265401","author":"Dr Ishmael.9685","body":"\n<p>Right, I forgot to mention that I was looking at floor=1.</p>","arenanet":false},{"pubDate":"2013-06-23T03:14:55.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2265354","author":"smiley.1438","body":"\n<p>I hope we’ll get some more information on how the floors work. If you take floor 2 instead, everything seems to be fine. Floor 1 has all the instance data included and takes forever to load, too.</p>\n<p><a href=\"https://api.guildwars2.com/v1/map_floor.json?continent_id=1&floor=2\">https://api.guildwars2.com/v1/map_floor.json?continent_id=1&amp;floor=2</a></p>\n<p><a href=\"http://gw2.chillerlan.net/examples/gw2maps-test.html\">http://gw2.chillerlan.net/examples/gw2maps-test.html</a></p>","arenanet":false},{"pubDate":"2013-06-23T02:57:45.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/API-Bug-map-floor-multiple-entries-per-map/2265307","author":"Dr Ishmael.9685","body":"\n<p>In map_floors.json, some maps are returning as 2 separate entries under “maps”.  E.g., under the “Shiverpeak Mountains” region, the first maps are:</p>\n<pre><code>\n\"maps\":{\n    \"26\":{\n        \"name\":\"Dredgehaunt Cliffs\",\n        \"min_level\":40,\n        ...\n    },\n    \"26\":{\n        \"name\":\"Dredgehaunt Cliffs\",\n        \"min_level\":40,\n        ...\n    },\n},\n...\n</code></pre>\n<p>The problem is that these two maps entries are not identical in terms of the PoIs, Tasks, Sectors, etc. that they list.  The first one lists everything (I think), but the second one doesn’t (the only landmark is Falooaloo, the only sector is Wyrmblood Lake, etc.).</p>\n<p>Since these two entries have identical keys (“26”), when the JSON is parsed, the second entry will overwrite the first one.  This is happening for multiple maps, not just Dredgehaunt – I noticed yesterday that Blazeridge Steppes and Harathi Hinterlands were not displaying any PoIs on my pan-Tyria map.</p>\n<p>This is definitely a problem for anyone trying to show all objectives in a zone, like I’m trying to do on the wiki.</p>","arenanet":false}]}