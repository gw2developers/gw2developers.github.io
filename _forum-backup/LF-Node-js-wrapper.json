{"title":"LF Node.js wrapper","pubDate":"2016-01-11T18:44:47.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/LF-Node-js-wrapper","comments":[{"pubDate":"2016-01-15T20:14:13.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/LF-Node-js-wrapper/5922133","author":"aliem.3412","body":"\n<p>It’s not so simple as it seems without library (you need to consume the res stream and listen to errors … and of course clean up the mess) but with <a href=\"https://npmjs.org/packages/request\">request</a> or <a href=\"https://npmjs.org/packages/node-fetch\">fetch</a> is pretty simple as in:</p>\n<p><strong>request</strong> (callback pattern):</p>\n<pre><code>\nrequest.get('url',\n            {\n                headers: {\n                    Authorization:\n                        `Bearer ${new Buffer('my_long_key').toString('base64') }`\n                }\n             }, (err, res) =&amp;gt; { /* consume the request */ });\n</code></pre>\n<hr>\n<p><strong>fetch</strong> (promise):</p>\n<pre><code>\nfunction check(res) {\n    if (res.status &amp;gt; 300) {\n        throw new Error(`My fancy error for ${status}`)\n    }\n    return res;\n}\n\nfunction json(res) {\n    return res.json()\n}\n\nfetch('url',\n      {\n          headers: {\n              Authorization:\n                  `Bearer ${new Buffer('my_long_key').toString('base64') }`\n              }\n       })\n.then(check)\n.then(json)\n.then((body) =&amp;gt; doSomething(body))\n.catch((err) =&amp;gt; handleError(err))\n...;\n</code></pre>","arenanet":false},{"pubDate":"2016-01-15T19:58:01.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/LF-Node-js-wrapper/5922106","author":"Bormotun.9568","body":"\n<p>What for wraper? All you need is http get request:<br>\n<a href=\"https://nodejs.org/api/http.html#http_http_get_options_callback\">https://nodejs.org/api/http.html#http_http_get_options_callback</a></p>\n<pre><code>http.get('http://www.google.com/index.html',{\n                headers: {\n                    Authorization: \"Bearer \" + key\n                }\n            }, (res) =&amp;gt; {\n  console.log(`Got response: ${res.statusCode}`);\n  // update your models with received data res.data\n\n}).on('error', (e) =&amp;gt; {\n  console.log(`Got error: ${e.message}`);\n});</code></pre>","arenanet":false},{"pubDate":"2016-01-11T18:44:47.000Z","guid":"http://forum-en.guildwars2.com/forum/community/api/LF-Node-js-wrapper/5911056","author":"Transius.1895","body":"\n<p>I’m curious – I’ve looked through the list of API wrappers and only found one for Node.js, but it looks horribly outdated. I’ve Googled around and found at least one additional wrapper, but it looks incomplete at best, and it is also mostly untouched as of late.</p>\n<p>Now, before I go on with creating my own wrapper, is anyone aware of any relatively up to date Node.js API wrappers that just didn’t get added to the list on the wiki?</p>","arenanet":false}]}